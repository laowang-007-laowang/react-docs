<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æ€§èƒ½ä¼˜åŒ–æŠ€å·§ - React ä¸­æ–‡æ–‡æ¡£</title>
  <meta name="description" content="ä»å…¥é—¨åˆ°ç²¾é€šï¼Œå…¨é¢æŒæ¡Reactå¼€å‘æŠ€èƒ½">
  <link rel="stylesheet" href="assets/style.css">
  <link rel="stylesheet" href="assets/highlight.css">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>âš›ï¸</text></svg>">
</head>
<body>
  <div class="container">
    <!-- é¡¶éƒ¨å¯¼èˆª -->
    <header class="header">
      <div class="header-content">
        <div class="logo">
          <span class="logo-icon">âš›ï¸</span>
          <div class="logo-text">
            <h1>React ä¸­æ–‡æ–‡æ¡£</h1>
            <p>ç°ä»£åŒ–çš„Reactå­¦ä¹ æŒ‡å—</p>
          </div>
        </div>
        <nav class="header-nav">
          <a href="index.html" class="nav-link">é¦–é¡µ</a>
          <a href="#" class="nav-link" onclick="toggleSidebar()">ç›®å½•</a>
          <a href="https://github.com/facebook/react" target="_blank" class="nav-link">GitHub</a>
        </nav>
      </div>
    </header>

    <div class="main-layout">
      <!-- ä¾§è¾¹æ  -->
      <aside class="sidebar" id="sidebar">
        <div class="sidebar-content">
          <div class="search-box">
            <input type="text" placeholder="æœç´¢æ–‡æ¡£..." id="searchInput" onkeyup="searchDocs()">
            <span class="search-icon">ğŸ”</span>
          </div>
          <nav class="doc-nav">
            
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ“š</span>
          åŸºç¡€æ¦‚å¿µ
        </h3>
        <ul class="category-docs">
          <li><a href="01-Reactç®€ä»‹.html" class="doc-link">Reactç®€ä»‹</a></li><li><a href="02-ç¯å¢ƒæ­å»º.html" class="doc-link">ç¯å¢ƒæ­å»º</a></li><li><a href="03-JSXè¯­æ³•.html" class="doc-link">JSXè¯­æ³•</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ§©</span>
          ç»„ä»¶å¼€å‘
        </h3>
        <ul class="category-docs">
          <li><a href="04-ç»„ä»¶åŸºç¡€.html" class="doc-link">ç»„ä»¶åŸºç¡€</a></li><li><a href="05-Propsä¸State.html" class="doc-link">Propsä¸State</a></li><li><a href="06-äº‹ä»¶å¤„ç†.html" class="doc-link">äº‹ä»¶å¤„ç†</a></li><li><a href="07-æ¡ä»¶æ¸²æŸ“.html" class="doc-link">æ¡ä»¶æ¸²æŸ“</a></li><li><a href="08-åˆ—è¡¨æ¸²æŸ“.html" class="doc-link">åˆ—è¡¨æ¸²æŸ“</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ£</span>
          Hooks API
        </h3>
        <ul class="category-docs">
          <li><a href="09-Hooksæ¦‚è¿°.html" class="doc-link">Hooksæ¦‚è¿°</a></li><li><a href="10-useState.html" class="doc-link">useState</a></li><li><a href="11-useEffect.html" class="doc-link">useEffect</a></li><li><a href="12-useContext.html" class="doc-link">useContext</a></li><li><a href="13-useReducer.html" class="doc-link">useReducer</a></li><li><a href="14-useMemoå’ŒuseCallback.html" class="doc-link">useMemoå’ŒuseCallback</a></li><li><a href="15-useRef.html" class="doc-link">useRef</a></li><li><a href="16-è‡ªå®šä¹‰Hooks.html" class="doc-link">è‡ªå®šä¹‰Hooks</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ”„</span>
          ç”Ÿå‘½å‘¨æœŸ
        </h3>
        <ul class="category-docs">
          <li><a href="17-ç”Ÿå‘½å‘¨æœŸæ–¹æ³•.html" class="doc-link">ç”Ÿå‘½å‘¨æœŸæ–¹æ³•</a></li><li><a href="18-å‰¯ä½œç”¨å¤„ç†.html" class="doc-link">å‰¯ä½œç”¨å¤„ç†</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ¨</span>
          æ ·å¼ä¸UI
        </h3>
        <ul class="category-docs">
          <li><a href="19-æ ·å¼å¤„ç†.html" class="doc-link">æ ·å¼å¤„ç†</a></li><li><a href="20-åŠ¨ç”»æ•ˆæœ.html" class="doc-link">åŠ¨ç”»æ•ˆæœ</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ—ºï¸</span>
          è·¯ç”±ç®¡ç†
        </h3>
        <ul class="category-docs">
          <li><a href="21-React-Router.html" class="doc-link">React-Router</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ“¦</span>
          çŠ¶æ€ç®¡ç†
        </h3>
        <ul class="category-docs">
          <li><a href="22-Context-API.html" class="doc-link">Context-API</a></li><li><a href="23-Reduxé›†æˆ.html" class="doc-link">Reduxé›†æˆ</a></li><li><a href="24-ZustandçŠ¶æ€ç®¡ç†.html" class="doc-link">ZustandçŠ¶æ€ç®¡ç†</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸš€</span>
          æ€§èƒ½ä¼˜åŒ–
        </h3>
        <ul class="category-docs">
          <li><a href="25-æ€§èƒ½ä¼˜åŒ–æŠ€å·§.html" class="doc-link">æ€§èƒ½ä¼˜åŒ–æŠ€å·§</a></li><li><a href="26-ä»£ç åˆ†å‰².html" class="doc-link">ä»£ç åˆ†å‰²</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ§ª</span>
          æµ‹è¯•
        </h3>
        <ul class="category-docs">
          <li><a href="27-å•å…ƒæµ‹è¯•.html" class="doc-link">å•å…ƒæµ‹è¯•</a></li><li><a href="28-é›†æˆæµ‹è¯•.html" class="doc-link">é›†æˆæµ‹è¯•</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ—ï¸</span>
          æ„å»ºä¸éƒ¨ç½²
        </h3>
        <ul class="category-docs">
          <li><a href="29-é¡¹ç›®æ„å»º.html" class="doc-link">é¡¹ç›®æ„å»º</a></li><li><a href="30-ç”Ÿäº§éƒ¨ç½².html" class="doc-link">ç”Ÿäº§éƒ¨ç½²</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ› ï¸</span>
          å¼€å‘å·¥å…·
        </h3>
        <ul class="category-docs">
          <li><a href="31-å¼€å‘è€…å·¥å…·.html" class="doc-link">å¼€å‘è€…å·¥å…·</a></li><li><a href="32-è°ƒè¯•æŠ€å·§.html" class="doc-link">è°ƒè¯•æŠ€å·§</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ“–</span>
          APIå‚è€ƒ
        </h3>
        <ul class="category-docs">
          <li><a href="33-React-APIå®Œæ•´å‚è€ƒ.html" class="doc-link">React-APIå®Œæ•´å‚è€ƒ</a></li><li><a href="34-DOMå…ƒç´ å±æ€§.html" class="doc-link">DOMå…ƒç´ å±æ€§</a></li><li><a href="35-åˆæˆäº‹ä»¶.html" class="doc-link">åˆæˆäº‹ä»¶</a></li><li><a href="React-Hookså®Œæ•´å‚è€ƒ.html" class="doc-link">React-Hookså®Œæ•´å‚è€ƒ</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ’¡</span>
          æœ€ä½³å®è·µ
        </h3>
        <ul class="category-docs">
          <li><a href="36-ç¼–ç è§„èŒƒ.html" class="doc-link">ç¼–ç è§„èŒƒ</a></li><li><a href="37-é¡¹ç›®æ¶æ„.html" class="doc-link">é¡¹ç›®æ¶æ„</a></li><li><a href="38-å¸¸è§é—®é¢˜.html" class="doc-link">å¸¸è§é—®é¢˜</a></li>
        </ul>
      </div>
          </nav>
        </div>
      </aside>

      <!-- ä¸»å†…å®¹åŒº -->
      <main class="content">
        <article class="doc-article">
          <div class="doc-header">
            <div class="breadcrumb">
              <a href="index.html">é¦–é¡µ</a>
              <span class="separator">></span>
              <span class="current">æ€§èƒ½ä¼˜åŒ–æŠ€å·§</span>
            </div>
            <h1 class="doc-title">æ€§èƒ½ä¼˜åŒ–æŠ€å·§</h1>
            <div class="doc-meta">
              <span class="category" style="background: #d299c2">
                ğŸš€ æ€§èƒ½ä¼˜åŒ–
              </span>
            </div>
          </div>
          
          <div class="doc-content">
            <h1>25-æ€§èƒ½ä¼˜åŒ–æŠ€å·§</h1>
<p>Reactåº”ç”¨çš„æ€§èƒ½ä¼˜åŒ–æ˜¯æ„å»ºé«˜è´¨é‡ç”¨æˆ·ç•Œé¢çš„å…³é”®ã€‚æœ¬æ–‡å°†ä»‹ç»Reactä¸­å„ç§æ€§èƒ½ä¼˜åŒ–æŠ€å·§å’Œæœ€ä½³å®è·µã€‚</p>
<h2>React.memo</h2>
<h3>åŸºç¡€ä½¿ç”¨</h3>
<pre><code class="language-jsx">// é¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“
const ExpensiveComponent = React.memo(({ data, config }) =&gt; {
  console.log(&#39;ExpensiveComponent rendered&#39;);
  return (
    &lt;div&gt;
      &lt;h3&gt;{data.title}&lt;/h3&gt;
      &lt;p&gt;é…ç½®: {config.theme}&lt;/p&gt;
    &lt;/div&gt;
  );
});

// ä½¿ç”¨
function ParentComponent() {
  const [count, setCount] = useState(0);
  const [data] = useState({ title: &#39;ä¸å˜çš„æ•°æ®&#39; });
  const [config] = useState({ theme: &#39;dark&#39; });

  return (
    &lt;div&gt;
      &lt;button onClick={() =&gt; setCount(count + 1)}&gt;
        è®¡æ•°: {count}
      &lt;/button&gt;
      {/* ExpensiveComponentä¸ä¼šå› ä¸ºcountå˜åŒ–è€Œé‡æ¸²æŸ“ */}
      &lt;ExpensiveComponent data={data} config={config} /&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<h3>è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°</h3>
<pre><code class="language-jsx">const UserCard = React.memo(({ user, settings }) =&gt; {
  return (
    &lt;div&gt;
      &lt;h3&gt;{user.name}&lt;/h3&gt;
      &lt;p&gt;ä¸»é¢˜: {settings.theme}&lt;/p&gt;
    &lt;/div&gt;
  );
}, (prevProps, nextProps) =&gt; {
  // è‡ªå®šä¹‰æ¯”è¾ƒé€»è¾‘
  return (
    prevProps.user.id === nextProps.user.id &amp;&amp;
    prevProps.user.name === nextProps.user.name &amp;&amp;
    prevProps.settings.theme === nextProps.settings.theme
  );
});
</code></pre>
<h2>useMemoå’ŒuseCallback</h2>
<h3>useMemoä¼˜åŒ–è®¡ç®—</h3>
<pre><code class="language-jsx">function ExpensiveCalculation({ items, filter }) {
  // âŒ æ¯æ¬¡æ¸²æŸ“éƒ½ä¼šé‡æ–°è®¡ç®—
  const filteredItems = items.filter(item =&gt; 
    item.category === filter.category
  );

  // âœ… åªæœ‰ä¾èµ–é¡¹å˜åŒ–æ—¶æ‰é‡æ–°è®¡ç®—
  const memoizedFilteredItems = useMemo(() =&gt; {
    console.log(&#39;é‡æ–°è®¡ç®—è¿‡æ»¤ç»“æœ&#39;);
    return items.filter(item =&gt; item.category === filter.category);
  }, [items, filter.category]);

  return (
    &lt;ul&gt;
      {memoizedFilteredItems.map(item =&gt; (
        &lt;li key={item.id}&gt;{item.name}&lt;/li&gt;
      ))}
    &lt;/ul&gt;
  );
}
</code></pre>
<h3>useCallbackä¼˜åŒ–å‡½æ•°</h3>
<pre><code class="language-jsx">function TodoList({ todos, onToggle, onDelete }) {
  // âŒ æ¯æ¬¡æ¸²æŸ“éƒ½åˆ›å»ºæ–°çš„å‡½æ•°
  const handleToggle = (id) =&gt; {
    onToggle(id);
  };

  // âœ… ç¼“å­˜å‡½æ•°å¼•ç”¨
  const memoizedHandleToggle = useCallback((id) =&gt; {
    onToggle(id);
  }, [onToggle]);

  return (
    &lt;div&gt;
      {todos.map(todo =&gt; (
        &lt;TodoItem
          key={todo.id}
          todo={todo}
          onToggle={memoizedHandleToggle}
          onDelete={onDelete}
        /&gt;
      ))}
    &lt;/div&gt;
  );
}

const TodoItem = React.memo(({ todo, onToggle, onDelete }) =&gt; {
  return (
    &lt;div&gt;
      &lt;span onClick={() =&gt; onToggle(todo.id)}&gt;
        {todo.text}
      &lt;/span&gt;
      &lt;button onClick={() =&gt; onDelete(todo.id)}&gt;åˆ é™¤&lt;/button&gt;
    &lt;/div&gt;
  );
});
</code></pre>
<h2>è™šæ‹ŸåŒ–é•¿åˆ—è¡¨</h2>
<h3>react-windowå®ç°</h3>
<pre><code class="language-jsx">import { FixedSizeList as List } from &#39;react-window&#39;;

function VirtualizedList({ items }) {
  const Row = ({ index, style }) =&gt; (
    &lt;div style={style}&gt;
      &lt;div className=&quot;list-item&quot;&gt;
        {items[index].name}
      &lt;/div&gt;
    &lt;/div&gt;
  );

  return (
    &lt;List
      height={400}
      itemCount={items.length}
      itemSize={50}
      width=&quot;100%&quot;
    &gt;
      {Row}
    &lt;/List&gt;
  );
}

// åŠ¨æ€é«˜åº¦åˆ—è¡¨
import { VariableSizeList } from &#39;react-window&#39;;

function DynamicList({ items }) {
  const getItemSize = (index) =&gt; {
    // æ ¹æ®å†…å®¹è¿”å›ä¸åŒé«˜åº¦
    return items[index].content.length &gt; 100 ? 120 : 80;
  };

  const Row = ({ index, style }) =&gt; (
    &lt;div style={style}&gt;
      &lt;div className=&quot;dynamic-item&quot;&gt;
        &lt;h4&gt;{items[index].title}&lt;/h4&gt;
        &lt;p&gt;{items[index].content}&lt;/p&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );

  return (
    &lt;VariableSizeList
      height={400}
      itemCount={items.length}
      itemSize={getItemSize}
      width=&quot;100%&quot;
    &gt;
      {Row}
    &lt;/VariableSizeList&gt;
  );
}
</code></pre>
<h2>ä»£ç åˆ†å‰²</h2>
<h3>è·¯ç”±çº§åˆ†å‰²</h3>
<pre><code class="language-jsx">import { lazy, Suspense } from &#39;react&#39;;
import { BrowserRouter, Routes, Route } from &#39;react-router-dom&#39;;

// æ‡’åŠ è½½ç»„ä»¶
const Home = lazy(() =&gt; import(&#39;./pages/Home&#39;));
const About = lazy(() =&gt; import(&#39;./pages/About&#39;));
const Contact = lazy(() =&gt; import(&#39;./pages/Contact&#39;));

function App() {
  return (
    &lt;BrowserRouter&gt;
      &lt;Suspense fallback={&lt;div&gt;åŠ è½½ä¸­...&lt;/div&gt;}&gt;
        &lt;Routes&gt;
          &lt;Route path=&quot;/&quot; element={&lt;Home /&gt;} /&gt;
          &lt;Route path=&quot;/about&quot; element={&lt;About /&gt;} /&gt;
          &lt;Route path=&quot;/contact&quot; element={&lt;Contact /&gt;} /&gt;
        &lt;/Routes&gt;
      &lt;/Suspense&gt;
    &lt;/BrowserRouter&gt;
  );
}
</code></pre>
<h3>ç»„ä»¶çº§åˆ†å‰²</h3>
<pre><code class="language-jsx">import { useState, lazy, Suspense } from &#39;react&#39;;

const HeavyComponent = lazy(() =&gt; import(&#39;./HeavyComponent&#39;));

function ConditionalLoading() {
  const [showHeavy, setShowHeavy] = useState(false);

  return (
    &lt;div&gt;
      &lt;button onClick={() =&gt; setShowHeavy(true)}&gt;
        åŠ è½½é‡å‹ç»„ä»¶
      &lt;/button&gt;
      
      {showHeavy &amp;&amp; (
        &lt;Suspense fallback={&lt;div&gt;åŠ è½½é‡å‹ç»„ä»¶ä¸­...&lt;/div&gt;}&gt;
          &lt;HeavyComponent /&gt;
        &lt;/Suspense&gt;
      )}
    &lt;/div&gt;
  );
}
</code></pre>
<h2>å›¾ç‰‡ä¼˜åŒ–</h2>
<h3>æ‡’åŠ è½½å›¾ç‰‡</h3>
<pre><code class="language-jsx">import { useState, useRef, useEffect } from &#39;react&#39;;

function LazyImage({ src, alt, placeholder, ...props }) {
  const [isLoaded, setIsLoaded] = useState(false);
  const [isInView, setIsInView] = useState(false);
  const imgRef = useRef();

  useEffect(() =&gt; {
    const observer = new IntersectionObserver(
      ([entry]) =&gt; {
        if (entry.isIntersecting) {
          setIsInView(true);
          observer.disconnect();
        }
      },
      { threshold: 0.1 }
    );

    if (imgRef.current) {
      observer.observe(imgRef.current);
    }

    return () =&gt; observer.disconnect();
  }, []);

  return (
    &lt;div ref={imgRef} {...props}&gt;
      {isInView &amp;&amp; (
        &lt;img
          src={src}
          alt={alt}
          onLoad={() =&gt; setIsLoaded(true)}
          style={{
            opacity: isLoaded ? 1 : 0,
            transition: &#39;opacity 0.3s&#39;
          }}
        /&gt;
      )}
      {!isLoaded &amp;&amp; isInView &amp;&amp; (
        &lt;div className=&quot;image-placeholder&quot;&gt;
          {placeholder || &#39;åŠ è½½ä¸­...&#39;}
        &lt;/div&gt;
      )}
    &lt;/div&gt;
  );
}
</code></pre>
<h3>å“åº”å¼å›¾ç‰‡</h3>
<pre><code class="language-jsx">function ResponsiveImage({ src, alt, sizes = [] }) {
  const generateSrcSet = () =&gt; {
    return sizes
      .map(size =&gt; `${src}?w=${size.width} ${size.width}w`)
      .join(&#39;, &#39;);
  };

  return (
    &lt;img
      src={src}
      srcSet={generateSrcSet()}
      sizes=&quot;(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw&quot;
      alt={alt}
      loading=&quot;lazy&quot;
    /&gt;
  );
}
</code></pre>
<h2>çŠ¶æ€ç®¡ç†ä¼˜åŒ–</h2>
<h3>çŠ¶æ€ç»“æ„ä¼˜åŒ–</h3>
<pre><code class="language-jsx">// âŒ ä¸å¥½çš„çŠ¶æ€ç»“æ„
function BadComponent() {
  const [state, setState] = useState({
    user: { name: &#39;&#39;, email: &#39;&#39; },
    posts: [],
    comments: [],
    ui: { loading: false, error: null }
  });

  // ä»»ä½•çŠ¶æ€å˜åŒ–éƒ½ä¼šå¯¼è‡´æ•´ä¸ªå¯¹è±¡é‡æ–°åˆ›å»º
  const updateUser = (userData) =&gt; {
    setState(prev =&gt; ({
      ...prev,
      user: { ...prev.user, ...userData }
    }));
  };
}

// âœ… åˆ†ç¦»çŠ¶æ€
function GoodComponent() {
  const [user, setUser] = useState({ name: &#39;&#39;, email: &#39;&#39; });
  const [posts, setPosts] = useState([]);
  const [comments, setComments] = useState([]);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);

  const updateUser = useCallback((userData) =&gt; {
    setUser(prev =&gt; ({ ...prev, ...userData }));
  }, []);
}
</code></pre>
<h3>useReducerä¼˜åŒ–å¤æ‚çŠ¶æ€</h3>
<pre><code class="language-jsx">function stateReducer(state, action) {
  switch (action.type) {
    case &#39;SET_LOADING&#39;:
      return { ...state, loading: action.payload };
    case &#39;SET_ERROR&#39;:
      return { ...state, error: action.payload, loading: false };
    case &#39;SET_DATA&#39;:
      return { ...state, data: action.payload, loading: false, error: null };
    case &#39;UPDATE_ITEM&#39;:
      return {
        ...state,
        data: state.data.map(item =&gt;
          item.id === action.payload.id
            ? { ...item, ...action.payload.updates }
            : item
        )
      };
    default:
      return state;
  }
}

function OptimizedComponent() {
  const [state, dispatch] = useReducer(stateReducer, {
    data: [],
    loading: false,
    error: null
  });

  const updateItem = useCallback((id, updates) =&gt; {
    dispatch({ type: &#39;UPDATE_ITEM&#39;, payload: { id, updates } });
  }, []);

  return (
    &lt;div&gt;
      {state.loading &amp;&amp; &lt;div&gt;åŠ è½½ä¸­...&lt;/div&gt;}
      {state.error &amp;&amp; &lt;div&gt;é”™è¯¯: {state.error}&lt;/div&gt;}
      {state.data.map(item =&gt; (
        &lt;Item key={item.id} item={item} onUpdate={updateItem} /&gt;
      ))}
    &lt;/div&gt;
  );
}
</code></pre>
<h2>é¿å…ä¸å¿…è¦çš„æ¸²æŸ“</h2>
<h3>ç¨³å®šçš„å¼•ç”¨</h3>
<pre><code class="language-jsx">// âŒ æ¯æ¬¡æ¸²æŸ“éƒ½åˆ›å»ºæ–°å¯¹è±¡
function BadParent() {
  const [count, setCount] = useState(0);

  return (
    &lt;ChildComponent
      config={{ theme: &#39;dark&#39;, size: &#39;large&#39; }} // æ–°å¯¹è±¡
      onClick={() =&gt; console.log(&#39;clicked&#39;)} // æ–°å‡½æ•°
    /&gt;
  );
}

// âœ… ç¨³å®šçš„å¼•ç”¨
function GoodParent() {
  const [count, setCount] = useState(0);

  const config = useMemo(() =&gt; ({
    theme: &#39;dark&#39;,
    size: &#39;large&#39;
  }), []); // ç¨³å®šçš„å¯¹è±¡

  const handleClick = useCallback(() =&gt; {
    console.log(&#39;clicked&#39;);
  }, []); // ç¨³å®šçš„å‡½æ•°

  return (
    &lt;ChildComponent config={config} onClick={handleClick} /&gt;
  );
}
</code></pre>
<h3>æ¡ä»¶æ¸²æŸ“ä¼˜åŒ–</h3>
<pre><code class="language-jsx">// âŒ æ¯æ¬¡éƒ½åˆ›å»ºç»„ä»¶å®ä¾‹
function BadConditional({ showExpensive, data }) {
  return (
    &lt;div&gt;
      {showExpensive ? &lt;ExpensiveComponent data={data} /&gt; : null}
    &lt;/div&gt;
  );
}

// âœ… ä½¿ç”¨keyé‡ç½®ç»„ä»¶çŠ¶æ€
function GoodConditional({ showExpensive, data }) {
  return (
    &lt;div&gt;
      {showExpensive &amp;&amp; (
        &lt;ExpensiveComponent 
          key={data.id} // æ•°æ®å˜åŒ–æ—¶é‡ç½®ç»„ä»¶
          data={data} 
        /&gt;
      )}
    &lt;/div&gt;
  );
}
</code></pre>
<h2>æ€§èƒ½ç›‘æ§</h2>
<h3>React DevTools Profiler</h3>
<pre><code class="language-jsx">import { Profiler } from &#39;react&#39;;

function onRenderCallback(id, phase, actualDuration, baseDuration, startTime, commitTime) {
  console.log(&#39;Profiler:&#39;, {
    id,
    phase, // &#39;mount&#39; æˆ– &#39;update&#39;
    actualDuration, // å®é™…æ¸²æŸ“æ—¶é—´
    baseDuration, // é¢„ä¼°æ¸²æŸ“æ—¶é—´
    startTime,
    commitTime
  });
}

function App() {
  return (
    &lt;Profiler id=&quot;App&quot; onRender={onRenderCallback}&gt;
      &lt;Header /&gt;
      &lt;Main /&gt;
      &lt;Footer /&gt;
    &lt;/Profiler&gt;
  );
}
</code></pre>
<h3>è‡ªå®šä¹‰æ€§èƒ½Hook</h3>
<pre><code class="language-jsx">function usePerformanceMonitor(componentName) {
  const renderCountRef = useRef(0);
  const startTimeRef = useRef();

  useEffect(() =&gt; {
    renderCountRef.current += 1;
  });

  useLayoutEffect(() =&gt; {
    startTimeRef.current = performance.now();
  });

  useEffect(() =&gt; {
    const endTime = performance.now();
    const renderTime = endTime - startTimeRef.current;
    
    console.log(`${componentName} - æ¸²æŸ“ #${renderCountRef.current}, è€—æ—¶: ${renderTime.toFixed(2)}ms`);
  });

  return renderCountRef.current;
}

function MonitoredComponent() {
  const renderCount = usePerformanceMonitor(&#39;MonitoredComponent&#39;);
  
  return &lt;div&gt;æ¸²æŸ“æ¬¡æ•°: {renderCount}&lt;/div&gt;;
}
</code></pre>
<h2>Bundleåˆ†æ</h2>
<h3>webpack-bundle-analyzer</h3>
<pre><code class="language-bash"># å®‰è£…åˆ†æå·¥å…·
npm install --save-dev webpack-bundle-analyzer

# ç”Ÿæˆåˆ†ææŠ¥å‘Š
npm run build
npx webpack-bundle-analyzer build/static/js/*.js
</code></pre>
<h3>åˆ†æç»“æœä¼˜åŒ–</h3>
<pre><code class="language-jsx">// æŒ‰éœ€å¯¼å…¥
// âŒ å¯¼å…¥æ•´ä¸ªåº“
import _ from &#39;lodash&#39;;
import * as utils from &#39;./utils&#39;;

// âœ… æŒ‰éœ€å¯¼å…¥
import { debounce } from &#39;lodash&#39;;
import { formatDate } from &#39;./utils&#39;;

// Tree shakingä¼˜åŒ–
// âŒ å¯¼å…¥æœªä½¿ç”¨çš„ä»£ç 
import { Button, Modal, Tooltip, Dropdown } from &#39;antd&#39;;

// âœ… åªå¯¼å…¥éœ€è¦çš„ç»„ä»¶
import Button from &#39;antd/es/button&#39;;
import Modal from &#39;antd/es/modal&#39;;
</code></pre>
<h2>ç½‘ç»œä¼˜åŒ–</h2>
<h3>é¢„åŠ è½½ç­–ç•¥</h3>
<pre><code class="language-jsx">function usePreload() {
  const preloadRoute = useCallback((routePath) =&gt; {
    const link = document.createElement(&#39;link&#39;);
    link.rel = &#39;prefetch&#39;;
    link.href = routePath;
    document.head.appendChild(link);
  }, []);

  const preloadImage = useCallback((src) =&gt; {
    const img = new Image();
    img.src = src;
  }, []);

  return { preloadRoute, preloadImage };
}

function NavigationMenu() {
  const { preloadRoute } = usePreload();

  return (
    &lt;nav&gt;
      &lt;Link 
        to=&quot;/about&quot;
        onMouseEnter={() =&gt; preloadRoute(&#39;/about&#39;)}
      &gt;
        å…³äºæˆ‘ä»¬
      &lt;/Link&gt;
    &lt;/nav&gt;
  );
}
</code></pre>
<h3>ç¼“å­˜ç­–ç•¥</h3>
<pre><code class="language-jsx">// ç®€å•ç¼“å­˜Hook
function useCache(key, fetcher, options = {}) {
  const { ttl = 5 * 60 * 1000 } = options; // 5åˆ†é’ŸTTL
  const [data, setData] = useState(null);
  const [loading, setLoading] = useState(false);

  useEffect(() =&gt; {
    const cachedData = localStorage.getItem(key);
    
    if (cachedData) {
      const { data: cached, timestamp } = JSON.parse(cachedData);
      
      if (Date.now() - timestamp &lt; ttl) {
        setData(cached);
        return;
      }
    }

    setLoading(true);
    fetcher()
      .then(result =&gt; {
        setData(result);
        localStorage.setItem(key, JSON.stringify({
          data: result,
          timestamp: Date.now()
        }));
      })
      .finally(() =&gt; setLoading(false));
  }, [key, fetcher, ttl]);

  return { data, loading };
}
</code></pre>
<h2>æœ€ä½³å®è·µæ€»ç»“</h2>
<h3>æ€§èƒ½ä¼˜åŒ–æ¸…å•</h3>
<pre><code class="language-jsx">// 1. ç»„ä»¶ä¼˜åŒ–
const OptimizedComponent = React.memo(({ data }) =&gt; {
  // 2. è®¡ç®—ä¼˜åŒ–
  const expensiveValue = useMemo(() =&gt; {
    return heavyCalculation(data);
  }, [data]);

  // 3. å‡½æ•°ä¼˜åŒ–
  const handleClick = useCallback(() =&gt; {
    // å¤„ç†ç‚¹å‡»
  }, []);

  // 4. é¿å…å†…è”å¯¹è±¡
  const style = useMemo(() =&gt; ({
    color: &#39;blue&#39;,
    fontSize: &#39;16px&#39;
  }), []);

  return (
    &lt;div style={style}&gt;
      {expensiveValue}
    &lt;/div&gt;
  );
});

// 5. åˆ—è¡¨ä¼˜åŒ–
function OptimizedList({ items }) {
  return (
    &lt;div&gt;
      {items.map(item =&gt; (
        &lt;OptimizedItem 
          key={item.id} // ç¨³å®šçš„key
          item={item} 
        /&gt;
      ))}
    &lt;/div&gt;
  );
}
</code></pre>
<h3>æ€§èƒ½é—®é¢˜æ’æŸ¥æ­¥éª¤</h3>
<ol>
<li><strong>ä½¿ç”¨React DevTools Profiler</strong></li>
<li><strong>æ£€æŸ¥ä¸å¿…è¦çš„é‡æ¸²æŸ“</strong></li>
<li><strong>åˆ†æBundleå¤§å°</strong></li>
<li><strong>ä¼˜åŒ–ç½‘ç»œè¯·æ±‚</strong></li>
<li><strong>å®æ–½ä»£ç åˆ†å‰²</strong></li>
<li><strong>ç›‘æ§æ€§èƒ½æŒ‡æ ‡</strong></li>
</ol>
<p>Reactæ€§èƒ½ä¼˜åŒ–æ˜¯ä¸€ä¸ªæŒç»­çš„è¿‡ç¨‹ï¼Œéœ€è¦æ ¹æ®å…·ä½“åº”ç”¨åœºæ™¯é€‰æ‹©åˆé€‚çš„ä¼˜åŒ–ç­–ç•¥ã€‚å…³é”®æ˜¯è¦æµ‹é‡å’Œç›‘æ§æ€§èƒ½ï¼Œé¿å…è¿‡æ—©ä¼˜åŒ–ã€‚ </p>

          </div>

          <!-- æ–‡æ¡£å¯¼èˆª -->
          <div class="doc-navigation">
            
              <a href="24-ZustandçŠ¶æ€ç®¡ç†.html" class="nav-btn prev-btn">
                <span class="nav-icon">â†</span>
                <div class="nav-text">
                  <span class="nav-label">ä¸Šä¸€ç¯‡</span>
                  <span class="nav-title">ZustandçŠ¶æ€ç®¡ç†</span>
                </div>
              </a>
            
            
            
              <a href="26-ä»£ç åˆ†å‰².html" class="nav-btn next-btn">
                <div class="nav-text">
                  <span class="nav-label">ä¸‹ä¸€ç¯‡</span>
                  <span class="nav-title">ä»£ç åˆ†å‰²</span>
                </div>
                <span class="nav-icon">â†’</span>
              </a>
            
          </div>
        </article>
      </main>
    </div>

    <!-- è¿”å›é¡¶éƒ¨æŒ‰é’® -->
    <button class="back-to-top" id="backToTop" onclick="scrollToTop()">
      <span>â†‘</span>
    </button>

    <!-- åº•éƒ¨ -->
    <footer class="footer">
      <div class="footer-content">
        <p>&copy; 2024 React ä¸­æ–‡æ–‡æ¡£. åŸºäº React 18.x æ„å»º</p>
        <p>Made with â¤ï¸ by Reactä¸­æ–‡ç¤¾åŒº</p>
      </div>
    </footer>
  </div>

  <script src="assets/script.js"></script>
</body>
</html>