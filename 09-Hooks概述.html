<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Hooks概述 - React 中文文档</title>
  <meta name="description" content="从入门到精通，全面掌握React开发技能">
  <link rel="stylesheet" href="assets/style.css">
  <link rel="stylesheet" href="assets/highlight.css">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>⚛️</text></svg>">
</head>
<body>
  <div class="container">
    <!-- 顶部导航 -->
    <header class="header">
      <div class="header-content">
        <div class="logo">
          <span class="logo-icon">⚛️</span>
          <div class="logo-text">
            <h1>React 中文文档</h1>
            <p>现代化的React学习指南</p>
          </div>
        </div>
        <nav class="header-nav">
          <a href="index.html" class="nav-link">首页</a>
          <a href="#" class="nav-link" onclick="toggleSidebar()">目录</a>
          <a href="https://github.com/facebook/react" target="_blank" class="nav-link">GitHub</a>
        </nav>
      </div>
    </header>

    <div class="main-layout">
      <!-- 侧边栏 -->
      <aside class="sidebar" id="sidebar">
        <div class="sidebar-content">
          <div class="search-box">
            <input type="text" placeholder="搜索文档..." id="searchInput" onkeyup="searchDocs()">
            <span class="search-icon">🔍</span>
          </div>
          <nav class="doc-nav">
            
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">📚</span>
          基础概念
        </h3>
        <ul class="category-docs">
          <li><a href="01-React简介.html" class="doc-link">React简介</a></li><li><a href="02-环境搭建.html" class="doc-link">环境搭建</a></li><li><a href="03-JSX语法.html" class="doc-link">JSX语法</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">🧩</span>
          组件开发
        </h3>
        <ul class="category-docs">
          <li><a href="04-组件基础.html" class="doc-link">组件基础</a></li><li><a href="05-Props与State.html" class="doc-link">Props与State</a></li><li><a href="06-事件处理.html" class="doc-link">事件处理</a></li><li><a href="07-条件渲染.html" class="doc-link">条件渲染</a></li><li><a href="08-列表渲染.html" class="doc-link">列表渲染</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">🎣</span>
          Hooks API
        </h3>
        <ul class="category-docs">
          <li><a href="09-Hooks概述.html" class="doc-link">Hooks概述</a></li><li><a href="10-useState.html" class="doc-link">useState</a></li><li><a href="11-useEffect.html" class="doc-link">useEffect</a></li><li><a href="12-useContext.html" class="doc-link">useContext</a></li><li><a href="13-useReducer.html" class="doc-link">useReducer</a></li><li><a href="14-useMemo和useCallback.html" class="doc-link">useMemo和useCallback</a></li><li><a href="15-useRef.html" class="doc-link">useRef</a></li><li><a href="16-自定义Hooks.html" class="doc-link">自定义Hooks</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">🔄</span>
          生命周期
        </h3>
        <ul class="category-docs">
          <li><a href="17-生命周期方法.html" class="doc-link">生命周期方法</a></li><li><a href="18-副作用处理.html" class="doc-link">副作用处理</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">🎨</span>
          样式与UI
        </h3>
        <ul class="category-docs">
          <li><a href="19-样式处理.html" class="doc-link">样式处理</a></li><li><a href="20-动画效果.html" class="doc-link">动画效果</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">🗺️</span>
          路由管理
        </h3>
        <ul class="category-docs">
          <li><a href="21-React-Router.html" class="doc-link">React-Router</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">📦</span>
          状态管理
        </h3>
        <ul class="category-docs">
          <li><a href="22-Context-API.html" class="doc-link">Context-API</a></li><li><a href="23-Redux集成.html" class="doc-link">Redux集成</a></li><li><a href="24-Zustand状态管理.html" class="doc-link">Zustand状态管理</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">🚀</span>
          性能优化
        </h3>
        <ul class="category-docs">
          <li><a href="25-性能优化技巧.html" class="doc-link">性能优化技巧</a></li><li><a href="26-代码分割.html" class="doc-link">代码分割</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">🧪</span>
          测试
        </h3>
        <ul class="category-docs">
          <li><a href="27-单元测试.html" class="doc-link">单元测试</a></li><li><a href="28-集成测试.html" class="doc-link">集成测试</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">🏗️</span>
          构建与部署
        </h3>
        <ul class="category-docs">
          <li><a href="29-项目构建.html" class="doc-link">项目构建</a></li><li><a href="30-生产部署.html" class="doc-link">生产部署</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">🛠️</span>
          开发工具
        </h3>
        <ul class="category-docs">
          <li><a href="31-开发者工具.html" class="doc-link">开发者工具</a></li><li><a href="32-调试技巧.html" class="doc-link">调试技巧</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">📖</span>
          API参考
        </h3>
        <ul class="category-docs">
          <li><a href="33-React-API完整参考.html" class="doc-link">React-API完整参考</a></li><li><a href="34-DOM元素属性.html" class="doc-link">DOM元素属性</a></li><li><a href="35-合成事件.html" class="doc-link">合成事件</a></li><li><a href="React-Hooks完整参考.html" class="doc-link">React-Hooks完整参考</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">💡</span>
          最佳实践
        </h3>
        <ul class="category-docs">
          <li><a href="36-编码规范.html" class="doc-link">编码规范</a></li><li><a href="37-项目架构.html" class="doc-link">项目架构</a></li><li><a href="38-常见问题.html" class="doc-link">常见问题</a></li>
        </ul>
      </div>
          </nav>
        </div>
      </aside>

      <!-- 主内容区 -->
      <main class="content">
        <article class="doc-article">
          <div class="doc-header">
            <div class="breadcrumb">
              <a href="index.html">首页</a>
              <span class="separator">></span>
              <span class="current">Hooks概述</span>
            </div>
            <h1 class="doc-title">Hooks概述</h1>
            <div class="doc-meta">
              <span class="category" style="background: #4facfe">
                🎣 Hooks API
              </span>
            </div>
          </div>
          
          <div class="doc-content">
            <h1>React Hooks 概述</h1>
<h2>什么是 Hooks？</h2>
<p>Hooks 是 React 16.8 引入的新特性，它让你在不编写 class 的情况下使用 state 以及其他的 React 特性。Hooks 是一些可以让你在函数组件里&quot;钩入&quot; React state 及生命周期等特性的函数。</p>
<h2>Hooks 规则</h2>
<h3>1. 只在最顶层使用 Hook</h3>
<pre><code class="language-javascript">// ❌ 错误：在条件语句中使用Hook
function Component({ condition }) {
  if (condition) {
    const [count, setCount] = useState(0); // 错误！
  }
  
  // ❌ 错误：在循环中使用Hook
  for (let i = 0; i &lt; 10; i++) {
    const [value, setValue] = useState(i); // 错误！
  }
  
  return &lt;div&gt;Content&lt;/div&gt;;
}

// ✅ 正确：在顶层使用Hook
function Component({ condition }) {
  const [count, setCount] = useState(0);
  const [isVisible, setIsVisible] = useState(false);
  
  // 条件逻辑放在Hook使用之后
  if (condition) {
    // 使用state
  }
  
  return &lt;div&gt;Content&lt;/div&gt;;
}
</code></pre>
<h3>2. 只在 React 函数中调用 Hook</h3>
<pre><code class="language-javascript">// ❌ 错误：在普通函数中使用Hook
function utilityFunction() {
  const [value, setValue] = useState(0); // 错误！
  return value;
}

// ✅ 正确：在React组件中使用Hook
function MyComponent() {
  const [value, setValue] = useState(0); // 正确！
  return &lt;div&gt;{value}&lt;/div&gt;;
}

// ✅ 正确：在自定义Hook中使用Hook
function useCustomHook() {
  const [value, setValue] = useState(0); // 正确！
  return [value, setValue];
}
</code></pre>
<h2>内置 Hooks</h2>
<h3>1. useState - 状态Hook</h3>
<pre><code class="language-javascript">import React, { useState } from &#39;react&#39;;

function Counter() {
  // 声明状态变量
  const [count, setCount] = useState(0);
  const [name, setName] = useState(&#39;&#39;);
  const [user, setUser] = useState({ name: &#39;&#39;, age: 0 });
  
  return (
    &lt;div&gt;
      &lt;p&gt;计数: {count}&lt;/p&gt;
      &lt;button onClick={() =&gt; setCount(count + 1)}&gt;+1&lt;/button&gt;
      &lt;button onClick={() =&gt; setCount(prev =&gt; prev + 1)}&gt;+1 (函数式更新)&lt;/button&gt;
      
      &lt;input 
        value={name} 
        onChange={e =&gt; setName(e.target.value)} 
        placeholder=&quot;输入姓名&quot;
      /&gt;
      
      &lt;button onClick={() =&gt; setUser(prev =&gt; ({ ...prev, age: prev.age + 1 }))}&gt;
        增加年龄
      &lt;/button&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<h3>2. useEffect - 副作用Hook</h3>
<pre><code class="language-javascript">import React, { useState, useEffect } from &#39;react&#39;;

function DataComponent() {
  const [data, setData] = useState(null);
  const [loading, setLoading] = useState(true);
  const [count, setCount] = useState(0);
  
  // 组件挂载时执行一次
  useEffect(() =&gt; {
    fetchData().then(result =&gt; {
      setData(result);
      setLoading(false);
    });
  }, []); // 空依赖数组
  
  // 当count变化时执行
  useEffect(() =&gt; {
    document.title = `计数: ${count}`;
  }, [count]); // count作为依赖
  
  // 每次渲染都执行
  useEffect(() =&gt; {
    console.log(&#39;组件已渲染&#39;);
  }); // 没有依赖数组
  
  // 清理副作用
  useEffect(() =&gt; {
    const timer = setInterval(() =&gt; {
      console.log(&#39;定时器执行&#39;);
    }, 1000);
    
    // 清理函数
    return () =&gt; {
      clearInterval(timer);
    };
  }, []);
  
  if (loading) return &lt;div&gt;加载中...&lt;/div&gt;;
  
  return (
    &lt;div&gt;
      &lt;div&gt;数据: {JSON.stringify(data)}&lt;/div&gt;
      &lt;div&gt;计数: {count}&lt;/div&gt;
      &lt;button onClick={() =&gt; setCount(count + 1)}&gt;+1&lt;/button&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<h3>3. useContext - 上下文Hook</h3>
<pre><code class="language-javascript">import React, { createContext, useContext, useState } from &#39;react&#39;;

// 创建Context
const ThemeContext = createContext();
const UserContext = createContext();

// 提供者组件
function App() {
  const [theme, setTheme] = useState(&#39;light&#39;);
  const [user, setUser] = useState({ name: &#39;Admin&#39; });
  
  return (
    &lt;ThemeContext.Provider value={{ theme, setTheme }}&gt;
      &lt;UserContext.Provider value={{ user, setUser }}&gt;
        &lt;MainComponent /&gt;
      &lt;/UserContext.Provider&gt;
    &lt;/ThemeContext.Provider&gt;
  );
}

// 消费者组件
function MainComponent() {
  const { theme, setTheme } = useContext(ThemeContext);
  const { user, setUser } = useContext(UserContext);
  
  return (
    &lt;div className={`theme-${theme}`}&gt;
      &lt;h1&gt;欢迎, {user.name}!&lt;/h1&gt;
      &lt;button onClick={() =&gt; setTheme(theme === &#39;light&#39; ? &#39;dark&#39; : &#39;light&#39;)}&gt;
        切换主题
      &lt;/button&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<h3>4. useReducer - 复杂状态管理Hook</h3>
<pre><code class="language-javascript">import React, { useReducer } from &#39;react&#39;;

// 定义reducer
function todoReducer(state, action) {
  switch (action.type) {
    case &#39;ADD_TODO&#39;:
      return {
        ...state,
        todos: [...state.todos, {
          id: Date.now(),
          text: action.payload,
          completed: false
        }]
      };
    case &#39;TOGGLE_TODO&#39;:
      return {
        ...state,
        todos: state.todos.map(todo =&gt;
          todo.id === action.payload
            ? { ...todo, completed: !todo.completed }
            : todo
        )
      };
    case &#39;DELETE_TODO&#39;:
      return {
        ...state,
        todos: state.todos.filter(todo =&gt; todo.id !== action.payload)
      };
    default:
      return state;
  }
}

// 初始状态
const initialState = {
  todos: [],
  filter: &#39;all&#39;
};

function TodoApp() {
  const [state, dispatch] = useReducer(todoReducer, initialState);
  const [inputValue, setInputValue] = useState(&#39;&#39;);
  
  const addTodo = () =&gt; {
    if (inputValue.trim()) {
      dispatch({ type: &#39;ADD_TODO&#39;, payload: inputValue });
      setInputValue(&#39;&#39;);
    }
  };
  
  return (
    &lt;div&gt;
      &lt;input 
        value={inputValue}
        onChange={e =&gt; setInputValue(e.target.value)}
        onKeyPress={e =&gt; e.key === &#39;Enter&#39; &amp;&amp; addTodo()}
      /&gt;
      &lt;button onClick={addTodo}&gt;添加&lt;/button&gt;
      
      &lt;ul&gt;
        {state.todos.map(todo =&gt; (
          &lt;li key={todo.id}&gt;
            &lt;input 
              type=&quot;checkbox&quot;
              checked={todo.completed}
              onChange={() =&gt; dispatch({ type: &#39;TOGGLE_TODO&#39;, payload: todo.id })}
            /&gt;
            &lt;span style={{ textDecoration: todo.completed ? &#39;line-through&#39; : &#39;none&#39; }}&gt;
              {todo.text}
            &lt;/span&gt;
            &lt;button onClick={() =&gt; dispatch({ type: &#39;DELETE_TODO&#39;, payload: todo.id })}&gt;
              删除
            &lt;/button&gt;
          &lt;/li&gt;
        ))}
      &lt;/ul&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<h3>5. useMemo - 记忆化值Hook</h3>
<pre><code class="language-javascript">import React, { useState, useMemo } from &#39;react&#39;;

function ExpensiveComponent({ items }) {
  const [count, setCount] = useState(0);
  const [keyword, setKeyword] = useState(&#39;&#39;);
  
  // 记忆化计算结果
  const expensiveValue = useMemo(() =&gt; {
    console.log(&#39;执行昂贵计算&#39;);
    return items.reduce((sum, item) =&gt; sum + item.value, 0);
  }, [items]); // 只有items变化时才重新计算
  
  // 记忆化过滤结果
  const filteredItems = useMemo(() =&gt; {
    console.log(&#39;执行过滤计算&#39;);
    return items.filter(item =&gt; 
      item.name.toLowerCase().includes(keyword.toLowerCase())
    );
  }, [items, keyword]); // items或keyword变化时才重新计算
  
  return (
    &lt;div&gt;
      &lt;div&gt;计数: {count}&lt;/div&gt;
      &lt;button onClick={() =&gt; setCount(count + 1)}&gt;+1&lt;/button&gt;
      
      &lt;div&gt;总值: {expensiveValue}&lt;/div&gt;
      
      &lt;input 
        value={keyword}
        onChange={e =&gt; setKeyword(e.target.value)}
        placeholder=&quot;搜索...&quot;
      /&gt;
      
      &lt;ul&gt;
        {filteredItems.map(item =&gt; (
          &lt;li key={item.id}&gt;{item.name}&lt;/li&gt;
        ))}
      &lt;/ul&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<h3>6. useCallback - 记忆化函数Hook</h3>
<pre><code class="language-javascript">import React, { useState, useCallback, memo } from &#39;react&#39;;

// 子组件
const ChildComponent = memo(({ onButtonClick, children }) =&gt; {
  console.log(&#39;ChildComponent 重新渲染&#39;);
  return (
    &lt;div&gt;
      &lt;button onClick={onButtonClick}&gt;点击我&lt;/button&gt;
      {children}
    &lt;/div&gt;
  );
});

function ParentComponent() {
  const [count, setCount] = useState(0);
  const [name, setName] = useState(&#39;&#39;);
  
  // 没有useCallback - 每次渲染都创建新函数
  const handleClick1 = () =&gt; {
    console.log(&#39;按钮被点击&#39;);
  };
  
  // 使用useCallback - 记忆化函数
  const handleClick2 = useCallback(() =&gt; {
    console.log(&#39;按钮被点击&#39;, count);
  }, [count]); // 只有count变化时才创建新函数
  
  // 带参数的回调
  const handleItemClick = useCallback((id) =&gt; {
    console.log(&#39;点击了项目:&#39;, id);
    // 使用最新的count值
    setCount(prev =&gt; prev + 1);
  }, []); // 空依赖，因为使用了函数式更新
  
  return (
    &lt;div&gt;
      &lt;div&gt;计数: {count}&lt;/div&gt;
      &lt;input 
        value={name}
        onChange={e =&gt; setName(e.target.value)}
        placeholder=&quot;输入姓名&quot;
      /&gt;
      
      {/* 每次都重新渲染 */}
      &lt;ChildComponent onButtonClick={handleClick1}&gt;
        未优化的子组件
      &lt;/ChildComponent&gt;
      
      {/* 只有当handleClick2变化时才重新渲染 */}
      &lt;ChildComponent onButtonClick={handleClick2}&gt;
        优化的子组件
      &lt;/ChildComponent&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<h3>7. useRef - 引用Hook</h3>
<pre><code class="language-javascript">import React, { useRef, useState, useEffect } from &#39;react&#39;;

function RefExample() {
  const inputRef = useRef(null);
  const countRef = useRef(0);
  const [count, setCount] = useState(0);
  const prevCountRef = useRef();
  
  // 存储前一个值
  useEffect(() =&gt; {
    prevCountRef.current = count;
  });
  const prevCount = prevCountRef.current;
  
  // 焦点管理
  const focusInput = () =&gt; {
    inputRef.current.focus();
  };
  
  // 不触发重新渲染的计数器
  const incrementRef = () =&gt; {
    countRef.current += 1;
    console.log(&#39;Ref计数:&#39;, countRef.current);
  };
  
  // 获取DOM尺寸
  const measureElement = () =&gt; {
    const element = inputRef.current;
    console.log(&#39;元素宽度:&#39;, element.offsetWidth);
    console.log(&#39;元素高度:&#39;, element.offsetHeight);
  };
  
  return (
    &lt;div&gt;
      &lt;input ref={inputRef} placeholder=&quot;我可以被聚焦&quot; /&gt;
      &lt;button onClick={focusInput}&gt;聚焦输入框&lt;/button&gt;
      &lt;button onClick={measureElement}&gt;测量元素&lt;/button&gt;
      
      &lt;div&gt;
        &lt;div&gt;当前计数: {count}&lt;/div&gt;
        &lt;div&gt;前一个计数: {prevCount}&lt;/div&gt;
        &lt;button onClick={() =&gt; setCount(count + 1)}&gt;增加State计数&lt;/button&gt;
      &lt;/div&gt;
      
      &lt;div&gt;
        &lt;div&gt;Ref计数: {countRef.current}&lt;/div&gt;
        &lt;button onClick={incrementRef}&gt;增加Ref计数&lt;/button&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<h2>自定义 Hooks</h2>
<h3>1. 基础自定义Hook</h3>
<pre><code class="language-javascript">// useCounter Hook
function useCounter(initialValue = 0) {
  const [count, setCount] = useState(initialValue);
  
  const increment = useCallback(() =&gt; setCount(prev =&gt; prev + 1), []);
  const decrement = useCallback(() =&gt; setCount(prev =&gt; prev - 1), []);
  const reset = useCallback(() =&gt; setCount(initialValue), [initialValue]);
  
  return { count, increment, decrement, reset };
}

// 使用自定义Hook
function CounterComponent() {
  const { count, increment, decrement, reset } = useCounter(10);
  
  return (
    &lt;div&gt;
      &lt;div&gt;计数: {count}&lt;/div&gt;
      &lt;button onClick={increment}&gt;+1&lt;/button&gt;
      &lt;button onClick={decrement}&gt;-1&lt;/button&gt;
      &lt;button onClick={reset}&gt;重置&lt;/button&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<h3>2. 数据获取Hook</h3>
<pre><code class="language-javascript">function useApi(url) {
  const [data, setData] = useState(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);
  
  useEffect(() =&gt; {
    let cancelled = false;
    
    const fetchData = async () =&gt; {
      try {
        setLoading(true);
        setError(null);
        
        const response = await fetch(url);
        if (!response.ok) {
          throw new Error(`HTTP error! status: ${response.status}`);
        }
        
        const result = await response.json();
        
        if (!cancelled) {
          setData(result);
        }
      } catch (err) {
        if (!cancelled) {
          setError(err.message);
        }
      } finally {
        if (!cancelled) {
          setLoading(false);
        }
      }
    };
    
    fetchData();
    
    return () =&gt; {
      cancelled = true;
    };
  }, [url]);
  
  return { data, loading, error };
}

// 使用数据获取Hook
function UserProfile({ userId }) {
  const { data: user, loading, error } = useApi(`/api/users/${userId}`);
  
  if (loading) return &lt;div&gt;加载中...&lt;/div&gt;;
  if (error) return &lt;div&gt;错误: {error}&lt;/div&gt;;
  if (!user) return &lt;div&gt;未找到用户&lt;/div&gt;;
  
  return (
    &lt;div&gt;
      &lt;h1&gt;{user.name}&lt;/h1&gt;
      &lt;p&gt;{user.email}&lt;/p&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<h3>3. 本地存储Hook</h3>
<pre><code class="language-javascript">function useLocalStorage(key, initialValue) {
  // 获取初始值
  const [storedValue, setStoredValue] = useState(() =&gt; {
    try {
      const item = window.localStorage.getItem(key);
      return item ? JSON.parse(item) : initialValue;
    } catch (error) {
      console.error(`Error reading localStorage key &quot;${key}&quot;:`, error);
      return initialValue;
    }
  });
  
  // 设置值的函数
  const setValue = useCallback((value) =&gt; {
    try {
      // 允许传入函数来更新状态
      const valueToStore = value instanceof Function ? value(storedValue) : value;
      setStoredValue(valueToStore);
      window.localStorage.setItem(key, JSON.stringify(valueToStore));
    } catch (error) {
      console.error(`Error setting localStorage key &quot;${key}&quot;:`, error);
    }
  }, [key, storedValue]);
  
  return [storedValue, setValue];
}

// 使用本地存储Hook
function Settings() {
  const [theme, setTheme] = useLocalStorage(&#39;theme&#39;, &#39;light&#39;);
  const [language, setLanguage] = useLocalStorage(&#39;language&#39;, &#39;zh&#39;);
  
  return (
    &lt;div&gt;
      &lt;select value={theme} onChange={e =&gt; setTheme(e.target.value)}&gt;
        &lt;option value=&quot;light&quot;&gt;浅色主题&lt;/option&gt;
        &lt;option value=&quot;dark&quot;&gt;深色主题&lt;/option&gt;
      &lt;/select&gt;
      
      &lt;select value={language} onChange={e =&gt; setLanguage(e.target.value)}&gt;
        &lt;option value=&quot;zh&quot;&gt;中文&lt;/option&gt;
        &lt;option value=&quot;en&quot;&gt;English&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<h2>Hook 使用最佳实践</h2>
<h3>1. Hook命名规范</h3>
<pre><code class="language-javascript">// ✅ 正确：以use开头
function useCustomHook() { }
function useUserData() { }
function useLocalStorage() { }

// ❌ 错误：不以use开头
function customHook() { }
function getUserData() { }
function localStorage() { }
</code></pre>
<h3>2. 依赖数组最佳实践</h3>
<pre><code class="language-javascript">function Component({ userId }) {
  const [user, setUser] = useState(null);
  
  // ❌ 错误：缺少依赖
  useEffect(() =&gt; {
    fetchUser(userId).then(setUser);
  }, []); // 缺少userId依赖
  
  // ✅ 正确：包含所有依赖
  useEffect(() =&gt; {
    fetchUser(userId).then(setUser);
  }, [userId]);
  
  // ✅ 正确：使用useCallback减少重新创建
  const fetchUserCallback = useCallback(async () =&gt; {
    const userData = await fetchUser(userId);
    setUser(userData);
  }, [userId]);
  
  useEffect(() =&gt; {
    fetchUserCallback();
  }, [fetchUserCallback]);
}
</code></pre>
<h3>3. 避免常见陷阱</h3>
<pre><code class="language-javascript">function Component() {
  const [count, setCount] = useState(0);
  
  // ❌ 陷阱：在useEffect中使用过时的状态
  useEffect(() =&gt; {
    const timer = setInterval(() =&gt; {
      setCount(count + 1); // count永远是0
    }, 1000);
    return () =&gt; clearInterval(timer);
  }, []);
  
  // ✅ 解决方案1：使用函数式更新
  useEffect(() =&gt; {
    const timer = setInterval(() =&gt; {
      setCount(prev =&gt; prev + 1);
    }, 1000);
    return () =&gt; clearInterval(timer);
  }, []);
  
  // ✅ 解决方案2：使用useRef
  const countRef = useRef(count);
  countRef.current = count;
  
  useEffect(() =&gt; {
    const timer = setInterval(() =&gt; {
      setCount(countRef.current + 1);
    }, 1000);
    return () =&gt; clearInterval(timer);
  }, []);
}
</code></pre>
<h2>下一步</h2>
<ul>
<li>详细学习 <a href="./10-useState.md">useState</a></li>
<li>深入了解 <a href="./11-useEffect.md">useEffect</a></li>
<li>探索 <a href="./16-%E8%87%AA%E5%AE%9A%E4%B9%89Hooks.md">自定义Hooks</a></li>
</ul>

          </div>

          <!-- 文档导航 -->
          <div class="doc-navigation">
            
              <a href="08-列表渲染.html" class="nav-btn prev-btn">
                <span class="nav-icon">←</span>
                <div class="nav-text">
                  <span class="nav-label">上一篇</span>
                  <span class="nav-title">列表渲染</span>
                </div>
              </a>
            
            
            
              <a href="10-useState.html" class="nav-btn next-btn">
                <div class="nav-text">
                  <span class="nav-label">下一篇</span>
                  <span class="nav-title">useState</span>
                </div>
                <span class="nav-icon">→</span>
              </a>
            
          </div>
        </article>
      </main>
    </div>

    <!-- 返回顶部按钮 -->
    <button class="back-to-top" id="backToTop" onclick="scrollToTop()">
      <span>↑</span>
    </button>

    <!-- 底部 -->
    <footer class="footer">
      <div class="footer-content">
        <p>&copy; 2024 React 中文文档. 基于 React 18.x 构建</p>
        <p>Made with ❤️ by React中文社区</p>
      </div>
    </footer>
  </div>

  <script src="assets/script.js"></script>
</body>
</html>