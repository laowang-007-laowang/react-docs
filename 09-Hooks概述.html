<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Hooksæ¦‚è¿° - React ä¸­æ–‡æ–‡æ¡£</title>
  <meta name="description" content="ä»å…¥é—¨åˆ°ç²¾é€šï¼Œå…¨é¢æŒæ¡Reactå¼€å‘æŠ€èƒ½">
  <link rel="stylesheet" href="assets/style.css">
  <link rel="stylesheet" href="assets/highlight.css">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>âš›ï¸</text></svg>">
</head>
<body>
  <div class="container">
    <!-- é¡¶éƒ¨å¯¼èˆª -->
    <header class="header">
      <div class="header-content">
        <div class="logo">
          <span class="logo-icon">âš›ï¸</span>
          <div class="logo-text">
            <h1>React ä¸­æ–‡æ–‡æ¡£</h1>
            <p>ç°ä»£åŒ–çš„Reactå­¦ä¹ æŒ‡å—</p>
          </div>
        </div>
        <nav class="header-nav">
          <a href="index.html" class="nav-link">é¦–é¡µ</a>
          <a href="#" class="nav-link" onclick="toggleSidebar()">ç›®å½•</a>
          <a href="https://github.com/facebook/react" target="_blank" class="nav-link">GitHub</a>
        </nav>
      </div>
    </header>

    <div class="main-layout">
      <!-- ä¾§è¾¹æ  -->
      <aside class="sidebar" id="sidebar">
        <div class="sidebar-content">
          <div class="search-box">
            <input type="text" placeholder="æœç´¢æ–‡æ¡£..." id="searchInput" onkeyup="searchDocs()">
            <span class="search-icon">ğŸ”</span>
          </div>
          <nav class="doc-nav">
            
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ“š</span>
          åŸºç¡€æ¦‚å¿µ
        </h3>
        <ul class="category-docs">
          <li><a href="01-Reactç®€ä»‹.html" class="doc-link">Reactç®€ä»‹</a></li><li><a href="02-ç¯å¢ƒæ­å»º.html" class="doc-link">ç¯å¢ƒæ­å»º</a></li><li><a href="03-JSXè¯­æ³•.html" class="doc-link">JSXè¯­æ³•</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ§©</span>
          ç»„ä»¶å¼€å‘
        </h3>
        <ul class="category-docs">
          <li><a href="04-ç»„ä»¶åŸºç¡€.html" class="doc-link">ç»„ä»¶åŸºç¡€</a></li><li><a href="05-Propsä¸State.html" class="doc-link">Propsä¸State</a></li><li><a href="06-äº‹ä»¶å¤„ç†.html" class="doc-link">äº‹ä»¶å¤„ç†</a></li><li><a href="07-æ¡ä»¶æ¸²æŸ“.html" class="doc-link">æ¡ä»¶æ¸²æŸ“</a></li><li><a href="08-åˆ—è¡¨æ¸²æŸ“.html" class="doc-link">åˆ—è¡¨æ¸²æŸ“</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ£</span>
          Hooks API
        </h3>
        <ul class="category-docs">
          <li><a href="09-Hooksæ¦‚è¿°.html" class="doc-link">Hooksæ¦‚è¿°</a></li><li><a href="10-useState.html" class="doc-link">useState</a></li><li><a href="11-useEffect.html" class="doc-link">useEffect</a></li><li><a href="12-useContext.html" class="doc-link">useContext</a></li><li><a href="13-useReducer.html" class="doc-link">useReducer</a></li><li><a href="14-useMemoå’ŒuseCallback.html" class="doc-link">useMemoå’ŒuseCallback</a></li><li><a href="15-useRef.html" class="doc-link">useRef</a></li><li><a href="16-è‡ªå®šä¹‰Hooks.html" class="doc-link">è‡ªå®šä¹‰Hooks</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ”„</span>
          ç”Ÿå‘½å‘¨æœŸ
        </h3>
        <ul class="category-docs">
          <li><a href="17-ç”Ÿå‘½å‘¨æœŸæ–¹æ³•.html" class="doc-link">ç”Ÿå‘½å‘¨æœŸæ–¹æ³•</a></li><li><a href="18-å‰¯ä½œç”¨å¤„ç†.html" class="doc-link">å‰¯ä½œç”¨å¤„ç†</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ¨</span>
          æ ·å¼ä¸UI
        </h3>
        <ul class="category-docs">
          <li><a href="19-æ ·å¼å¤„ç†.html" class="doc-link">æ ·å¼å¤„ç†</a></li><li><a href="20-åŠ¨ç”»æ•ˆæœ.html" class="doc-link">åŠ¨ç”»æ•ˆæœ</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ—ºï¸</span>
          è·¯ç”±ç®¡ç†
        </h3>
        <ul class="category-docs">
          <li><a href="21-React-Router.html" class="doc-link">React-Router</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ“¦</span>
          çŠ¶æ€ç®¡ç†
        </h3>
        <ul class="category-docs">
          <li><a href="22-Context-API.html" class="doc-link">Context-API</a></li><li><a href="23-Reduxé›†æˆ.html" class="doc-link">Reduxé›†æˆ</a></li><li><a href="24-ZustandçŠ¶æ€ç®¡ç†.html" class="doc-link">ZustandçŠ¶æ€ç®¡ç†</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸš€</span>
          æ€§èƒ½ä¼˜åŒ–
        </h3>
        <ul class="category-docs">
          <li><a href="25-æ€§èƒ½ä¼˜åŒ–æŠ€å·§.html" class="doc-link">æ€§èƒ½ä¼˜åŒ–æŠ€å·§</a></li><li><a href="26-ä»£ç åˆ†å‰².html" class="doc-link">ä»£ç åˆ†å‰²</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ§ª</span>
          æµ‹è¯•
        </h3>
        <ul class="category-docs">
          <li><a href="27-å•å…ƒæµ‹è¯•.html" class="doc-link">å•å…ƒæµ‹è¯•</a></li><li><a href="28-é›†æˆæµ‹è¯•.html" class="doc-link">é›†æˆæµ‹è¯•</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ—ï¸</span>
          æ„å»ºä¸éƒ¨ç½²
        </h3>
        <ul class="category-docs">
          <li><a href="29-é¡¹ç›®æ„å»º.html" class="doc-link">é¡¹ç›®æ„å»º</a></li><li><a href="30-ç”Ÿäº§éƒ¨ç½².html" class="doc-link">ç”Ÿäº§éƒ¨ç½²</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ› ï¸</span>
          å¼€å‘å·¥å…·
        </h3>
        <ul class="category-docs">
          <li><a href="31-å¼€å‘è€…å·¥å…·.html" class="doc-link">å¼€å‘è€…å·¥å…·</a></li><li><a href="32-è°ƒè¯•æŠ€å·§.html" class="doc-link">è°ƒè¯•æŠ€å·§</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ“–</span>
          APIå‚è€ƒ
        </h3>
        <ul class="category-docs">
          <li><a href="33-React-APIå®Œæ•´å‚è€ƒ.html" class="doc-link">React-APIå®Œæ•´å‚è€ƒ</a></li><li><a href="34-DOMå…ƒç´ å±æ€§.html" class="doc-link">DOMå…ƒç´ å±æ€§</a></li><li><a href="35-åˆæˆäº‹ä»¶.html" class="doc-link">åˆæˆäº‹ä»¶</a></li><li><a href="React-Hookså®Œæ•´å‚è€ƒ.html" class="doc-link">React-Hookså®Œæ•´å‚è€ƒ</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ’¡</span>
          æœ€ä½³å®è·µ
        </h3>
        <ul class="category-docs">
          <li><a href="36-ç¼–ç è§„èŒƒ.html" class="doc-link">ç¼–ç è§„èŒƒ</a></li><li><a href="37-é¡¹ç›®æ¶æ„.html" class="doc-link">é¡¹ç›®æ¶æ„</a></li><li><a href="38-å¸¸è§é—®é¢˜.html" class="doc-link">å¸¸è§é—®é¢˜</a></li>
        </ul>
      </div>
          </nav>
        </div>
      </aside>

      <!-- ä¸»å†…å®¹åŒº -->
      <main class="content">
        <article class="doc-article">
          <div class="doc-header">
            <div class="breadcrumb">
              <a href="index.html">é¦–é¡µ</a>
              <span class="separator">></span>
              <span class="current">Hooksæ¦‚è¿°</span>
            </div>
            <h1 class="doc-title">Hooksæ¦‚è¿°</h1>
            <div class="doc-meta">
              <span class="category" style="background: #4facfe">
                ğŸ£ Hooks API
              </span>
            </div>
          </div>
          
          <div class="doc-content">
            <h1>React Hooks æ¦‚è¿°</h1>
<h2>ä»€ä¹ˆæ˜¯ Hooksï¼Ÿ</h2>
<p>Hooks æ˜¯ React 16.8 å¼•å…¥çš„æ–°ç‰¹æ€§ï¼Œå®ƒè®©ä½ åœ¨ä¸ç¼–å†™ class çš„æƒ…å†µä¸‹ä½¿ç”¨ state ä»¥åŠå…¶ä»–çš„ React ç‰¹æ€§ã€‚Hooks æ˜¯ä¸€äº›å¯ä»¥è®©ä½ åœ¨å‡½æ•°ç»„ä»¶é‡Œ&quot;é’©å…¥&quot; React state åŠç”Ÿå‘½å‘¨æœŸç­‰ç‰¹æ€§çš„å‡½æ•°ã€‚</p>
<h2>Hooks è§„åˆ™</h2>
<h3>1. åªåœ¨æœ€é¡¶å±‚ä½¿ç”¨ Hook</h3>
<pre><code class="language-javascript">// âŒ é”™è¯¯ï¼šåœ¨æ¡ä»¶è¯­å¥ä¸­ä½¿ç”¨Hook
function Component({ condition }) {
  if (condition) {
    const [count, setCount] = useState(0); // é”™è¯¯ï¼
  }
  
  // âŒ é”™è¯¯ï¼šåœ¨å¾ªç¯ä¸­ä½¿ç”¨Hook
  for (let i = 0; i &lt; 10; i++) {
    const [value, setValue] = useState(i); // é”™è¯¯ï¼
  }
  
  return &lt;div&gt;Content&lt;/div&gt;;
}

// âœ… æ­£ç¡®ï¼šåœ¨é¡¶å±‚ä½¿ç”¨Hook
function Component({ condition }) {
  const [count, setCount] = useState(0);
  const [isVisible, setIsVisible] = useState(false);
  
  // æ¡ä»¶é€»è¾‘æ”¾åœ¨Hookä½¿ç”¨ä¹‹å
  if (condition) {
    // ä½¿ç”¨state
  }
  
  return &lt;div&gt;Content&lt;/div&gt;;
}
</code></pre>
<h3>2. åªåœ¨ React å‡½æ•°ä¸­è°ƒç”¨ Hook</h3>
<pre><code class="language-javascript">// âŒ é”™è¯¯ï¼šåœ¨æ™®é€šå‡½æ•°ä¸­ä½¿ç”¨Hook
function utilityFunction() {
  const [value, setValue] = useState(0); // é”™è¯¯ï¼
  return value;
}

// âœ… æ­£ç¡®ï¼šåœ¨Reactç»„ä»¶ä¸­ä½¿ç”¨Hook
function MyComponent() {
  const [value, setValue] = useState(0); // æ­£ç¡®ï¼
  return &lt;div&gt;{value}&lt;/div&gt;;
}

// âœ… æ­£ç¡®ï¼šåœ¨è‡ªå®šä¹‰Hookä¸­ä½¿ç”¨Hook
function useCustomHook() {
  const [value, setValue] = useState(0); // æ­£ç¡®ï¼
  return [value, setValue];
}
</code></pre>
<h2>å†…ç½® Hooks</h2>
<h3>1. useState - çŠ¶æ€Hook</h3>
<pre><code class="language-javascript">import React, { useState } from &#39;react&#39;;

function Counter() {
  // å£°æ˜çŠ¶æ€å˜é‡
  const [count, setCount] = useState(0);
  const [name, setName] = useState(&#39;&#39;);
  const [user, setUser] = useState({ name: &#39;&#39;, age: 0 });
  
  return (
    &lt;div&gt;
      &lt;p&gt;è®¡æ•°: {count}&lt;/p&gt;
      &lt;button onClick={() =&gt; setCount(count + 1)}&gt;+1&lt;/button&gt;
      &lt;button onClick={() =&gt; setCount(prev =&gt; prev + 1)}&gt;+1 (å‡½æ•°å¼æ›´æ–°)&lt;/button&gt;
      
      &lt;input 
        value={name} 
        onChange={e =&gt; setName(e.target.value)} 
        placeholder=&quot;è¾“å…¥å§“å&quot;
      /&gt;
      
      &lt;button onClick={() =&gt; setUser(prev =&gt; ({ ...prev, age: prev.age + 1 }))}&gt;
        å¢åŠ å¹´é¾„
      &lt;/button&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<h3>2. useEffect - å‰¯ä½œç”¨Hook</h3>
<pre><code class="language-javascript">import React, { useState, useEffect } from &#39;react&#39;;

function DataComponent() {
  const [data, setData] = useState(null);
  const [loading, setLoading] = useState(true);
  const [count, setCount] = useState(0);
  
  // ç»„ä»¶æŒ‚è½½æ—¶æ‰§è¡Œä¸€æ¬¡
  useEffect(() =&gt; {
    fetchData().then(result =&gt; {
      setData(result);
      setLoading(false);
    });
  }, []); // ç©ºä¾èµ–æ•°ç»„
  
  // å½“countå˜åŒ–æ—¶æ‰§è¡Œ
  useEffect(() =&gt; {
    document.title = `è®¡æ•°: ${count}`;
  }, [count]); // countä½œä¸ºä¾èµ–
  
  // æ¯æ¬¡æ¸²æŸ“éƒ½æ‰§è¡Œ
  useEffect(() =&gt; {
    console.log(&#39;ç»„ä»¶å·²æ¸²æŸ“&#39;);
  }); // æ²¡æœ‰ä¾èµ–æ•°ç»„
  
  // æ¸…ç†å‰¯ä½œç”¨
  useEffect(() =&gt; {
    const timer = setInterval(() =&gt; {
      console.log(&#39;å®šæ—¶å™¨æ‰§è¡Œ&#39;);
    }, 1000);
    
    // æ¸…ç†å‡½æ•°
    return () =&gt; {
      clearInterval(timer);
    };
  }, []);
  
  if (loading) return &lt;div&gt;åŠ è½½ä¸­...&lt;/div&gt;;
  
  return (
    &lt;div&gt;
      &lt;div&gt;æ•°æ®: {JSON.stringify(data)}&lt;/div&gt;
      &lt;div&gt;è®¡æ•°: {count}&lt;/div&gt;
      &lt;button onClick={() =&gt; setCount(count + 1)}&gt;+1&lt;/button&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<h3>3. useContext - ä¸Šä¸‹æ–‡Hook</h3>
<pre><code class="language-javascript">import React, { createContext, useContext, useState } from &#39;react&#39;;

// åˆ›å»ºContext
const ThemeContext = createContext();
const UserContext = createContext();

// æä¾›è€…ç»„ä»¶
function App() {
  const [theme, setTheme] = useState(&#39;light&#39;);
  const [user, setUser] = useState({ name: &#39;Admin&#39; });
  
  return (
    &lt;ThemeContext.Provider value={{ theme, setTheme }}&gt;
      &lt;UserContext.Provider value={{ user, setUser }}&gt;
        &lt;MainComponent /&gt;
      &lt;/UserContext.Provider&gt;
    &lt;/ThemeContext.Provider&gt;
  );
}

// æ¶ˆè´¹è€…ç»„ä»¶
function MainComponent() {
  const { theme, setTheme } = useContext(ThemeContext);
  const { user, setUser } = useContext(UserContext);
  
  return (
    &lt;div className={`theme-${theme}`}&gt;
      &lt;h1&gt;æ¬¢è¿, {user.name}!&lt;/h1&gt;
      &lt;button onClick={() =&gt; setTheme(theme === &#39;light&#39; ? &#39;dark&#39; : &#39;light&#39;)}&gt;
        åˆ‡æ¢ä¸»é¢˜
      &lt;/button&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<h3>4. useReducer - å¤æ‚çŠ¶æ€ç®¡ç†Hook</h3>
<pre><code class="language-javascript">import React, { useReducer } from &#39;react&#39;;

// å®šä¹‰reducer
function todoReducer(state, action) {
  switch (action.type) {
    case &#39;ADD_TODO&#39;:
      return {
        ...state,
        todos: [...state.todos, {
          id: Date.now(),
          text: action.payload,
          completed: false
        }]
      };
    case &#39;TOGGLE_TODO&#39;:
      return {
        ...state,
        todos: state.todos.map(todo =&gt;
          todo.id === action.payload
            ? { ...todo, completed: !todo.completed }
            : todo
        )
      };
    case &#39;DELETE_TODO&#39;:
      return {
        ...state,
        todos: state.todos.filter(todo =&gt; todo.id !== action.payload)
      };
    default:
      return state;
  }
}

// åˆå§‹çŠ¶æ€
const initialState = {
  todos: [],
  filter: &#39;all&#39;
};

function TodoApp() {
  const [state, dispatch] = useReducer(todoReducer, initialState);
  const [inputValue, setInputValue] = useState(&#39;&#39;);
  
  const addTodo = () =&gt; {
    if (inputValue.trim()) {
      dispatch({ type: &#39;ADD_TODO&#39;, payload: inputValue });
      setInputValue(&#39;&#39;);
    }
  };
  
  return (
    &lt;div&gt;
      &lt;input 
        value={inputValue}
        onChange={e =&gt; setInputValue(e.target.value)}
        onKeyPress={e =&gt; e.key === &#39;Enter&#39; &amp;&amp; addTodo()}
      /&gt;
      &lt;button onClick={addTodo}&gt;æ·»åŠ &lt;/button&gt;
      
      &lt;ul&gt;
        {state.todos.map(todo =&gt; (
          &lt;li key={todo.id}&gt;
            &lt;input 
              type=&quot;checkbox&quot;
              checked={todo.completed}
              onChange={() =&gt; dispatch({ type: &#39;TOGGLE_TODO&#39;, payload: todo.id })}
            /&gt;
            &lt;span style={{ textDecoration: todo.completed ? &#39;line-through&#39; : &#39;none&#39; }}&gt;
              {todo.text}
            &lt;/span&gt;
            &lt;button onClick={() =&gt; dispatch({ type: &#39;DELETE_TODO&#39;, payload: todo.id })}&gt;
              åˆ é™¤
            &lt;/button&gt;
          &lt;/li&gt;
        ))}
      &lt;/ul&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<h3>5. useMemo - è®°å¿†åŒ–å€¼Hook</h3>
<pre><code class="language-javascript">import React, { useState, useMemo } from &#39;react&#39;;

function ExpensiveComponent({ items }) {
  const [count, setCount] = useState(0);
  const [keyword, setKeyword] = useState(&#39;&#39;);
  
  // è®°å¿†åŒ–è®¡ç®—ç»“æœ
  const expensiveValue = useMemo(() =&gt; {
    console.log(&#39;æ‰§è¡Œæ˜‚è´µè®¡ç®—&#39;);
    return items.reduce((sum, item) =&gt; sum + item.value, 0);
  }, [items]); // åªæœ‰itemså˜åŒ–æ—¶æ‰é‡æ–°è®¡ç®—
  
  // è®°å¿†åŒ–è¿‡æ»¤ç»“æœ
  const filteredItems = useMemo(() =&gt; {
    console.log(&#39;æ‰§è¡Œè¿‡æ»¤è®¡ç®—&#39;);
    return items.filter(item =&gt; 
      item.name.toLowerCase().includes(keyword.toLowerCase())
    );
  }, [items, keyword]); // itemsæˆ–keywordå˜åŒ–æ—¶æ‰é‡æ–°è®¡ç®—
  
  return (
    &lt;div&gt;
      &lt;div&gt;è®¡æ•°: {count}&lt;/div&gt;
      &lt;button onClick={() =&gt; setCount(count + 1)}&gt;+1&lt;/button&gt;
      
      &lt;div&gt;æ€»å€¼: {expensiveValue}&lt;/div&gt;
      
      &lt;input 
        value={keyword}
        onChange={e =&gt; setKeyword(e.target.value)}
        placeholder=&quot;æœç´¢...&quot;
      /&gt;
      
      &lt;ul&gt;
        {filteredItems.map(item =&gt; (
          &lt;li key={item.id}&gt;{item.name}&lt;/li&gt;
        ))}
      &lt;/ul&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<h3>6. useCallback - è®°å¿†åŒ–å‡½æ•°Hook</h3>
<pre><code class="language-javascript">import React, { useState, useCallback, memo } from &#39;react&#39;;

// å­ç»„ä»¶
const ChildComponent = memo(({ onButtonClick, children }) =&gt; {
  console.log(&#39;ChildComponent é‡æ–°æ¸²æŸ“&#39;);
  return (
    &lt;div&gt;
      &lt;button onClick={onButtonClick}&gt;ç‚¹å‡»æˆ‘&lt;/button&gt;
      {children}
    &lt;/div&gt;
  );
});

function ParentComponent() {
  const [count, setCount] = useState(0);
  const [name, setName] = useState(&#39;&#39;);
  
  // æ²¡æœ‰useCallback - æ¯æ¬¡æ¸²æŸ“éƒ½åˆ›å»ºæ–°å‡½æ•°
  const handleClick1 = () =&gt; {
    console.log(&#39;æŒ‰é’®è¢«ç‚¹å‡»&#39;);
  };
  
  // ä½¿ç”¨useCallback - è®°å¿†åŒ–å‡½æ•°
  const handleClick2 = useCallback(() =&gt; {
    console.log(&#39;æŒ‰é’®è¢«ç‚¹å‡»&#39;, count);
  }, [count]); // åªæœ‰countå˜åŒ–æ—¶æ‰åˆ›å»ºæ–°å‡½æ•°
  
  // å¸¦å‚æ•°çš„å›è°ƒ
  const handleItemClick = useCallback((id) =&gt; {
    console.log(&#39;ç‚¹å‡»äº†é¡¹ç›®:&#39;, id);
    // ä½¿ç”¨æœ€æ–°çš„countå€¼
    setCount(prev =&gt; prev + 1);
  }, []); // ç©ºä¾èµ–ï¼Œå› ä¸ºä½¿ç”¨äº†å‡½æ•°å¼æ›´æ–°
  
  return (
    &lt;div&gt;
      &lt;div&gt;è®¡æ•°: {count}&lt;/div&gt;
      &lt;input 
        value={name}
        onChange={e =&gt; setName(e.target.value)}
        placeholder=&quot;è¾“å…¥å§“å&quot;
      /&gt;
      
      {/* æ¯æ¬¡éƒ½é‡æ–°æ¸²æŸ“ */}
      &lt;ChildComponent onButtonClick={handleClick1}&gt;
        æœªä¼˜åŒ–çš„å­ç»„ä»¶
      &lt;/ChildComponent&gt;
      
      {/* åªæœ‰å½“handleClick2å˜åŒ–æ—¶æ‰é‡æ–°æ¸²æŸ“ */}
      &lt;ChildComponent onButtonClick={handleClick2}&gt;
        ä¼˜åŒ–çš„å­ç»„ä»¶
      &lt;/ChildComponent&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<h3>7. useRef - å¼•ç”¨Hook</h3>
<pre><code class="language-javascript">import React, { useRef, useState, useEffect } from &#39;react&#39;;

function RefExample() {
  const inputRef = useRef(null);
  const countRef = useRef(0);
  const [count, setCount] = useState(0);
  const prevCountRef = useRef();
  
  // å­˜å‚¨å‰ä¸€ä¸ªå€¼
  useEffect(() =&gt; {
    prevCountRef.current = count;
  });
  const prevCount = prevCountRef.current;
  
  // ç„¦ç‚¹ç®¡ç†
  const focusInput = () =&gt; {
    inputRef.current.focus();
  };
  
  // ä¸è§¦å‘é‡æ–°æ¸²æŸ“çš„è®¡æ•°å™¨
  const incrementRef = () =&gt; {
    countRef.current += 1;
    console.log(&#39;Refè®¡æ•°:&#39;, countRef.current);
  };
  
  // è·å–DOMå°ºå¯¸
  const measureElement = () =&gt; {
    const element = inputRef.current;
    console.log(&#39;å…ƒç´ å®½åº¦:&#39;, element.offsetWidth);
    console.log(&#39;å…ƒç´ é«˜åº¦:&#39;, element.offsetHeight);
  };
  
  return (
    &lt;div&gt;
      &lt;input ref={inputRef} placeholder=&quot;æˆ‘å¯ä»¥è¢«èšç„¦&quot; /&gt;
      &lt;button onClick={focusInput}&gt;èšç„¦è¾“å…¥æ¡†&lt;/button&gt;
      &lt;button onClick={measureElement}&gt;æµ‹é‡å…ƒç´ &lt;/button&gt;
      
      &lt;div&gt;
        &lt;div&gt;å½“å‰è®¡æ•°: {count}&lt;/div&gt;
        &lt;div&gt;å‰ä¸€ä¸ªè®¡æ•°: {prevCount}&lt;/div&gt;
        &lt;button onClick={() =&gt; setCount(count + 1)}&gt;å¢åŠ Stateè®¡æ•°&lt;/button&gt;
      &lt;/div&gt;
      
      &lt;div&gt;
        &lt;div&gt;Refè®¡æ•°: {countRef.current}&lt;/div&gt;
        &lt;button onClick={incrementRef}&gt;å¢åŠ Refè®¡æ•°&lt;/button&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<h2>è‡ªå®šä¹‰ Hooks</h2>
<h3>1. åŸºç¡€è‡ªå®šä¹‰Hook</h3>
<pre><code class="language-javascript">// useCounter Hook
function useCounter(initialValue = 0) {
  const [count, setCount] = useState(initialValue);
  
  const increment = useCallback(() =&gt; setCount(prev =&gt; prev + 1), []);
  const decrement = useCallback(() =&gt; setCount(prev =&gt; prev - 1), []);
  const reset = useCallback(() =&gt; setCount(initialValue), [initialValue]);
  
  return { count, increment, decrement, reset };
}

// ä½¿ç”¨è‡ªå®šä¹‰Hook
function CounterComponent() {
  const { count, increment, decrement, reset } = useCounter(10);
  
  return (
    &lt;div&gt;
      &lt;div&gt;è®¡æ•°: {count}&lt;/div&gt;
      &lt;button onClick={increment}&gt;+1&lt;/button&gt;
      &lt;button onClick={decrement}&gt;-1&lt;/button&gt;
      &lt;button onClick={reset}&gt;é‡ç½®&lt;/button&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<h3>2. æ•°æ®è·å–Hook</h3>
<pre><code class="language-javascript">function useApi(url) {
  const [data, setData] = useState(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);
  
  useEffect(() =&gt; {
    let cancelled = false;
    
    const fetchData = async () =&gt; {
      try {
        setLoading(true);
        setError(null);
        
        const response = await fetch(url);
        if (!response.ok) {
          throw new Error(`HTTP error! status: ${response.status}`);
        }
        
        const result = await response.json();
        
        if (!cancelled) {
          setData(result);
        }
      } catch (err) {
        if (!cancelled) {
          setError(err.message);
        }
      } finally {
        if (!cancelled) {
          setLoading(false);
        }
      }
    };
    
    fetchData();
    
    return () =&gt; {
      cancelled = true;
    };
  }, [url]);
  
  return { data, loading, error };
}

// ä½¿ç”¨æ•°æ®è·å–Hook
function UserProfile({ userId }) {
  const { data: user, loading, error } = useApi(`/api/users/${userId}`);
  
  if (loading) return &lt;div&gt;åŠ è½½ä¸­...&lt;/div&gt;;
  if (error) return &lt;div&gt;é”™è¯¯: {error}&lt;/div&gt;;
  if (!user) return &lt;div&gt;æœªæ‰¾åˆ°ç”¨æˆ·&lt;/div&gt;;
  
  return (
    &lt;div&gt;
      &lt;h1&gt;{user.name}&lt;/h1&gt;
      &lt;p&gt;{user.email}&lt;/p&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<h3>3. æœ¬åœ°å­˜å‚¨Hook</h3>
<pre><code class="language-javascript">function useLocalStorage(key, initialValue) {
  // è·å–åˆå§‹å€¼
  const [storedValue, setStoredValue] = useState(() =&gt; {
    try {
      const item = window.localStorage.getItem(key);
      return item ? JSON.parse(item) : initialValue;
    } catch (error) {
      console.error(`Error reading localStorage key &quot;${key}&quot;:`, error);
      return initialValue;
    }
  });
  
  // è®¾ç½®å€¼çš„å‡½æ•°
  const setValue = useCallback((value) =&gt; {
    try {
      // å…è®¸ä¼ å…¥å‡½æ•°æ¥æ›´æ–°çŠ¶æ€
      const valueToStore = value instanceof Function ? value(storedValue) : value;
      setStoredValue(valueToStore);
      window.localStorage.setItem(key, JSON.stringify(valueToStore));
    } catch (error) {
      console.error(`Error setting localStorage key &quot;${key}&quot;:`, error);
    }
  }, [key, storedValue]);
  
  return [storedValue, setValue];
}

// ä½¿ç”¨æœ¬åœ°å­˜å‚¨Hook
function Settings() {
  const [theme, setTheme] = useLocalStorage(&#39;theme&#39;, &#39;light&#39;);
  const [language, setLanguage] = useLocalStorage(&#39;language&#39;, &#39;zh&#39;);
  
  return (
    &lt;div&gt;
      &lt;select value={theme} onChange={e =&gt; setTheme(e.target.value)}&gt;
        &lt;option value=&quot;light&quot;&gt;æµ…è‰²ä¸»é¢˜&lt;/option&gt;
        &lt;option value=&quot;dark&quot;&gt;æ·±è‰²ä¸»é¢˜&lt;/option&gt;
      &lt;/select&gt;
      
      &lt;select value={language} onChange={e =&gt; setLanguage(e.target.value)}&gt;
        &lt;option value=&quot;zh&quot;&gt;ä¸­æ–‡&lt;/option&gt;
        &lt;option value=&quot;en&quot;&gt;English&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<h2>Hook ä½¿ç”¨æœ€ä½³å®è·µ</h2>
<h3>1. Hookå‘½åè§„èŒƒ</h3>
<pre><code class="language-javascript">// âœ… æ­£ç¡®ï¼šä»¥useå¼€å¤´
function useCustomHook() { }
function useUserData() { }
function useLocalStorage() { }

// âŒ é”™è¯¯ï¼šä¸ä»¥useå¼€å¤´
function customHook() { }
function getUserData() { }
function localStorage() { }
</code></pre>
<h3>2. ä¾èµ–æ•°ç»„æœ€ä½³å®è·µ</h3>
<pre><code class="language-javascript">function Component({ userId }) {
  const [user, setUser] = useState(null);
  
  // âŒ é”™è¯¯ï¼šç¼ºå°‘ä¾èµ–
  useEffect(() =&gt; {
    fetchUser(userId).then(setUser);
  }, []); // ç¼ºå°‘userIdä¾èµ–
  
  // âœ… æ­£ç¡®ï¼šåŒ…å«æ‰€æœ‰ä¾èµ–
  useEffect(() =&gt; {
    fetchUser(userId).then(setUser);
  }, [userId]);
  
  // âœ… æ­£ç¡®ï¼šä½¿ç”¨useCallbackå‡å°‘é‡æ–°åˆ›å»º
  const fetchUserCallback = useCallback(async () =&gt; {
    const userData = await fetchUser(userId);
    setUser(userData);
  }, [userId]);
  
  useEffect(() =&gt; {
    fetchUserCallback();
  }, [fetchUserCallback]);
}
</code></pre>
<h3>3. é¿å…å¸¸è§é™·é˜±</h3>
<pre><code class="language-javascript">function Component() {
  const [count, setCount] = useState(0);
  
  // âŒ é™·é˜±ï¼šåœ¨useEffectä¸­ä½¿ç”¨è¿‡æ—¶çš„çŠ¶æ€
  useEffect(() =&gt; {
    const timer = setInterval(() =&gt; {
      setCount(count + 1); // countæ°¸è¿œæ˜¯0
    }, 1000);
    return () =&gt; clearInterval(timer);
  }, []);
  
  // âœ… è§£å†³æ–¹æ¡ˆ1ï¼šä½¿ç”¨å‡½æ•°å¼æ›´æ–°
  useEffect(() =&gt; {
    const timer = setInterval(() =&gt; {
      setCount(prev =&gt; prev + 1);
    }, 1000);
    return () =&gt; clearInterval(timer);
  }, []);
  
  // âœ… è§£å†³æ–¹æ¡ˆ2ï¼šä½¿ç”¨useRef
  const countRef = useRef(count);
  countRef.current = count;
  
  useEffect(() =&gt; {
    const timer = setInterval(() =&gt; {
      setCount(countRef.current + 1);
    }, 1000);
    return () =&gt; clearInterval(timer);
  }, []);
}
</code></pre>
<h2>ä¸‹ä¸€æ­¥</h2>
<ul>
<li>è¯¦ç»†å­¦ä¹  <a href="./10-useState.md">useState</a></li>
<li>æ·±å…¥äº†è§£ <a href="./11-useEffect.md">useEffect</a></li>
<li>æ¢ç´¢ <a href="./16-%E8%87%AA%E5%AE%9A%E4%B9%89Hooks.md">è‡ªå®šä¹‰Hooks</a></li>
</ul>

          </div>

          <!-- æ–‡æ¡£å¯¼èˆª -->
          <div class="doc-navigation">
            
              <a href="08-åˆ—è¡¨æ¸²æŸ“.html" class="nav-btn prev-btn">
                <span class="nav-icon">â†</span>
                <div class="nav-text">
                  <span class="nav-label">ä¸Šä¸€ç¯‡</span>
                  <span class="nav-title">åˆ—è¡¨æ¸²æŸ“</span>
                </div>
              </a>
            
            
            
              <a href="10-useState.html" class="nav-btn next-btn">
                <div class="nav-text">
                  <span class="nav-label">ä¸‹ä¸€ç¯‡</span>
                  <span class="nav-title">useState</span>
                </div>
                <span class="nav-icon">â†’</span>
              </a>
            
          </div>
        </article>
      </main>
    </div>

    <!-- è¿”å›é¡¶éƒ¨æŒ‰é’® -->
    <button class="back-to-top" id="backToTop" onclick="scrollToTop()">
      <span>â†‘</span>
    </button>

    <!-- åº•éƒ¨ -->
    <footer class="footer">
      <div class="footer-content">
        <p>&copy; 2024 React ä¸­æ–‡æ–‡æ¡£. åŸºäº React 18.x æ„å»º</p>
        <p>Made with â¤ï¸ by Reactä¸­æ–‡ç¤¾åŒº</p>
      </div>
    </footer>
  </div>

  <script src="assets/script.js"></script>
</body>
</html>