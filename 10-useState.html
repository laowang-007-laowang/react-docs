<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>useState - React ä¸­æ–‡æ–‡æ¡£</title>
  <meta name="description" content="ä»å…¥é—¨åˆ°ç²¾é€šï¼Œå…¨é¢æŒæ¡Reactå¼€å‘æŠ€èƒ½">
  <link rel="stylesheet" href="assets/style.css">
  <link rel="stylesheet" href="assets/highlight.css">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>âš›ï¸</text></svg>">
</head>
<body>
  <div class="container">
    <!-- é¡¶éƒ¨å¯¼èˆª -->
    <header class="header">
      <div class="header-content">
        <div class="logo">
          <span class="logo-icon">âš›ï¸</span>
          <div class="logo-text">
            <h1>React ä¸­æ–‡æ–‡æ¡£</h1>
            <p>ç°ä»£åŒ–çš„Reactå­¦ä¹ æŒ‡å—</p>
          </div>
        </div>
        <nav class="header-nav">
          <a href="index.html" class="nav-link">é¦–é¡µ</a>
          <a href="#" class="nav-link" onclick="toggleSidebar()">ç›®å½•</a>
          <a href="https://github.com/facebook/react" target="_blank" class="nav-link">GitHub</a>
        </nav>
      </div>
    </header>

    <div class="main-layout">
      <!-- ä¾§è¾¹æ  -->
      <aside class="sidebar" id="sidebar">
        <div class="sidebar-content">
          <div class="search-box">
            <input type="text" placeholder="æœç´¢æ–‡æ¡£..." id="searchInput" onkeyup="searchDocs()">
            <span class="search-icon">ğŸ”</span>
          </div>
          <nav class="doc-nav">
            
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ“š</span>
          åŸºç¡€æ¦‚å¿µ
        </h3>
        <ul class="category-docs">
          <li><a href="01-Reactç®€ä»‹.html" class="doc-link">Reactç®€ä»‹</a></li><li><a href="02-ç¯å¢ƒæ­å»º.html" class="doc-link">ç¯å¢ƒæ­å»º</a></li><li><a href="03-JSXè¯­æ³•.html" class="doc-link">JSXè¯­æ³•</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ§©</span>
          ç»„ä»¶å¼€å‘
        </h3>
        <ul class="category-docs">
          <li><a href="04-ç»„ä»¶åŸºç¡€.html" class="doc-link">ç»„ä»¶åŸºç¡€</a></li><li><a href="05-Propsä¸State.html" class="doc-link">Propsä¸State</a></li><li><a href="06-äº‹ä»¶å¤„ç†.html" class="doc-link">äº‹ä»¶å¤„ç†</a></li><li><a href="07-æ¡ä»¶æ¸²æŸ“.html" class="doc-link">æ¡ä»¶æ¸²æŸ“</a></li><li><a href="08-åˆ—è¡¨æ¸²æŸ“.html" class="doc-link">åˆ—è¡¨æ¸²æŸ“</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ£</span>
          Hooks API
        </h3>
        <ul class="category-docs">
          <li><a href="09-Hooksæ¦‚è¿°.html" class="doc-link">Hooksæ¦‚è¿°</a></li><li><a href="10-useState.html" class="doc-link">useState</a></li><li><a href="11-useEffect.html" class="doc-link">useEffect</a></li><li><a href="12-useContext.html" class="doc-link">useContext</a></li><li><a href="13-useReducer.html" class="doc-link">useReducer</a></li><li><a href="14-useMemoå’ŒuseCallback.html" class="doc-link">useMemoå’ŒuseCallback</a></li><li><a href="15-useRef.html" class="doc-link">useRef</a></li><li><a href="16-è‡ªå®šä¹‰Hooks.html" class="doc-link">è‡ªå®šä¹‰Hooks</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ”„</span>
          ç”Ÿå‘½å‘¨æœŸ
        </h3>
        <ul class="category-docs">
          <li><a href="17-ç”Ÿå‘½å‘¨æœŸæ–¹æ³•.html" class="doc-link">ç”Ÿå‘½å‘¨æœŸæ–¹æ³•</a></li><li><a href="18-å‰¯ä½œç”¨å¤„ç†.html" class="doc-link">å‰¯ä½œç”¨å¤„ç†</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ¨</span>
          æ ·å¼ä¸UI
        </h3>
        <ul class="category-docs">
          <li><a href="19-æ ·å¼å¤„ç†.html" class="doc-link">æ ·å¼å¤„ç†</a></li><li><a href="20-åŠ¨ç”»æ•ˆæœ.html" class="doc-link">åŠ¨ç”»æ•ˆæœ</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ—ºï¸</span>
          è·¯ç”±ç®¡ç†
        </h3>
        <ul class="category-docs">
          <li><a href="21-React-Router.html" class="doc-link">React-Router</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ“¦</span>
          çŠ¶æ€ç®¡ç†
        </h3>
        <ul class="category-docs">
          <li><a href="22-Context-API.html" class="doc-link">Context-API</a></li><li><a href="23-Reduxé›†æˆ.html" class="doc-link">Reduxé›†æˆ</a></li><li><a href="24-ZustandçŠ¶æ€ç®¡ç†.html" class="doc-link">ZustandçŠ¶æ€ç®¡ç†</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸš€</span>
          æ€§èƒ½ä¼˜åŒ–
        </h3>
        <ul class="category-docs">
          <li><a href="25-æ€§èƒ½ä¼˜åŒ–æŠ€å·§.html" class="doc-link">æ€§èƒ½ä¼˜åŒ–æŠ€å·§</a></li><li><a href="26-ä»£ç åˆ†å‰².html" class="doc-link">ä»£ç åˆ†å‰²</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ§ª</span>
          æµ‹è¯•
        </h3>
        <ul class="category-docs">
          <li><a href="27-å•å…ƒæµ‹è¯•.html" class="doc-link">å•å…ƒæµ‹è¯•</a></li><li><a href="28-é›†æˆæµ‹è¯•.html" class="doc-link">é›†æˆæµ‹è¯•</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ—ï¸</span>
          æ„å»ºä¸éƒ¨ç½²
        </h3>
        <ul class="category-docs">
          <li><a href="29-é¡¹ç›®æ„å»º.html" class="doc-link">é¡¹ç›®æ„å»º</a></li><li><a href="30-ç”Ÿäº§éƒ¨ç½².html" class="doc-link">ç”Ÿäº§éƒ¨ç½²</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ› ï¸</span>
          å¼€å‘å·¥å…·
        </h3>
        <ul class="category-docs">
          <li><a href="31-å¼€å‘è€…å·¥å…·.html" class="doc-link">å¼€å‘è€…å·¥å…·</a></li><li><a href="32-è°ƒè¯•æŠ€å·§.html" class="doc-link">è°ƒè¯•æŠ€å·§</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ“–</span>
          APIå‚è€ƒ
        </h3>
        <ul class="category-docs">
          <li><a href="33-React-APIå®Œæ•´å‚è€ƒ.html" class="doc-link">React-APIå®Œæ•´å‚è€ƒ</a></li><li><a href="34-DOMå…ƒç´ å±æ€§.html" class="doc-link">DOMå…ƒç´ å±æ€§</a></li><li><a href="35-åˆæˆäº‹ä»¶.html" class="doc-link">åˆæˆäº‹ä»¶</a></li><li><a href="React-Hookså®Œæ•´å‚è€ƒ.html" class="doc-link">React-Hookså®Œæ•´å‚è€ƒ</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ’¡</span>
          æœ€ä½³å®è·µ
        </h3>
        <ul class="category-docs">
          <li><a href="36-ç¼–ç è§„èŒƒ.html" class="doc-link">ç¼–ç è§„èŒƒ</a></li><li><a href="37-é¡¹ç›®æ¶æ„.html" class="doc-link">é¡¹ç›®æ¶æ„</a></li><li><a href="38-å¸¸è§é—®é¢˜.html" class="doc-link">å¸¸è§é—®é¢˜</a></li>
        </ul>
      </div>
          </nav>
        </div>
      </aside>

      <!-- ä¸»å†…å®¹åŒº -->
      <main class="content">
        <article class="doc-article">
          <div class="doc-header">
            <div class="breadcrumb">
              <a href="index.html">é¦–é¡µ</a>
              <span class="separator">></span>
              <span class="current">useState</span>
            </div>
            <h1 class="doc-title">useState</h1>
            <div class="doc-meta">
              <span class="category" style="background: #4facfe">
                ğŸ£ Hooks API
              </span>
            </div>
          </div>
          
          <div class="doc-content">
            <h1>useState Hook è¯¦è§£</h1>
<h2>ä»€ä¹ˆæ˜¯ useStateï¼Ÿ</h2>
<p><code>useState</code> æ˜¯Reactä¸­æœ€åŸºæœ¬çš„Hookï¼Œå®ƒè®©å‡½æ•°ç»„ä»¶æ‹¥æœ‰çŠ¶æ€ç®¡ç†èƒ½åŠ›ã€‚å®ƒè¿”å›ä¸€ä¸ªçŠ¶æ€å€¼å’Œä¸€ä¸ªæ›´æ–°è¯¥çŠ¶æ€çš„å‡½æ•°ã€‚</p>
<h2>åŸºæœ¬è¯­æ³•</h2>
<pre><code class="language-javascript">import React, { useState } from &#39;react&#39;;

function MyComponent() {
  const [state, setState] = useState(initialValue);
  
  return (
    // JSX
  );
}
</code></pre>
<h2>åŸºç¡€ç”¨æ³•</h2>
<h3>ç®€å•çŠ¶æ€ç®¡ç†</h3>
<pre><code class="language-javascript">function Counter() {
  const [count, setCount] = useState(0);
  
  return (
    &lt;div&gt;
      &lt;p&gt;å½“å‰è®¡æ•°: {count}&lt;/p&gt;
      &lt;button onClick={() =&gt; setCount(count + 1)}&gt;+1&lt;/button&gt;
      &lt;button onClick={() =&gt; setCount(count - 1)}&gt;-1&lt;/button&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<h3>ä¸åŒæ•°æ®ç±»å‹çš„çŠ¶æ€</h3>
<pre><code class="language-javascript">function StateTypes() {
  // æ•°å­—çŠ¶æ€
  const [count, setCount] = useState(0);
  
  // å­—ç¬¦ä¸²çŠ¶æ€
  const [name, setName] = useState(&#39;&#39;);
  
  // å¸ƒå°”çŠ¶æ€
  const [isVisible, setIsVisible] = useState(true);
  
  // æ•°ç»„çŠ¶æ€
  const [items, setItems] = useState([]);
  
  // å¯¹è±¡çŠ¶æ€
  const [user, setUser] = useState({
    name: &#39;&#39;,
    email: &#39;&#39;,
    age: 0
  });
  
  // null/undefinedçŠ¶æ€
  const [data, setData] = useState(null);
  
  return (
    &lt;div&gt;
      &lt;div&gt;Count: {count}&lt;/div&gt;
      &lt;div&gt;Name: {name}&lt;/div&gt;
      &lt;div&gt;Visible: {isVisible ? &#39;Yes&#39; : &#39;No&#39;}&lt;/div&gt;
      &lt;div&gt;Items: {items.length}&lt;/div&gt;
      &lt;div&gt;User: {user.name}&lt;/div&gt;
      &lt;div&gt;Data: {data ? &#39;Loaded&#39; : &#39;No data&#39;}&lt;/div&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<h2>çŠ¶æ€æ›´æ–°æ–¹æ³•</h2>
<h3>ç›´æ¥è®¾ç½®æ–°å€¼</h3>
<pre><code class="language-javascript">function SimpleUpdate() {
  const [count, setCount] = useState(0);
  const [name, setName] = useState(&#39;&#39;);
  
  const handleIncrement = () =&gt; {
    setCount(10); // ç›´æ¥è®¾ç½®ä¸º10
  };
  
  const handleNameChange = (e) =&gt; {
    setName(e.target.value); // ç›´æ¥è®¾ç½®ä¸ºè¾“å…¥å€¼
  };
  
  return (
    &lt;div&gt;
      &lt;div&gt;Count: {count}&lt;/div&gt;
      &lt;button onClick={handleIncrement}&gt;Set to 10&lt;/button&gt;
      
      &lt;input value={name} onChange={handleNameChange} /&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<h3>å‡½æ•°å¼æ›´æ–°</h3>
<pre><code class="language-javascript">function FunctionalUpdate() {
  const [count, setCount] = useState(0);
  
  const increment = () =&gt; {
    // åŸºäºå‰ä¸€ä¸ªçŠ¶æ€æ›´æ–°
    setCount(prevCount =&gt; prevCount + 1);
  };
  
  const incrementTwice = () =&gt; {
    // å¤šæ¬¡æ›´æ–°ä¼šè¢«æ‰¹å¤„ç†ï¼Œå‡½æ•°å¼æ›´æ–°ç¡®ä¿æ­£ç¡®æ€§
    setCount(prevCount =&gt; prevCount + 1);
    setCount(prevCount =&gt; prevCount + 1);
  };
  
  const reset = () =&gt; {
    setCount(0);
  };
  
  return (
    &lt;div&gt;
      &lt;div&gt;Count: {count}&lt;/div&gt;
      &lt;button onClick={increment}&gt;+1&lt;/button&gt;
      &lt;button onClick={incrementTwice}&gt;+2&lt;/button&gt;
      &lt;button onClick={reset}&gt;Reset&lt;/button&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<h2>å¤æ‚çŠ¶æ€ç®¡ç†</h2>
<h3>å¯¹è±¡çŠ¶æ€æ›´æ–°</h3>
<pre><code class="language-javascript">function UserProfile() {
  const [user, setUser] = useState({
    name: &#39;John Doe&#39;,
    email: &#39;john@example.com&#39;,
    age: 30,
    preferences: {
      theme: &#39;light&#39;,
      notifications: true
    }
  });
  
  // æ›´æ–°é¡¶å±‚å±æ€§
  const updateName = (newName) =&gt; {
    setUser(prevUser =&gt; ({
      ...prevUser,
      name: newName
    }));
  };
  
  // æ›´æ–°åµŒå¥—å¯¹è±¡
  const updateTheme = (newTheme) =&gt; {
    setUser(prevUser =&gt; ({
      ...prevUser,
      preferences: {
        ...prevUser.preferences,
        theme: newTheme
      }
    }));
  };
  
  // æ‰¹é‡æ›´æ–°
  const updateUserInfo = (name, email) =&gt; {
    setUser(prevUser =&gt; ({
      ...prevUser,
      name,
      email
    }));
  };
  
  return (
    &lt;div&gt;
      &lt;h3&gt;User Profile&lt;/h3&gt;
      &lt;div&gt;Name: {user.name}&lt;/div&gt;
      &lt;div&gt;Email: {user.email}&lt;/div&gt;
      &lt;div&gt;Age: {user.age}&lt;/div&gt;
      &lt;div&gt;Theme: {user.preferences.theme}&lt;/div&gt;
      
      &lt;button onClick={() =&gt; updateName(&#39;Jane Doe&#39;)}&gt;
        Change Name
      &lt;/button&gt;
      
      &lt;button onClick={() =&gt; updateTheme(&#39;dark&#39;)}&gt;
        Switch to Dark Theme
      &lt;/button&gt;
      
      &lt;button onClick={() =&gt; updateUserInfo(&#39;Bob Smith&#39;, &#39;bob@example.com&#39;)}&gt;
        Update Info
      &lt;/button&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<h3>æ•°ç»„çŠ¶æ€ç®¡ç†</h3>
<pre><code class="language-javascript">function TodoList() {
  const [todos, setTodos] = useState([
    { id: 1, text: &#39;å­¦ä¹ React&#39;, completed: false },
    { id: 2, text: &#39;å†™æ–‡æ¡£&#39;, completed: true }
  ]);
  
  // æ·»åŠ æ–°é¡¹ç›®
  const addTodo = (text) =&gt; {
    const newTodo = {
      id: Date.now(),
      text,
      completed: false
    };
    setTodos(prevTodos =&gt; [...prevTodos, newTodo]);
  };
  
  // åˆ é™¤é¡¹ç›®
  const deleteTodo = (id) =&gt; {
    setTodos(prevTodos =&gt; prevTodos.filter(todo =&gt; todo.id !== id));
  };
  
  // åˆ‡æ¢å®ŒæˆçŠ¶æ€
  const toggleTodo = (id) =&gt; {
    setTodos(prevTodos =&gt;
      prevTodos.map(todo =&gt;
        todo.id === id 
          ? { ...todo, completed: !todo.completed }
          : todo
      )
    );
  };
  
  // ç¼–è¾‘é¡¹ç›®
  const editTodo = (id, newText) =&gt; {
    setTodos(prevTodos =&gt;
      prevTodos.map(todo =&gt;
        todo.id === id 
          ? { ...todo, text: newText }
          : todo
      )
    );
  };
  
  // æ¸…ç©ºæ‰€æœ‰å·²å®Œæˆé¡¹ç›®
  const clearCompleted = () =&gt; {
    setTodos(prevTodos =&gt; prevTodos.filter(todo =&gt; !todo.completed));
  };
  
  return (
    &lt;div&gt;
      &lt;h3&gt;Todo List ({todos.length} items)&lt;/h3&gt;
      
      &lt;button onClick={() =&gt; addTodo(&#39;New Todo&#39;)}&gt;
        Add Todo
      &lt;/button&gt;
      
      &lt;button onClick={clearCompleted}&gt;
        Clear Completed
      &lt;/button&gt;
      
      &lt;ul&gt;
        {todos.map(todo =&gt; (
          &lt;li key={todo.id}&gt;
            &lt;input
              type=&quot;checkbox&quot;
              checked={todo.completed}
              onChange={() =&gt; toggleTodo(todo.id)}
            /&gt;
            &lt;span style={{ 
              textDecoration: todo.completed ? &#39;line-through&#39; : &#39;none&#39; 
            }}&gt;
              {todo.text}
            &lt;/span&gt;
            &lt;button onClick={() =&gt; editTodo(todo.id, prompt(&#39;New text:&#39;, todo.text))}&gt;
              Edit
            &lt;/button&gt;
            &lt;button onClick={() =&gt; deleteTodo(todo.id)}&gt;
              Delete
            &lt;/button&gt;
          &lt;/li&gt;
        ))}
      &lt;/ul&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<h2>æƒ°æ€§åˆå§‹çŠ¶æ€</h2>
<h3>ä¸ºä»€ä¹ˆéœ€è¦æƒ°æ€§åˆå§‹åŒ–ï¼Ÿ</h3>
<pre><code class="language-javascript">// âŒ æ¯æ¬¡æ¸²æŸ“éƒ½ä¼šæ‰§è¡Œæ˜‚è´µçš„è®¡ç®—
function ExpensiveComponent() {
  const [data, setData] = useState(expensiveCalculation());
  
  return &lt;div&gt;{data}&lt;/div&gt;;
}

// âœ… åªåœ¨åˆå§‹åŒ–æ—¶æ‰§è¡Œä¸€æ¬¡
function ExpensiveComponent() {
  const [data, setData] = useState(() =&gt; expensiveCalculation());
  
  return &lt;div&gt;{data}&lt;/div&gt;;
}

function expensiveCalculation() {
  console.log(&#39;Performing expensive calculation...&#39;);
  let result = 0;
  for (let i = 0; i &lt; 1000000; i++) {
    result += i;
  }
  return result;
}
</code></pre>
<h3>å¸¸è§çš„æƒ°æ€§åˆå§‹åŒ–åœºæ™¯</h3>
<pre><code class="language-javascript">function ComponentWithLocalStorage() {
  // ä»localStorageè¯»å–åˆå§‹å€¼
  const [user, setUser] = useState(() =&gt; {
    const savedUser = localStorage.getItem(&#39;user&#39;);
    return savedUser ? JSON.parse(savedUser) : null;
  });
  
  // ä»URLå‚æ•°è¯»å–åˆå§‹å€¼
  const [searchQuery, setSearchQuery] = useState(() =&gt; {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get(&#39;q&#39;) || &#39;&#39;;
  });
  
  // å¤æ‚çš„åˆå§‹çŠ¶æ€è®¡ç®—
  const [gameState, setGameState] = useState(() =&gt; {
    return {
      board: Array(9).fill(null),
      currentPlayer: &#39;X&#39;,
      winner: null,
      gameId: Math.random().toString(36).substr(2, 9)
    };
  });
  
  return (
    &lt;div&gt;
      &lt;div&gt;User: {user?.name || &#39;Not logged in&#39;}&lt;/div&gt;
      &lt;div&gt;Search: {searchQuery}&lt;/div&gt;
      &lt;div&gt;Game ID: {gameState.gameId}&lt;/div&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<h2>å¤šä¸ªçŠ¶æ€å˜é‡</h2>
<h3>ä½•æ—¶åˆ†ç¦»çŠ¶æ€</h3>
<pre><code class="language-javascript">function UserForm() {
  // âœ… ç›¸å…³ä½†ç‹¬ç«‹çš„çŠ¶æ€å¯ä»¥åˆ†å¼€
  const [name, setName] = useState(&#39;&#39;);
  const [email, setEmail] = useState(&#39;&#39;);
  const [age, setAge] = useState(0);
  
  // âœ… UIçŠ¶æ€é€šå¸¸å•ç‹¬ç®¡ç†
  const [isLoading, setIsLoading] = useState(false);
  const [error, setError] = useState(null);
  const [showValidation, setShowValidation] = useState(false);
  
  const handleSubmit = async (e) =&gt; {
    e.preventDefault();
    setIsLoading(true);
    setError(null);
    
    try {
      await submitUser({ name, email, age });
      // æˆåŠŸå¤„ç†
    } catch (err) {
      setError(err.message);
    } finally {
      setIsLoading(false);
    }
  };
  
  return (
    &lt;form onSubmit={handleSubmit}&gt;
      &lt;input 
        value={name}
        onChange={e =&gt; setName(e.target.value)}
        placeholder=&quot;Name&quot;
      /&gt;
      &lt;input 
        value={email}
        onChange={e =&gt; setEmail(e.target.value)}
        placeholder=&quot;Email&quot;
      /&gt;
      &lt;input 
        type=&quot;number&quot;
        value={age}
        onChange={e =&gt; setAge(parseInt(e.target.value))}
        placeholder=&quot;Age&quot;
      /&gt;
      
      {error &amp;&amp; &lt;div className=&quot;error&quot;&gt;{error}&lt;/div&gt;}
      
      &lt;button type=&quot;submit&quot; disabled={isLoading}&gt;
        {isLoading ? &#39;Submitting...&#39; : &#39;Submit&#39;}
      &lt;/button&gt;
    &lt;/form&gt;
  );
}
</code></pre>
<h3>ä½•æ—¶åˆå¹¶çŠ¶æ€</h3>
<pre><code class="language-javascript">function UserForm() {
  // âœ… å¯†åˆ‡ç›¸å…³çš„çŠ¶æ€å¯ä»¥åˆå¹¶
  const [formData, setFormData] = useState({
    name: &#39;&#39;,
    email: &#39;&#39;,
    age: 0
  });
  
  // âœ… UIçŠ¶æ€ä¹Ÿå¯ä»¥åˆå¹¶
  const [ui, setUi] = useState({
    isLoading: false,
    error: null,
    showValidation: false
  });
  
  const updateFormData = (field, value) =&gt; {
    setFormData(prev =&gt; ({
      ...prev,
      [field]: value
    }));
  };
  
  const updateUi = (updates) =&gt; {
    setUi(prev =&gt; ({
      ...prev,
      ...updates
    }));
  };
  
  return (
    &lt;form&gt;
      &lt;input 
        value={formData.name}
        onChange={e =&gt; updateFormData(&#39;name&#39;, e.target.value)}
        placeholder=&quot;Name&quot;
      /&gt;
      
      {ui.error &amp;&amp; &lt;div className=&quot;error&quot;&gt;{ui.error}&lt;/div&gt;}
      
      &lt;button disabled={ui.isLoading}&gt;
        {ui.isLoading ? &#39;Submitting...&#39; : &#39;Submit&#39;}
      &lt;/button&gt;
    &lt;/form&gt;
  );
}
</code></pre>
<h2>å¸¸è§æ¨¡å¼å’ŒæŠ€å·§</h2>
<h3>çŠ¶æ€é‡ç½®</h3>
<pre><code class="language-javascript">function ResettableCounter() {
  const [count, setCount] = useState(0);
  const [initialValue] = useState(0); // ä¿å­˜åˆå§‹å€¼
  
  const reset = () =&gt; {
    setCount(initialValue);
  };
  
  // æˆ–è€…ä½¿ç”¨useCallbackè®°ä½é‡ç½®å‡½æ•°
  const resetToValue = useCallback((value) =&gt; {
    setCount(value);
  }, []);
  
  return (
    &lt;div&gt;
      &lt;div&gt;Count: {count}&lt;/div&gt;
      &lt;button onClick={() =&gt; setCount(count + 1)}&gt;+1&lt;/button&gt;
      &lt;button onClick={reset}&gt;Reset&lt;/button&gt;
      &lt;button onClick={() =&gt; resetToValue(10)}&gt;Reset to 10&lt;/button&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<h3>çŠ¶æ€æŒä¹…åŒ–</h3>
<pre><code class="language-javascript">function PersistentCounter() {
  const [count, setCount] = useState(() =&gt; {
    const saved = localStorage.getItem(&#39;count&#39;);
    return saved ? parseInt(saved) : 0;
  });
  
  // æ¯æ¬¡countå˜åŒ–æ—¶ä¿å­˜åˆ°localStorage
  useEffect(() =&gt; {
    localStorage.setItem(&#39;count&#39;, count.toString());
  }, [count]);
  
  return (
    &lt;div&gt;
      &lt;div&gt;Count: {count}&lt;/div&gt;
      &lt;button onClick={() =&gt; setCount(count + 1)}&gt;+1&lt;/button&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<h3>çŠ¶æ€æ´¾ç”Ÿ</h3>
<pre><code class="language-javascript">function DerivedState() {
  const [items, setItems] = useState([
    { id: 1, name: &#39;Apple&#39;, price: 1.2, quantity: 5 },
    { id: 2, name: &#39;Banana&#39;, price: 0.8, quantity: 3 },
    { id: 3, name: &#39;Orange&#39;, price: 1.5, quantity: 2 }
  ]);
  
  // ä»çŠ¶æ€æ´¾ç”Ÿçš„å€¼
  const totalItems = items.reduce((sum, item) =&gt; sum + item.quantity, 0);
  const totalValue = items.reduce((sum, item) =&gt; sum + (item.price * item.quantity), 0);
  const averagePrice = totalValue / totalItems;
  
  const updateQuantity = (id, newQuantity) =&gt; {
    setItems(prevItems =&gt;
      prevItems.map(item =&gt;
        item.id === id 
          ? { ...item, quantity: newQuantity }
          : item
      )
    );
  };
  
  return (
    &lt;div&gt;
      &lt;h3&gt;Shopping Cart&lt;/h3&gt;
      &lt;div&gt;Total Items: {totalItems}&lt;/div&gt;
      &lt;div&gt;Total Value: ${totalValue.toFixed(2)}&lt;/div&gt;
      &lt;div&gt;Average Price: ${averagePrice.toFixed(2)}&lt;/div&gt;
      
      {items.map(item =&gt; (
        &lt;div key={item.id}&gt;
          &lt;span&gt;{item.name} - ${item.price} x {item.quantity}&lt;/span&gt;
          &lt;button 
            onClick={() =&gt; updateQuantity(item.id, item.quantity + 1)}
          &gt;
            +
          &lt;/button&gt;
          &lt;button 
            onClick={() =&gt; updateQuantity(item.id, Math.max(0, item.quantity - 1))}
          &gt;
            -
          &lt;/button&gt;
        &lt;/div&gt;
      ))}
    &lt;/div&gt;
  );
}
</code></pre>
<h2>æ€§èƒ½ä¼˜åŒ–</h2>
<h3>é¿å…ä¸å¿…è¦çš„å¯¹è±¡åˆ›å»º</h3>
<pre><code class="language-javascript">function OptimizedComponent() {
  const [user, setUser] = useState({
    name: &#39;John&#39;,
    email: &#39;john@example.com&#39;
  });
  
  // âŒ æ¯æ¬¡æ¸²æŸ“éƒ½åˆ›å»ºæ–°å¯¹è±¡
  const style = {
    color: &#39;red&#39;,
    fontSize: &#39;16px&#39;
  };
  
  // âœ… å°†æ ·å¼å¯¹è±¡ç§»åˆ°ç»„ä»¶å¤–éƒ¨æˆ–ä½¿ç”¨useMemo
  const memoizedStyle = useMemo(() =&gt; ({
    color: &#39;red&#39;,
    fontSize: &#39;16px&#39;
  }), []);
  
  // âœ… æˆ–è€…å®šä¹‰åœ¨ç»„ä»¶å¤–éƒ¨
  return (
    &lt;div style={memoizedStyle}&gt;
      {user.name}
    &lt;/div&gt;
  );
}

// åœ¨ç»„ä»¶å¤–éƒ¨å®šä¹‰å¸¸é‡
const BUTTON_STYLES = {
  primary: { backgroundColor: &#39;#007bff&#39;, color: &#39;white&#39; },
  secondary: { backgroundColor: &#39;#6c757d&#39;, color: &#39;white&#39; }
};
</code></pre>
<h3>æ‰¹é‡çŠ¶æ€æ›´æ–°</h3>
<pre><code class="language-javascript">function BatchUpdates() {
  const [count, setCount] = useState(0);
  const [name, setName] = useState(&#39;&#39;);
  
  const handleMultipleUpdates = () =&gt; {
    // React 18+ ä¼šè‡ªåŠ¨æ‰¹å¤„ç†è¿™äº›æ›´æ–°
    setCount(c =&gt; c + 1);
    setName(&#39;Updated&#39;);
    
    // åœ¨äº‹ä»¶å¤„ç†å™¨ä¸­ï¼Œè¿™äº›æ›´æ–°ä¼šè¢«æ‰¹å¤„ç†æˆä¸€æ¬¡é‡æ–°æ¸²æŸ“
  };
  
  const handleAsyncUpdates = async () =&gt; {
    await someAsyncOperation();
    
    // React 18+ ä¹Ÿä¼šæ‰¹å¤„ç†å¼‚æ­¥æ›´æ–°
    setCount(c =&gt; c + 1);
    setName(&#39;Async Updated&#39;);
  };
  
  return (
    &lt;div&gt;
      &lt;div&gt;Count: {count}&lt;/div&gt;
      &lt;div&gt;Name: {name}&lt;/div&gt;
      &lt;button onClick={handleMultipleUpdates}&gt;
        Update Both
      &lt;/button&gt;
      &lt;button onClick={handleAsyncUpdates}&gt;
        Async Update
      &lt;/button&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<h2>å¸¸è§é”™è¯¯å’Œè§£å†³æ–¹æ¡ˆ</h2>
<h3>é”™è¯¯1ï¼šç›´æ¥ä¿®æ”¹çŠ¶æ€</h3>
<pre><code class="language-javascript">// âŒ é”™è¯¯ï¼šç›´æ¥ä¿®æ”¹çŠ¶æ€å¯¹è±¡
function WrongWay() {
  const [user, setUser] = useState({ name: &#39;John&#39;, age: 30 });
  
  const updateAge = () =&gt; {
    user.age = 31; // é”™è¯¯ï¼ç›´æ¥ä¿®æ”¹äº†çŠ¶æ€
    setUser(user); // ä¸ä¼šè§¦å‘é‡æ–°æ¸²æŸ“
  };
  
  return &lt;button onClick={updateAge}&gt;Update Age&lt;/button&gt;;
}

// âœ… æ­£ç¡®ï¼šåˆ›å»ºæ–°å¯¹è±¡
function RightWay() {
  const [user, setUser] = useState({ name: &#39;John&#39;, age: 30 });
  
  const updateAge = () =&gt; {
    setUser(prevUser =&gt; ({
      ...prevUser,
      age: 31
    }));
  };
  
  return &lt;button onClick={updateAge}&gt;Update Age&lt;/button&gt;;
}
</code></pre>
<h3>é”™è¯¯2ï¼šé—­åŒ…é—®é¢˜</h3>
<pre><code class="language-javascript">// âŒ å¯èƒ½çš„é—®é¢˜ï¼šä½¿ç”¨è¿‡æ—¶çš„çŠ¶æ€å€¼
function ClosureProblem() {
  const [count, setCount] = useState(0);
  
  useEffect(() =&gt; {
    const interval = setInterval(() =&gt; {
      setCount(count + 1); // countå§‹ç»ˆæ˜¯0
    }, 1000);
    
    return () =&gt; clearInterval(interval);
  }, []); // ç©ºä¾èµ–æ•°ç»„
  
  return &lt;div&gt;Count: {count}&lt;/div&gt;;
}

// âœ… è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨å‡½æ•°å¼æ›´æ–°
function ClosureSolution() {
  const [count, setCount] = useState(0);
  
  useEffect(() =&gt; {
    const interval = setInterval(() =&gt; {
      setCount(prevCount =&gt; prevCount + 1);
    }, 1000);
    
    return () =&gt; clearInterval(interval);
  }, []);
  
  return &lt;div&gt;Count: {count}&lt;/div&gt;;
}
</code></pre>
<h3>é”™è¯¯3ï¼šå¼‚æ­¥çŠ¶æ€æ›´æ–°çš„æ—¶åºé—®é¢˜</h3>
<pre><code class="language-javascript">// âŒ å¯èƒ½çš„ç«æ€æ¡ä»¶
function AsyncProblem() {
  const [data, setData] = useState(null);
  const [userId, setUserId] = useState(1);
  
  useEffect(() =&gt; {
    fetchUser(userId).then(user =&gt; {
      setData(user); // å¯èƒ½è®¾ç½®äº†é”™è¯¯ç”¨æˆ·çš„æ•°æ®
    });
  }, [userId]);
  
  return &lt;div&gt;{data?.name}&lt;/div&gt;;
}

// âœ… è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨æ¸…ç†å‡½æ•°æˆ–AbortController
function AsyncSolution() {
  const [data, setData] = useState(null);
  const [userId, setUserId] = useState(1);
  
  useEffect(() =&gt; {
    let cancelled = false;
    
    fetchUser(userId).then(user =&gt; {
      if (!cancelled) {
        setData(user);
      }
    });
    
    return () =&gt; {
      cancelled = true;
    };
  }, [userId]);
  
  return &lt;div&gt;{data?.name}&lt;/div&gt;;
}
</code></pre>
<h2>TypeScript ä½¿ç”¨</h2>
<h3>åŸºæœ¬ç±»å‹å®šä¹‰</h3>
<pre><code class="language-typescript">interface User {
  id: number;
  name: string;
  email: string;
  age?: number;
}

function TypeScriptExample() {
  // æ˜ç¡®æŒ‡å®šç±»å‹
  const [user, setUser] = useState&lt;User | null&gt;(null);
  const [users, setUsers] = useState&lt;User[]&gt;([]);
  const [count, setCount] = useState&lt;number&gt;(0);
  
  // è”åˆç±»å‹
  const [status, setStatus] = useState&lt;&#39;loading&#39; | &#39;success&#39; | &#39;error&#39;&gt;(&#39;loading&#39;);
  
  // å¤æ‚å¯¹è±¡ç±»å‹
  const [formState, setFormState] = useState&lt;{
    values: Record&lt;string, string&gt;;
    errors: Record&lt;string, string&gt;;
    touched: Record&lt;string, boolean&gt;;
  }&gt;({
    values: {},
    errors: {},
    touched: {}
  });
  
  return (
    &lt;div&gt;
      &lt;div&gt;User: {user?.name}&lt;/div&gt;
      &lt;div&gt;Users count: {users.length}&lt;/div&gt;
      &lt;div&gt;Count: {count}&lt;/div&gt;
      &lt;div&gt;Status: {status}&lt;/div&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<h2>æœ€ä½³å®è·µæ€»ç»“</h2>
<ol>
<li><strong>ä½¿ç”¨å‡½æ•°å¼æ›´æ–°</strong>ï¼šå½“æ–°çŠ¶æ€ä¾èµ–äºå‰ä¸€ä¸ªçŠ¶æ€æ—¶</li>
<li><strong>ä¿æŒçŠ¶æ€ç»“æ„ç®€å•</strong>ï¼šé¿å…è¿‡äºåµŒå¥—çš„å¯¹è±¡</li>
<li><strong>ä½¿ç”¨æƒ°æ€§åˆå§‹åŒ–</strong>ï¼šå¯¹äºæ˜‚è´µçš„åˆå§‹å€¼è®¡ç®—</li>
<li><strong>æ­£ç¡®åˆ†ç»„çŠ¶æ€</strong>ï¼šç›¸å…³çŠ¶æ€å¯ä»¥åˆå¹¶ï¼Œç‹¬ç«‹çŠ¶æ€åº”è¯¥åˆ†å¼€</li>
<li><strong>é¿å…ç›´æ¥ä¿®æ”¹çŠ¶æ€</strong>ï¼šå§‹ç»ˆåˆ›å»ºæ–°çš„çŠ¶æ€å¯¹è±¡</li>
<li><strong>è€ƒè™‘æ€§èƒ½å½±å“</strong>ï¼šé¿å…åœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­åˆ›å»ºæ–°å¯¹è±¡</li>
<li><strong>ä½¿ç”¨TypeScript</strong>ï¼šè·å¾—æ›´å¥½çš„ç±»å‹å®‰å…¨æ€§</li>
</ol>
<h2>ä¸‹ä¸€æ­¥</h2>
<p>å­¦ä¹ å®ŒuseStateåï¼Œå»ºè®®ç»§ç»­å­¦ä¹ ï¼š</p>
<ol>
<li><a href="./11-useEffect.md">useEffect</a> - å¤„ç†å‰¯ä½œç”¨</li>
<li><a href="./12-useContext.md">useContext</a> - è·¨ç»„ä»¶çŠ¶æ€å…±äº«</li>
<li><a href="./13-useReducer.md">useReducer</a> - å¤æ‚çŠ¶æ€ç®¡ç†</li>
</ol>

          </div>

          <!-- æ–‡æ¡£å¯¼èˆª -->
          <div class="doc-navigation">
            
              <a href="09-Hooksæ¦‚è¿°.html" class="nav-btn prev-btn">
                <span class="nav-icon">â†</span>
                <div class="nav-text">
                  <span class="nav-label">ä¸Šä¸€ç¯‡</span>
                  <span class="nav-title">Hooksæ¦‚è¿°</span>
                </div>
              </a>
            
            
            
              <a href="11-useEffect.html" class="nav-btn next-btn">
                <div class="nav-text">
                  <span class="nav-label">ä¸‹ä¸€ç¯‡</span>
                  <span class="nav-title">useEffect</span>
                </div>
                <span class="nav-icon">â†’</span>
              </a>
            
          </div>
        </article>
      </main>
    </div>

    <!-- è¿”å›é¡¶éƒ¨æŒ‰é’® -->
    <button class="back-to-top" id="backToTop" onclick="scrollToTop()">
      <span>â†‘</span>
    </button>

    <!-- åº•éƒ¨ -->
    <footer class="footer">
      <div class="footer-content">
        <p>&copy; 2024 React ä¸­æ–‡æ–‡æ¡£. åŸºäº React 18.x æ„å»º</p>
        <p>Made with â¤ï¸ by Reactä¸­æ–‡ç¤¾åŒº</p>
      </div>
    </footer>
  </div>

  <script src="assets/script.js"></script>
</body>
</html>