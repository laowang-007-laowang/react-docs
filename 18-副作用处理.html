<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>å‰¯ä½œç”¨å¤„ç† - React ä¸­æ–‡æ–‡æ¡£</title>
  <meta name="description" content="ä»å…¥é—¨åˆ°ç²¾é€šï¼Œå…¨é¢æŒæ¡Reactå¼€å‘æŠ€èƒ½">
  <link rel="stylesheet" href="assets/style.css">
  <link rel="stylesheet" href="assets/highlight.css">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>âš›ï¸</text></svg>">
</head>
<body>
  <div class="container">
    <!-- é¡¶éƒ¨å¯¼èˆª -->
    <header class="header">
      <div class="header-content">
        <div class="logo">
          <span class="logo-icon">âš›ï¸</span>
          <div class="logo-text">
            <h1>React ä¸­æ–‡æ–‡æ¡£</h1>
            <p>ç°ä»£åŒ–çš„Reactå­¦ä¹ æŒ‡å—</p>
          </div>
        </div>
        <nav class="header-nav">
          <a href="index.html" class="nav-link">é¦–é¡µ</a>
          <a href="#" class="nav-link" onclick="toggleSidebar()">ç›®å½•</a>
          <a href="https://github.com/facebook/react" target="_blank" class="nav-link">GitHub</a>
        </nav>
      </div>
    </header>

    <div class="main-layout">
      <!-- ä¾§è¾¹æ  -->
      <aside class="sidebar" id="sidebar">
        <div class="sidebar-content">
          <div class="search-box">
            <input type="text" placeholder="æœç´¢æ–‡æ¡£..." id="searchInput" onkeyup="searchDocs()">
            <span class="search-icon">ğŸ”</span>
          </div>
          <nav class="doc-nav">
            
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ“š</span>
          åŸºç¡€æ¦‚å¿µ
        </h3>
        <ul class="category-docs">
          <li><a href="01-Reactç®€ä»‹.html" class="doc-link">Reactç®€ä»‹</a></li><li><a href="02-ç¯å¢ƒæ­å»º.html" class="doc-link">ç¯å¢ƒæ­å»º</a></li><li><a href="03-JSXè¯­æ³•.html" class="doc-link">JSXè¯­æ³•</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ§©</span>
          ç»„ä»¶å¼€å‘
        </h3>
        <ul class="category-docs">
          <li><a href="04-ç»„ä»¶åŸºç¡€.html" class="doc-link">ç»„ä»¶åŸºç¡€</a></li><li><a href="05-Propsä¸State.html" class="doc-link">Propsä¸State</a></li><li><a href="06-äº‹ä»¶å¤„ç†.html" class="doc-link">äº‹ä»¶å¤„ç†</a></li><li><a href="07-æ¡ä»¶æ¸²æŸ“.html" class="doc-link">æ¡ä»¶æ¸²æŸ“</a></li><li><a href="08-åˆ—è¡¨æ¸²æŸ“.html" class="doc-link">åˆ—è¡¨æ¸²æŸ“</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ£</span>
          Hooks API
        </h3>
        <ul class="category-docs">
          <li><a href="09-Hooksæ¦‚è¿°.html" class="doc-link">Hooksæ¦‚è¿°</a></li><li><a href="10-useState.html" class="doc-link">useState</a></li><li><a href="11-useEffect.html" class="doc-link">useEffect</a></li><li><a href="12-useContext.html" class="doc-link">useContext</a></li><li><a href="13-useReducer.html" class="doc-link">useReducer</a></li><li><a href="14-useMemoå’ŒuseCallback.html" class="doc-link">useMemoå’ŒuseCallback</a></li><li><a href="15-useRef.html" class="doc-link">useRef</a></li><li><a href="16-è‡ªå®šä¹‰Hooks.html" class="doc-link">è‡ªå®šä¹‰Hooks</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ”„</span>
          ç”Ÿå‘½å‘¨æœŸ
        </h3>
        <ul class="category-docs">
          <li><a href="17-ç”Ÿå‘½å‘¨æœŸæ–¹æ³•.html" class="doc-link">ç”Ÿå‘½å‘¨æœŸæ–¹æ³•</a></li><li><a href="18-å‰¯ä½œç”¨å¤„ç†.html" class="doc-link">å‰¯ä½œç”¨å¤„ç†</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ¨</span>
          æ ·å¼ä¸UI
        </h3>
        <ul class="category-docs">
          <li><a href="19-æ ·å¼å¤„ç†.html" class="doc-link">æ ·å¼å¤„ç†</a></li><li><a href="20-åŠ¨ç”»æ•ˆæœ.html" class="doc-link">åŠ¨ç”»æ•ˆæœ</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ—ºï¸</span>
          è·¯ç”±ç®¡ç†
        </h3>
        <ul class="category-docs">
          <li><a href="21-React-Router.html" class="doc-link">React-Router</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ“¦</span>
          çŠ¶æ€ç®¡ç†
        </h3>
        <ul class="category-docs">
          <li><a href="22-Context-API.html" class="doc-link">Context-API</a></li><li><a href="23-Reduxé›†æˆ.html" class="doc-link">Reduxé›†æˆ</a></li><li><a href="24-ZustandçŠ¶æ€ç®¡ç†.html" class="doc-link">ZustandçŠ¶æ€ç®¡ç†</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸš€</span>
          æ€§èƒ½ä¼˜åŒ–
        </h3>
        <ul class="category-docs">
          <li><a href="25-æ€§èƒ½ä¼˜åŒ–æŠ€å·§.html" class="doc-link">æ€§èƒ½ä¼˜åŒ–æŠ€å·§</a></li><li><a href="26-ä»£ç åˆ†å‰².html" class="doc-link">ä»£ç åˆ†å‰²</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ§ª</span>
          æµ‹è¯•
        </h3>
        <ul class="category-docs">
          <li><a href="27-å•å…ƒæµ‹è¯•.html" class="doc-link">å•å…ƒæµ‹è¯•</a></li><li><a href="28-é›†æˆæµ‹è¯•.html" class="doc-link">é›†æˆæµ‹è¯•</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ—ï¸</span>
          æ„å»ºä¸éƒ¨ç½²
        </h3>
        <ul class="category-docs">
          <li><a href="29-é¡¹ç›®æ„å»º.html" class="doc-link">é¡¹ç›®æ„å»º</a></li><li><a href="30-ç”Ÿäº§éƒ¨ç½².html" class="doc-link">ç”Ÿäº§éƒ¨ç½²</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ› ï¸</span>
          å¼€å‘å·¥å…·
        </h3>
        <ul class="category-docs">
          <li><a href="31-å¼€å‘è€…å·¥å…·.html" class="doc-link">å¼€å‘è€…å·¥å…·</a></li><li><a href="32-è°ƒè¯•æŠ€å·§.html" class="doc-link">è°ƒè¯•æŠ€å·§</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ“–</span>
          APIå‚è€ƒ
        </h3>
        <ul class="category-docs">
          <li><a href="33-React-APIå®Œæ•´å‚è€ƒ.html" class="doc-link">React-APIå®Œæ•´å‚è€ƒ</a></li><li><a href="34-DOMå…ƒç´ å±æ€§.html" class="doc-link">DOMå…ƒç´ å±æ€§</a></li><li><a href="35-åˆæˆäº‹ä»¶.html" class="doc-link">åˆæˆäº‹ä»¶</a></li><li><a href="React-Hookså®Œæ•´å‚è€ƒ.html" class="doc-link">React-Hookså®Œæ•´å‚è€ƒ</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ’¡</span>
          æœ€ä½³å®è·µ
        </h3>
        <ul class="category-docs">
          <li><a href="36-ç¼–ç è§„èŒƒ.html" class="doc-link">ç¼–ç è§„èŒƒ</a></li><li><a href="37-é¡¹ç›®æ¶æ„.html" class="doc-link">é¡¹ç›®æ¶æ„</a></li><li><a href="38-å¸¸è§é—®é¢˜.html" class="doc-link">å¸¸è§é—®é¢˜</a></li>
        </ul>
      </div>
          </nav>
        </div>
      </aside>

      <!-- ä¸»å†…å®¹åŒº -->
      <main class="content">
        <article class="doc-article">
          <div class="doc-header">
            <div class="breadcrumb">
              <a href="index.html">é¦–é¡µ</a>
              <span class="separator">></span>
              <span class="current">å‰¯ä½œç”¨å¤„ç†</span>
            </div>
            <h1 class="doc-title">å‰¯ä½œç”¨å¤„ç†</h1>
            <div class="doc-meta">
              <span class="category" style="background: #43e97b">
                ğŸ”„ ç”Ÿå‘½å‘¨æœŸ
              </span>
            </div>
          </div>
          
          <div class="doc-content">
            <h1>18-å‰¯ä½œç”¨å¤„ç†</h1>
<p>å‰¯ä½œç”¨(Side Effects)æ˜¯æŒ‡ç»„ä»¶æ¸²æŸ“è¿‡ç¨‹ä¸­äº§ç”Ÿçš„ã€å½±å“ç»„ä»¶å¤–éƒ¨ç¯å¢ƒçš„æ“ä½œã€‚åœ¨Reactä¸­ï¼ŒuseEffectæ˜¯å¤„ç†å‰¯ä½œç”¨çš„ä¸»è¦å·¥å…·ï¼Œå®ƒå¯ä»¥è®©ä½ åœ¨å‡½æ•°ç»„ä»¶ä¸­æ‰§è¡Œå‰¯ä½œç”¨æ“ä½œã€‚</p>
<h2>ä»€ä¹ˆæ˜¯å‰¯ä½œç”¨</h2>
<p>å‰¯ä½œç”¨åŒ…æ‹¬ä½†ä¸é™äºï¼š</p>
<ul>
<li>æ•°æ®è·å–(APIè°ƒç”¨)</li>
<li>è®¾ç½®è®¢é˜…</li>
<li>æ‰‹åŠ¨æ›´æ”¹DOM</li>
<li>å®šæ—¶å™¨</li>
<li>äº‹ä»¶ç›‘å¬å™¨</li>
<li>æ¸…ç†èµ„æº</li>
</ul>
<h2>useEffectåŸºç¡€ç”¨æ³•</h2>
<h3>åŸºæœ¬è¯­æ³•</h3>
<pre><code class="language-jsx">import React, { useState, useEffect } from &#39;react&#39;;

function Example() {
  const [count, setCount] = useState(0);

  // æ¯æ¬¡æ¸²æŸ“åéƒ½ä¼šæ‰§è¡Œ
  useEffect(() =&gt; {
    document.title = `æ‚¨ç‚¹å‡»äº† ${count} æ¬¡`;
  });

  return (
    &lt;div&gt;
      &lt;p&gt;æ‚¨ç‚¹å‡»äº† {count} æ¬¡&lt;/p&gt;
      &lt;button onClick={() =&gt; setCount(count + 1)}&gt;
        ç‚¹å‡»æˆ‘
      &lt;/button&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<h3>ä¾èµ–æ•°ç»„</h3>
<pre><code class="language-jsx">function Example() {
  const [count, setCount] = useState(0);
  const [name, setName] = useState(&#39;&#39;);

  // åªåœ¨mountæ—¶æ‰§è¡Œä¸€æ¬¡
  useEffect(() =&gt; {
    console.log(&#39;ç»„ä»¶æŒ‚è½½&#39;);
  }, []); // ç©ºä¾èµ–æ•°ç»„

  // åªåœ¨countå˜åŒ–æ—¶æ‰§è¡Œ
  useEffect(() =&gt; {
    document.title = `è®¡æ•°: ${count}`;
  }, [count]); // countä½œä¸ºä¾èµ–

  // åœ¨countæˆ–nameå˜åŒ–æ—¶æ‰§è¡Œ
  useEffect(() =&gt; {
    console.log(&#39;countæˆ–nameå‘ç”Ÿå˜åŒ–&#39;);
  }, [count, name]); // å¤šä¸ªä¾èµ–

  return (
    &lt;div&gt;
      &lt;p&gt;è®¡æ•°: {count}&lt;/p&gt;
      &lt;button onClick={() =&gt; setCount(count + 1)}&gt;å¢åŠ è®¡æ•°&lt;/button&gt;
      
      &lt;input 
        value={name} 
        onChange={(e) =&gt; setName(e.target.value)} 
        placeholder=&quot;è¾“å…¥å§“å&quot;
      /&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<h2>æ¸…ç†å‰¯ä½œç”¨</h2>
<h3>åŸºç¡€æ¸…ç†</h3>
<pre><code class="language-jsx">function Timer() {
  const [seconds, setSeconds] = useState(0);

  useEffect(() =&gt; {
    // è®¾ç½®å®šæ—¶å™¨
    const interval = setInterval(() =&gt; {
      setSeconds(prevSeconds =&gt; prevSeconds + 1);
    }, 1000);

    // æ¸…ç†å‡½æ•°
    return () =&gt; {
      clearInterval(interval);
    };
  }, []); // ç©ºä¾èµ–ï¼Œåªåœ¨mount/unmountæ—¶æ‰§è¡Œ

  return (
    &lt;div&gt;
      &lt;p&gt;å·²è¿è¡Œ {seconds} ç§’&lt;/p&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<h3>äº‹ä»¶ç›‘å¬å™¨æ¸…ç†</h3>
<pre><code class="language-jsx">function WindowSizeTracker() {
  const [windowSize, setWindowSize] = useState({
    width: window.innerWidth,
    height: window.innerHeight
  });

  useEffect(() =&gt; {
    const handleResize = () =&gt; {
      setWindowSize({
        width: window.innerWidth,
        height: window.innerHeight
      });
    };

    // æ·»åŠ äº‹ä»¶ç›‘å¬
    window.addEventListener(&#39;resize&#39;, handleResize);

    // æ¸…ç†äº‹ä»¶ç›‘å¬
    return () =&gt; {
      window.removeEventListener(&#39;resize&#39;, handleResize);
    };
  }, []); // ç©ºä¾èµ–

  return (
    &lt;div&gt;
      &lt;p&gt;çª—å£å¤§å°: {windowSize.width} x {windowSize.height}&lt;/p&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<h2>æ•°æ®è·å–</h2>
<h3>åŸºç¡€æ•°æ®è·å–</h3>
<pre><code class="language-jsx">function UserProfile({ userId }) {
  const [user, setUser] = useState(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);

  useEffect(() =&gt; {
    const fetchUser = async () =&gt; {
      try {
        setLoading(true);
        setError(null);
        
        const response = await fetch(`/api/users/${userId}`);
        if (!response.ok) {
          throw new Error(&#39;ç”¨æˆ·è·å–å¤±è´¥&#39;);
        }
        
        const userData = await response.json();
        setUser(userData);
      } catch (err) {
        setError(err.message);
      } finally {
        setLoading(false);
      }
    };

    fetchUser();
  }, [userId]); // userIdå˜åŒ–æ—¶é‡æ–°è·å–

  if (loading) return &lt;div&gt;åŠ è½½ä¸­...&lt;/div&gt;;
  if (error) return &lt;div&gt;é”™è¯¯: {error}&lt;/div&gt;;
  if (!user) return &lt;div&gt;ç”¨æˆ·ä¸å­˜åœ¨&lt;/div&gt;;

  return (
    &lt;div&gt;
      &lt;h1&gt;{user.name}&lt;/h1&gt;
      &lt;p&gt;{user.email}&lt;/p&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<h3>å–æ¶ˆç½‘ç»œè¯·æ±‚</h3>
<pre><code class="language-jsx">function DataFetcher({ url }) {
  const [data, setData] = useState(null);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);

  useEffect(() =&gt; {
    const abortController = new AbortController();

    const fetchData = async () =&gt; {
      try {
        setLoading(true);
        setError(null);

        const response = await fetch(url, {
          signal: abortController.signal
        });

        if (!response.ok) {
          throw new Error(`HTTP error! status: ${response.status}`);
        }

        const result = await response.json();
        setData(result);
      } catch (err) {
        if (err.name !== &#39;AbortError&#39;) {
          setError(err.message);
        }
      } finally {
        setLoading(false);
      }
    };

    fetchData();

    // æ¸…ç†ï¼šå–æ¶ˆè¯·æ±‚
    return () =&gt; {
      abortController.abort();
    };
  }, [url]);

  return (
    &lt;div&gt;
      {loading &amp;&amp; &lt;p&gt;åŠ è½½ä¸­...&lt;/p&gt;}
      {error &amp;&amp; &lt;p&gt;é”™è¯¯: {error}&lt;/p&gt;}
      {data &amp;&amp; &lt;pre&gt;{JSON.stringify(data, null, 2)}&lt;/pre&gt;}
    &lt;/div&gt;
  );
}
</code></pre>
<h2>è®¢é˜…å’ŒWebSocket</h2>
<h3>WebSocketè¿æ¥</h3>
<pre><code class="language-jsx">function ChatComponent({ roomId }) {
  const [messages, setMessages] = useState([]);
  const [connectionStatus, setConnectionStatus] = useState(&#39;Disconnected&#39;);

  useEffect(() =&gt; {
    const websocket = new WebSocket(`ws://localhost:8080/chat/${roomId}`);

    websocket.onopen = () =&gt; {
      setConnectionStatus(&#39;Connected&#39;);
    };

    websocket.onmessage = (event) =&gt; {
      const message = JSON.parse(event.data);
      setMessages(prev =&gt; [...prev, message]);
    };

    websocket.onclose = () =&gt; {
      setConnectionStatus(&#39;Disconnected&#39;);
    };

    websocket.onerror = (error) =&gt; {
      console.error(&#39;WebSocketé”™è¯¯:&#39;, error);
      setConnectionStatus(&#39;Error&#39;);
    };

    // æ¸…ç†WebSocketè¿æ¥
    return () =&gt; {
      websocket.close();
    };
  }, [roomId]); // roomIdå˜åŒ–æ—¶é‡æ–°è¿æ¥

  return (
    &lt;div&gt;
      &lt;p&gt;è¿æ¥çŠ¶æ€: {connectionStatus}&lt;/p&gt;
      &lt;div&gt;
        {messages.map((message, index) =&gt; (
          &lt;div key={index}&gt;
            &lt;strong&gt;{message.user}:&lt;/strong&gt; {message.text}
          &lt;/div&gt;
        ))}
      &lt;/div&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<h3>äº‹ä»¶è®¢é˜…</h3>
<pre><code class="language-jsx">function NotificationListener() {
  const [notifications, setNotifications] = useState([]);

  useEffect(() =&gt; {
    const handleStorageChange = (e) =&gt; {
      if (e.key === &#39;notifications&#39;) {
        const newNotifications = JSON.parse(e.newValue || &#39;[]&#39;);
        setNotifications(newNotifications);
      }
    };

    const handleVisibilityChange = () =&gt; {
      if (document.visibilityState === &#39;visible&#39;) {
        console.log(&#39;é¡µé¢å˜ä¸ºå¯è§&#39;);
      } else {
        console.log(&#39;é¡µé¢å˜ä¸ºéšè—&#39;);
      }
    };

    const handleOnline = () =&gt; {
      console.log(&#39;ç½‘ç»œè¿æ¥æ¢å¤&#39;);
    };

    const handleOffline = () =&gt; {
      console.log(&#39;ç½‘ç»œè¿æ¥æ–­å¼€&#39;);
    };

    // æ·»åŠ äº‹ä»¶ç›‘å¬
    window.addEventListener(&#39;storage&#39;, handleStorageChange);
    document.addEventListener(&#39;visibilitychange&#39;, handleVisibilityChange);
    window.addEventListener(&#39;online&#39;, handleOnline);
    window.addEventListener(&#39;offline&#39;, handleOffline);

    // æ¸…ç†äº‹ä»¶ç›‘å¬
    return () =&gt; {
      window.removeEventListener(&#39;storage&#39;, handleStorageChange);
      document.removeEventListener(&#39;visibilitychange&#39;, handleVisibilityChange);
      window.removeEventListener(&#39;online&#39;, handleOnline);
      window.removeEventListener(&#39;offline&#39;, handleOffline);
    };
  }, []);

  return (
    &lt;div&gt;
      &lt;h3&gt;é€šçŸ¥&lt;/h3&gt;
      {notifications.map((notification, index) =&gt; (
        &lt;div key={index}&gt;{notification.message}&lt;/div&gt;
      ))}
    &lt;/div&gt;
  );
}
</code></pre>
<h2>æ¡ä»¶æ‰§è¡Œå‰¯ä½œç”¨</h2>
<h3>åŸºäºæ¡ä»¶çš„å‰¯ä½œç”¨</h3>
<pre><code class="language-jsx">function ConditionalEffect({ shouldFetch, userId }) {
  const [user, setUser] = useState(null);

  useEffect(() =&gt; {
    // åªæœ‰å½“shouldFetchä¸ºtrueæ—¶æ‰æ‰§è¡Œ
    if (!shouldFetch) return;

    const fetchUser = async () =&gt; {
      try {
        const response = await fetch(`/api/users/${userId}`);
        const userData = await response.json();
        setUser(userData);
      } catch (error) {
        console.error(&#39;è·å–ç”¨æˆ·å¤±è´¥:&#39;, error);
      }
    };

    fetchUser();
  }, [shouldFetch, userId]);

  return (
    &lt;div&gt;
      {user ? (
        &lt;p&gt;ç”¨æˆ·: {user.name}&lt;/p&gt;
      ) : (
        &lt;p&gt;æš‚æ— ç”¨æˆ·æ•°æ®&lt;/p&gt;
      )}
    &lt;/div&gt;
  );
}
</code></pre>
<h3>é˜²æŠ–å‰¯ä½œç”¨</h3>
<pre><code class="language-jsx">function SearchComponent() {
  const [searchTerm, setSearchTerm] = useState(&#39;&#39;);
  const [results, setResults] = useState([]);

  useEffect(() =&gt; {
    // é˜²æŠ–å¤„ç†
    const timeoutId = setTimeout(() =&gt; {
      if (searchTerm.trim()) {
        searchAPI(searchTerm);
      } else {
        setResults([]);
      }
    }, 300);

    // æ¸…ç†å®šæ—¶å™¨
    return () =&gt; clearTimeout(timeoutId);
  }, [searchTerm]);

  const searchAPI = async (query) =&gt; {
    try {
      const response = await fetch(`/api/search?q=${encodeURIComponent(query)}`);
      const data = await response.json();
      setResults(data.results);
    } catch (error) {
      console.error(&#39;æœç´¢å¤±è´¥:&#39;, error);
    }
  };

  return (
    &lt;div&gt;
      &lt;input
        type=&quot;text&quot;
        value={searchTerm}
        onChange={(e) =&gt; setSearchTerm(e.target.value)}
        placeholder=&quot;æœç´¢...&quot;
      /&gt;
      &lt;ul&gt;
        {results.map(result =&gt; (
          &lt;li key={result.id}&gt;{result.title}&lt;/li&gt;
        ))}
      &lt;/ul&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<h2>å¤æ‚å‰¯ä½œç”¨æ¨¡å¼</h2>
<h3>å¤šä¸ªç›¸å…³å‰¯ä½œç”¨</h3>
<pre><code class="language-jsx">function UserDashboard({ userId }) {
  const [user, setUser] = useState(null);
  const [posts, setPosts] = useState([]);
  const [loading, setLoading] = useState(true);

  // è·å–ç”¨æˆ·ä¿¡æ¯
  useEffect(() =&gt; {
    const fetchUser = async () =&gt; {
      try {
        const response = await fetch(`/api/users/${userId}`);
        const userData = await response.json();
        setUser(userData);
      } catch (error) {
        console.error(&#39;è·å–ç”¨æˆ·å¤±è´¥:&#39;, error);
      }
    };

    if (userId) {
      fetchUser();
    }
  }, [userId]);

  // è·å–ç”¨æˆ·çš„å¸–å­
  useEffect(() =&gt; {
    const fetchPosts = async () =&gt; {
      try {
        setLoading(true);
        const response = await fetch(`/api/users/${userId}/posts`);
        const postsData = await response.json();
        setPosts(postsData);
      } catch (error) {
        console.error(&#39;è·å–å¸–å­å¤±è´¥:&#39;, error);
      } finally {
        setLoading(false);
      }
    };

    if (userId) {
      fetchPosts();
    }
  }, [userId]);

  // è®¾ç½®é¡µé¢æ ‡é¢˜
  useEffect(() =&gt; {
    if (user) {
      document.title = `${user.name} - ç”¨æˆ·é¢æ¿`;
    }

    return () =&gt; {
      document.title = &#39;åº”ç”¨&#39;; // æ¸…ç†æ—¶é‡ç½®æ ‡é¢˜
    };
  }, [user]);

  return (
    &lt;div&gt;
      {user &amp;&amp; (
        &lt;div&gt;
          &lt;h1&gt;{user.name}&lt;/h1&gt;
          &lt;p&gt;{user.email}&lt;/p&gt;
        &lt;/div&gt;
      )}
      
      {loading ? (
        &lt;p&gt;åŠ è½½å¸–å­ä¸­...&lt;/p&gt;
      ) : (
        &lt;div&gt;
          &lt;h2&gt;å¸–å­&lt;/h2&gt;
          {posts.map(post =&gt; (
            &lt;div key={post.id}&gt;
              &lt;h3&gt;{post.title}&lt;/h3&gt;
              &lt;p&gt;{post.content}&lt;/p&gt;
            &lt;/div&gt;
          ))}
        &lt;/div&gt;
      )}
    &lt;/div&gt;
  );
}
</code></pre>
<h3>å‰¯ä½œç”¨é“¾</h3>
<pre><code class="language-jsx">function DataProcessingComponent() {
  const [rawData, setRawData] = useState(null);
  const [processedData, setProcessedData] = useState(null);
  const [finalResult, setFinalResult] = useState(null);

  // ç¬¬ä¸€æ­¥ï¼šè·å–åŸå§‹æ•°æ®
  useEffect(() =&gt; {
    const fetchRawData = async () =&gt; {
      try {
        const response = await fetch(&#39;/api/raw-data&#39;);
        const data = await response.json();
        setRawData(data);
      } catch (error) {
        console.error(&#39;è·å–åŸå§‹æ•°æ®å¤±è´¥:&#39;, error);
      }
    };

    fetchRawData();
  }, []);

  // ç¬¬äºŒæ­¥ï¼šå¤„ç†åŸå§‹æ•°æ®
  useEffect(() =&gt; {
    if (!rawData) return;

    const processData = () =&gt; {
      // æ¨¡æ‹Ÿæ•°æ®å¤„ç†
      const processed = rawData.map(item =&gt; ({
        ...item,
        processed: true,
        timestamp: Date.now()
      }));
      setProcessedData(processed);
    };

    processData();
  }, [rawData]);

  // ç¬¬ä¸‰æ­¥ï¼šç”Ÿæˆæœ€ç»ˆç»“æœ
  useEffect(() =&gt; {
    if (!processedData) return;

    const generateResult = async () =&gt; {
      try {
        const response = await fetch(&#39;/api/analyze&#39;, {
          method: &#39;POST&#39;,
          headers: {
            &#39;Content-Type&#39;: &#39;application/json&#39;,
          },
          body: JSON.stringify(processedData)
        });
        const result = await response.json();
        setFinalResult(result);
      } catch (error) {
        console.error(&#39;åˆ†ææ•°æ®å¤±è´¥:&#39;, error);
      }
    };

    generateResult();
  }, [processedData]);

  return (
    &lt;div&gt;
      &lt;p&gt;åŸå§‹æ•°æ®: {rawData ? &#39;å·²åŠ è½½&#39; : &#39;åŠ è½½ä¸­...&#39;}&lt;/p&gt;
      &lt;p&gt;å¤„ç†åæ•°æ®: {processedData ? &#39;å·²å¤„ç†&#39; : &#39;å¤„ç†ä¸­...&#39;}&lt;/p&gt;
      &lt;p&gt;æœ€ç»ˆç»“æœ: {finalResult ? &#39;å·²å®Œæˆ&#39; : &#39;åˆ†æä¸­...&#39;}&lt;/p&gt;
      
      {finalResult &amp;&amp; (
        &lt;div&gt;
          &lt;h3&gt;åˆ†æç»“æœ&lt;/h3&gt;
          &lt;pre&gt;{JSON.stringify(finalResult, null, 2)}&lt;/pre&gt;
        &lt;/div&gt;
      )}
    &lt;/div&gt;
  );
}
</code></pre>
<h2>è‡ªå®šä¹‰å‰¯ä½œç”¨Hook</h2>
<h3>useAsync Hook</h3>
<pre><code class="language-jsx">function useAsync(asyncFunction, dependencies = []) {
  const [state, setState] = useState({
    data: null,
    loading: false,
    error: null
  });

  useEffect(() =&gt; {
    let cancelled = false;

    const runAsync = async () =&gt; {
      setState(prev =&gt; ({ ...prev, loading: true, error: null }));

      try {
        const data = await asyncFunction();
        if (!cancelled) {
          setState({ data, loading: false, error: null });
        }
      } catch (error) {
        if (!cancelled) {
          setState({ data: null, loading: false, error });
        }
      }
    };

    runAsync();

    return () =&gt; {
      cancelled = true;
    };
  }, dependencies);

  return state;
}

// ä½¿ç”¨useAsync
function UserComponent({ userId }) {
  const { data: user, loading, error } = useAsync(
    () =&gt; fetch(`/api/users/${userId}`).then(res =&gt; res.json()),
    [userId]
  );

  if (loading) return &lt;div&gt;åŠ è½½ä¸­...&lt;/div&gt;;
  if (error) return &lt;div&gt;é”™è¯¯: {error.message}&lt;/div&gt;;
  if (!user) return &lt;div&gt;æ— ç”¨æˆ·æ•°æ®&lt;/div&gt;;

  return (
    &lt;div&gt;
      &lt;h1&gt;{user.name}&lt;/h1&gt;
      &lt;p&gt;{user.email}&lt;/p&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<h3>useInterval Hook</h3>
<pre><code class="language-jsx">function useInterval(callback, delay) {
  const savedCallback = useRef();

  // è®°ä½æœ€æ–°çš„å›è°ƒå‡½æ•°
  useEffect(() =&gt; {
    savedCallback.current = callback;
  }, [callback]);

  // è®¾ç½®å®šæ—¶å™¨
  useEffect(() =&gt; {
    function tick() {
      savedCallback.current();
    }

    if (delay !== null) {
      const id = setInterval(tick, delay);
      return () =&gt; clearInterval(id);
    }
  }, [delay]);
}

// ä½¿ç”¨useInterval
function Clock() {
  const [time, setTime] = useState(new Date());

  useInterval(() =&gt; {
    setTime(new Date());
  }, 1000);

  return (
    &lt;div&gt;
      &lt;p&gt;å½“å‰æ—¶é—´: {time.toLocaleTimeString()}&lt;/p&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<h2>å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ</h2>
<h3>1. æ— é™å¾ªç¯</h3>
<pre><code class="language-jsx">// âŒ é”™è¯¯ï¼šä¼šå¯¼è‡´æ— é™å¾ªç¯
function BadExample({ user }) {
  const [userData, setUserData] = useState(null);

  useEffect(() =&gt; {
    setUserData({ ...user, lastUpdated: Date.now() });
  }, [user]); // userå¯¹è±¡æ¯æ¬¡éƒ½ä¸åŒ

  return &lt;div&gt;{userData?.name}&lt;/div&gt;;
}

// âœ… æ­£ç¡®ï¼šæŒ‡å®šå…·ä½“çš„ä¾èµ–
function GoodExample({ user }) {
  const [userData, setUserData] = useState(null);

  useEffect(() =&gt; {
    setUserData({ ...user, lastUpdated: Date.now() });
  }, [user.id, user.name]); // åªä¾èµ–ç‰¹å®šå±æ€§

  return &lt;div&gt;{userData?.name}&lt;/div&gt;;
}
</code></pre>
<h3>2. å¿˜è®°æ¸…ç†</h3>
<pre><code class="language-jsx">// âŒ é”™è¯¯ï¼šå¿˜è®°æ¸…ç†å®šæ—¶å™¨
function BadTimer() {
  const [count, setCount] = useState(0);

  useEffect(() =&gt; {
    setInterval(() =&gt; {
      setCount(c =&gt; c + 1);
    }, 1000);
    // å¿˜è®°è¿”å›æ¸…ç†å‡½æ•°
  }, []);

  return &lt;div&gt;{count}&lt;/div&gt;;
}

// âœ… æ­£ç¡®ï¼šæ¸…ç†å®šæ—¶å™¨
function GoodTimer() {
  const [count, setCount] = useState(0);

  useEffect(() =&gt; {
    const interval = setInterval(() =&gt; {
      setCount(c =&gt; c + 1);
    }, 1000);

    return () =&gt; clearInterval(interval);
  }, []);

  return &lt;div&gt;{count}&lt;/div&gt;;
}
</code></pre>
<h3>3. ä¾èµ–é¡¹ä¸å®Œæ•´</h3>
<pre><code class="language-jsx">// âŒ é”™è¯¯ï¼šç¼ºå°‘ä¾èµ–é¡¹
function BadExample({ userId, settings }) {
  const [data, setData] = useState(null);

  useEffect(() =&gt; {
    fetchUserData(userId, settings.theme);
  }, [userId]); // ç¼ºå°‘settings.themeä¾èµ–

  return &lt;div&gt;{data}&lt;/div&gt;;
}

// âœ… æ­£ç¡®ï¼šåŒ…å«æ‰€æœ‰ä¾èµ–é¡¹
function GoodExample({ userId, settings }) {
  const [data, setData] = useState(null);

  useEffect(() =&gt; {
    fetchUserData(userId, settings.theme);
  }, [userId, settings.theme]); // åŒ…å«æ‰€æœ‰ä¾èµ–

  return &lt;div&gt;{data}&lt;/div&gt;;
}
</code></pre>
<h2>è°ƒè¯•å‰¯ä½œç”¨</h2>
<h3>ä½¿ç”¨å¼€å‘å·¥å…·</h3>
<pre><code class="language-jsx">function DebuggableComponent({ userId }) {
  const [user, setUser] = useState(null);

  useEffect(() =&gt; {
    console.log(&#39;Effectè¿è¡Œï¼ŒuserId:&#39;, userId);
    
    const fetchUser = async () =&gt; {
      console.log(&#39;å¼€å§‹è·å–ç”¨æˆ·æ•°æ®&#39;);
      try {
        const response = await fetch(`/api/users/${userId}`);
        const userData = await response.json();
        console.log(&#39;ç”¨æˆ·æ•°æ®è·å–æˆåŠŸ:&#39;, userData);
        setUser(userData);
      } catch (error) {
        console.error(&#39;ç”¨æˆ·æ•°æ®è·å–å¤±è´¥:&#39;, error);
      }
    };

    fetchUser();

    return () =&gt; {
      console.log(&#39;Effectæ¸…ç†ï¼ŒuserId:&#39;, userId);
    };
  }, [userId]);

  console.log(&#39;ç»„ä»¶æ¸²æŸ“ï¼Œuser:&#39;, user);

  return user ? &lt;div&gt;{user.name}&lt;/div&gt; : &lt;div&gt;åŠ è½½ä¸­...&lt;/div&gt;;
}
</code></pre>
<h2>æ€»ç»“</h2>
<p>å‰¯ä½œç”¨å¤„ç†çš„å…³é”®è¦ç‚¹ï¼š</p>
<ol>
<li><strong>æ­£ç¡®ä½¿ç”¨ä¾èµ–æ•°ç»„</strong>ï¼šç¡®ä¿åŒ…å«æ‰€æœ‰ä½¿ç”¨çš„å€¼</li>
<li><strong>åŠæ—¶æ¸…ç†èµ„æº</strong>ï¼šé¿å…å†…å­˜æ³„æ¼</li>
<li><strong>å¤„ç†ç«æ€æ¡ä»¶</strong>ï¼šä½¿ç”¨AbortControllerå–æ¶ˆè¯·æ±‚</li>
<li><strong>åˆç†åˆ†ç¦»å‰¯ä½œç”¨</strong>ï¼šå°†ä¸ç›¸å…³çš„å‰¯ä½œç”¨æ”¾åœ¨ä¸åŒçš„useEffectä¸­</li>
<li><strong>ä½¿ç”¨è‡ªå®šä¹‰Hook</strong>ï¼šå°è£…å¤æ‚çš„å‰¯ä½œç”¨é€»è¾‘</li>
</ol>
<p>æŒæ¡å‰¯ä½œç”¨å¤„ç†æ˜¯ç¼–å†™å¯é Reactåº”ç”¨çš„å…³é”®æŠ€èƒ½ã€‚é€šè¿‡æ­£ç¡®ä½¿ç”¨useEffectï¼Œå¯ä»¥æ„å»ºå‡ºé«˜æ€§èƒ½ã€æ— bugçš„ç”¨æˆ·ç•Œé¢ã€‚ </p>

          </div>

          <!-- æ–‡æ¡£å¯¼èˆª -->
          <div class="doc-navigation">
            
              <a href="17-ç”Ÿå‘½å‘¨æœŸæ–¹æ³•.html" class="nav-btn prev-btn">
                <span class="nav-icon">â†</span>
                <div class="nav-text">
                  <span class="nav-label">ä¸Šä¸€ç¯‡</span>
                  <span class="nav-title">ç”Ÿå‘½å‘¨æœŸæ–¹æ³•</span>
                </div>
              </a>
            
            
            
              <a href="19-æ ·å¼å¤„ç†.html" class="nav-btn next-btn">
                <div class="nav-text">
                  <span class="nav-label">ä¸‹ä¸€ç¯‡</span>
                  <span class="nav-title">æ ·å¼å¤„ç†</span>
                </div>
                <span class="nav-icon">â†’</span>
              </a>
            
          </div>
        </article>
      </main>
    </div>

    <!-- è¿”å›é¡¶éƒ¨æŒ‰é’® -->
    <button class="back-to-top" id="backToTop" onclick="scrollToTop()">
      <span>â†‘</span>
    </button>

    <!-- åº•éƒ¨ -->
    <footer class="footer">
      <div class="footer-content">
        <p>&copy; 2024 React ä¸­æ–‡æ–‡æ¡£. åŸºäº React 18.x æ„å»º</p>
        <p>Made with â¤ï¸ by Reactä¸­æ–‡ç¤¾åŒº</p>
      </div>
    </footer>
  </div>

  <script src="assets/script.js"></script>
</body>
</html>