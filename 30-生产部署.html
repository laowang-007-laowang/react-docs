<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ç”Ÿäº§éƒ¨ç½² - React ä¸­æ–‡æ–‡æ¡£</title>
  <meta name="description" content="ä»å…¥é—¨åˆ°ç²¾é€šï¼Œå…¨é¢æŒæ¡Reactå¼€å‘æŠ€èƒ½">
  <link rel="stylesheet" href="assets/style.css">
  <link rel="stylesheet" href="assets/highlight.css">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>âš›ï¸</text></svg>">
</head>
<body>
  <div class="container">
    <!-- é¡¶éƒ¨å¯¼èˆª -->
    <header class="header">
      <div class="header-content">
        <div class="logo">
          <span class="logo-icon">âš›ï¸</span>
          <div class="logo-text">
            <h1>React ä¸­æ–‡æ–‡æ¡£</h1>
            <p>ç°ä»£åŒ–çš„Reactå­¦ä¹ æŒ‡å—</p>
          </div>
        </div>
        <nav class="header-nav">
          <a href="index.html" class="nav-link">é¦–é¡µ</a>
          <a href="#" class="nav-link" onclick="toggleSidebar()">ç›®å½•</a>
          <a href="https://github.com/facebook/react" target="_blank" class="nav-link">GitHub</a>
        </nav>
      </div>
    </header>

    <div class="main-layout">
      <!-- ä¾§è¾¹æ  -->
      <aside class="sidebar" id="sidebar">
        <div class="sidebar-content">
          <div class="search-box">
            <input type="text" placeholder="æœç´¢æ–‡æ¡£..." id="searchInput" onkeyup="searchDocs()">
            <span class="search-icon">ğŸ”</span>
          </div>
          <nav class="doc-nav">
            
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ“š</span>
          åŸºç¡€æ¦‚å¿µ
        </h3>
        <ul class="category-docs">
          <li><a href="01-Reactç®€ä»‹.html" class="doc-link">Reactç®€ä»‹</a></li><li><a href="02-ç¯å¢ƒæ­å»º.html" class="doc-link">ç¯å¢ƒæ­å»º</a></li><li><a href="03-JSXè¯­æ³•.html" class="doc-link">JSXè¯­æ³•</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ§©</span>
          ç»„ä»¶å¼€å‘
        </h3>
        <ul class="category-docs">
          <li><a href="04-ç»„ä»¶åŸºç¡€.html" class="doc-link">ç»„ä»¶åŸºç¡€</a></li><li><a href="05-Propsä¸State.html" class="doc-link">Propsä¸State</a></li><li><a href="06-äº‹ä»¶å¤„ç†.html" class="doc-link">äº‹ä»¶å¤„ç†</a></li><li><a href="07-æ¡ä»¶æ¸²æŸ“.html" class="doc-link">æ¡ä»¶æ¸²æŸ“</a></li><li><a href="08-åˆ—è¡¨æ¸²æŸ“.html" class="doc-link">åˆ—è¡¨æ¸²æŸ“</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ£</span>
          Hooks API
        </h3>
        <ul class="category-docs">
          <li><a href="09-Hooksæ¦‚è¿°.html" class="doc-link">Hooksæ¦‚è¿°</a></li><li><a href="10-useState.html" class="doc-link">useState</a></li><li><a href="11-useEffect.html" class="doc-link">useEffect</a></li><li><a href="12-useContext.html" class="doc-link">useContext</a></li><li><a href="13-useReducer.html" class="doc-link">useReducer</a></li><li><a href="14-useMemoå’ŒuseCallback.html" class="doc-link">useMemoå’ŒuseCallback</a></li><li><a href="15-useRef.html" class="doc-link">useRef</a></li><li><a href="16-è‡ªå®šä¹‰Hooks.html" class="doc-link">è‡ªå®šä¹‰Hooks</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ”„</span>
          ç”Ÿå‘½å‘¨æœŸ
        </h3>
        <ul class="category-docs">
          <li><a href="17-ç”Ÿå‘½å‘¨æœŸæ–¹æ³•.html" class="doc-link">ç”Ÿå‘½å‘¨æœŸæ–¹æ³•</a></li><li><a href="18-å‰¯ä½œç”¨å¤„ç†.html" class="doc-link">å‰¯ä½œç”¨å¤„ç†</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ¨</span>
          æ ·å¼ä¸UI
        </h3>
        <ul class="category-docs">
          <li><a href="19-æ ·å¼å¤„ç†.html" class="doc-link">æ ·å¼å¤„ç†</a></li><li><a href="20-åŠ¨ç”»æ•ˆæœ.html" class="doc-link">åŠ¨ç”»æ•ˆæœ</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ—ºï¸</span>
          è·¯ç”±ç®¡ç†
        </h3>
        <ul class="category-docs">
          <li><a href="21-React-Router.html" class="doc-link">React-Router</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ“¦</span>
          çŠ¶æ€ç®¡ç†
        </h3>
        <ul class="category-docs">
          <li><a href="22-Context-API.html" class="doc-link">Context-API</a></li><li><a href="23-Reduxé›†æˆ.html" class="doc-link">Reduxé›†æˆ</a></li><li><a href="24-ZustandçŠ¶æ€ç®¡ç†.html" class="doc-link">ZustandçŠ¶æ€ç®¡ç†</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸš€</span>
          æ€§èƒ½ä¼˜åŒ–
        </h3>
        <ul class="category-docs">
          <li><a href="25-æ€§èƒ½ä¼˜åŒ–æŠ€å·§.html" class="doc-link">æ€§èƒ½ä¼˜åŒ–æŠ€å·§</a></li><li><a href="26-ä»£ç åˆ†å‰².html" class="doc-link">ä»£ç åˆ†å‰²</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ§ª</span>
          æµ‹è¯•
        </h3>
        <ul class="category-docs">
          <li><a href="27-å•å…ƒæµ‹è¯•.html" class="doc-link">å•å…ƒæµ‹è¯•</a></li><li><a href="28-é›†æˆæµ‹è¯•.html" class="doc-link">é›†æˆæµ‹è¯•</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ—ï¸</span>
          æ„å»ºä¸éƒ¨ç½²
        </h3>
        <ul class="category-docs">
          <li><a href="29-é¡¹ç›®æ„å»º.html" class="doc-link">é¡¹ç›®æ„å»º</a></li><li><a href="30-ç”Ÿäº§éƒ¨ç½².html" class="doc-link">ç”Ÿäº§éƒ¨ç½²</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ› ï¸</span>
          å¼€å‘å·¥å…·
        </h3>
        <ul class="category-docs">
          <li><a href="31-å¼€å‘è€…å·¥å…·.html" class="doc-link">å¼€å‘è€…å·¥å…·</a></li><li><a href="32-è°ƒè¯•æŠ€å·§.html" class="doc-link">è°ƒè¯•æŠ€å·§</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ“–</span>
          APIå‚è€ƒ
        </h3>
        <ul class="category-docs">
          <li><a href="33-React-APIå®Œæ•´å‚è€ƒ.html" class="doc-link">React-APIå®Œæ•´å‚è€ƒ</a></li><li><a href="34-DOMå…ƒç´ å±æ€§.html" class="doc-link">DOMå…ƒç´ å±æ€§</a></li><li><a href="35-åˆæˆäº‹ä»¶.html" class="doc-link">åˆæˆäº‹ä»¶</a></li><li><a href="React-Hookså®Œæ•´å‚è€ƒ.html" class="doc-link">React-Hookså®Œæ•´å‚è€ƒ</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ’¡</span>
          æœ€ä½³å®è·µ
        </h3>
        <ul class="category-docs">
          <li><a href="36-ç¼–ç è§„èŒƒ.html" class="doc-link">ç¼–ç è§„èŒƒ</a></li><li><a href="37-é¡¹ç›®æ¶æ„.html" class="doc-link">é¡¹ç›®æ¶æ„</a></li><li><a href="38-å¸¸è§é—®é¢˜.html" class="doc-link">å¸¸è§é—®é¢˜</a></li>
        </ul>
      </div>
          </nav>
        </div>
      </aside>

      <!-- ä¸»å†…å®¹åŒº -->
      <main class="content">
        <article class="doc-article">
          <div class="doc-header">
            <div class="breadcrumb">
              <a href="index.html">é¦–é¡µ</a>
              <span class="separator">></span>
              <span class="current">ç”Ÿäº§éƒ¨ç½²</span>
            </div>
            <h1 class="doc-title">ç”Ÿäº§éƒ¨ç½²</h1>
            <div class="doc-meta">
              <span class="category" style="background: #ffd89b">
                ğŸ—ï¸ æ„å»ºä¸éƒ¨ç½²
              </span>
            </div>
          </div>
          
          <div class="doc-content">
            <h1>30-ç”Ÿäº§éƒ¨ç½²</h1>
<p>ç”Ÿäº§éƒ¨ç½²æ˜¯å°†Reactåº”ç”¨ä»å¼€å‘ç¯å¢ƒå‘å¸ƒåˆ°ç”Ÿäº§ç¯å¢ƒçš„è¿‡ç¨‹ã€‚è¿™åŒ…æ‹¬ä»£ç æ„å»ºã€èµ„æºä¼˜åŒ–ã€ç¯å¢ƒé…ç½®ã€éƒ¨ç½²ç­–ç•¥å’Œç›‘æ§ç­‰å¤šä¸ªæ–¹é¢ã€‚</p>
<h2>åŸºç¡€æ¦‚å¿µ</h2>
<h3>ç”Ÿäº§ç¯å¢ƒç‰¹ç‚¹</h3>
<p>ç”Ÿäº§ç¯å¢ƒä¸å¼€å‘ç¯å¢ƒæœ‰ä»¥ä¸‹ä¸»è¦åŒºåˆ«ï¼š</p>
<ul>
<li><strong>ä»£ç å‹ç¼©</strong> - ç§»é™¤ç©ºæ ¼ã€æ³¨é‡Šï¼Œå‹ç¼©ä»£ç ä½“ç§¯</li>
<li><strong>èµ„æºä¼˜åŒ–</strong> - å›¾ç‰‡å‹ç¼©ã€ä»£ç åˆ†å‰²ã€ç¼“å­˜ç­–ç•¥</li>
<li><strong>ç¯å¢ƒå˜é‡</strong> - ä½¿ç”¨ç”Ÿäº§ç¯å¢ƒé…ç½®</li>
<li><strong>é”™è¯¯å¤„ç†</strong> - æ›´ä¸¥æ ¼çš„é”™è¯¯ç›‘æ§å’Œå¤„ç†</li>
<li><strong>æ€§èƒ½ç›‘æ§</strong> - å®æ—¶ç›‘æ§åº”ç”¨æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒ</li>
</ul>
<h3>éƒ¨ç½²å‡†å¤‡æ¸…å•</h3>
<pre><code class="language-markdown">## éƒ¨ç½²å‰æ£€æŸ¥æ¸…å•

### ä»£ç è´¨é‡
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡
- [ ] ä»£ç å®¡æŸ¥å®Œæˆ
- [ ] æ— æ˜æ˜¾æ€§èƒ½é—®é¢˜
- [ ] é”™è¯¯å¤„ç†å®Œå–„

### é…ç½®ç®¡ç†
- [ ] ç¯å¢ƒå˜é‡é…ç½®æ­£ç¡®
- [ ] APIæ¥å£åœ°å€æ›´æ–°
- [ ] å®‰å…¨é…ç½®åˆ°ä½
- [ ] ç¼“å­˜ç­–ç•¥é…ç½®

### èµ„æºä¼˜åŒ–
- [ ] å›¾ç‰‡èµ„æºä¼˜åŒ–
- [ ] ä»£ç åˆ†å‰²é…ç½®
- [ ] å‹ç¼©é…ç½®å¯ç”¨
- [ ] CDNé…ç½®å®Œæˆ

### ç›‘æ§ä¸å¤‡ä»½
- [ ] é”™è¯¯ç›‘æ§é…ç½®
- [ ] æ€§èƒ½ç›‘æ§é…ç½®
- [ ] æ—¥å¿—è®°å½•é…ç½®
- [ ] å¤‡ä»½æ–¹æ¡ˆå°±ç»ª
</code></pre>
<h2>æ„å»ºä¼˜åŒ–</h2>
<h3>åŸºç¡€æ„å»ºé…ç½®</h3>
<pre><code class="language-javascript">// webpack.config.js
const path = require(&#39;path&#39;)
const HtmlWebpackPlugin = require(&#39;html-webpack-plugin&#39;)
const MiniCssExtractPlugin = require(&#39;mini-css-extract-plugin&#39;)
const CssMinimizerPlugin = require(&#39;css-minimizer-webpack-plugin&#39;)
const TerserPlugin = require(&#39;terser-webpack-plugin&#39;)

module.exports = {
  mode: &#39;production&#39;,
  entry: &#39;./src/index.js&#39;,
  output: {
    path: path.resolve(__dirname, &#39;dist&#39;),
    filename: &#39;[name].[contenthash].js&#39;,
    chunkFilename: &#39;[name].[contenthash].chunk.js&#39;,
    clean: true,
    publicPath: &#39;/&#39;
  },
  
  optimization: {
    minimize: true,
    minimizer: [
      new TerserPlugin({
        terserOptions: {
          compress: {
            drop_console: true,
            drop_debugger: true
          }
        }
      }),
      new CssMinimizerPlugin()
    ],
    
    splitChunks: {
      chunks: &#39;all&#39;,
      cacheGroups: {
        vendor: {
          test: /[\\/]node_modules[\\/]/,
          name: &#39;vendors&#39;,
          chunks: &#39;all&#39;,
          priority: 10
        },
        common: {
          name: &#39;common&#39;,
          minChunks: 2,
          chunks: &#39;all&#39;,
          priority: 5
        }
      }
    },
    
    runtimeChunk: &#39;single&#39;
  },
  
  plugins: [
    new HtmlWebpackPlugin({
      template: &#39;public/index.html&#39;,
      minify: {
        removeComments: true,
        collapseWhitespace: true,
        removeRedundantAttributes: true,
        useShortDoctype: true,
        removeEmptyAttributes: true,
        removeStyleLinkTypeAttributes: true,
        keepClosingSlash: true,
        minifyJS: true,
        minifyCSS: true,
        minifyURLs: true
      }
    }),
    
    new MiniCssExtractPlugin({
      filename: &#39;[name].[contenthash].css&#39;,
      chunkFilename: &#39;[id].[contenthash].css&#39;
    })
  ],
  
  module: {
    rules: [
      {
        test: /\.(js|jsx)$/,
        exclude: /node_modules/,
        use: {
          loader: &#39;babel-loader&#39;,
          options: {
            presets: [&#39;@babel/preset-env&#39;, &#39;@babel/preset-react&#39;]
          }
        }
      },
      {
        test: /\.css$/,
        use: [MiniCssExtractPlugin.loader, &#39;css-loader&#39;]
      },
      {
        test: /\.(png|svg|jpg|jpeg|gif)$/i,
        type: &#39;asset/resource&#39;,
        generator: {
          filename: &#39;images/[name].[contenthash][ext]&#39;
        }
      }
    ]
  }
}
</code></pre>
<h3>Viteæ„å»ºé…ç½®</h3>
<pre><code class="language-javascript">// vite.config.js
import { defineConfig } from &#39;vite&#39;
import react from &#39;@vitejs/plugin-react&#39;
import { resolve } from &#39;path&#39;

export default defineConfig({
  plugins: [react()],
  
  build: {
    outDir: &#39;dist&#39;,
    assetsDir: &#39;assets&#39;,
    sourcemap: false,
    minify: &#39;terser&#39;,
    
    terserOptions: {
      compress: {
        drop_console: true,
        drop_debugger: true
      }
    },
    
    rollupOptions: {
      output: {
        manualChunks: {
          vendor: [&#39;react&#39;, &#39;react-dom&#39;],
          router: [&#39;react-router-dom&#39;],
          ui: [&#39;antd&#39;, &#39;@ant-design/icons&#39;]
        }
      }
    },
    
    chunkSizeWarningLimit: 1600
  },
  
  resolve: {
    alias: {
      &#39;@&#39;: resolve(__dirname, &#39;src&#39;)
    }
  }
})
</code></pre>
<h2>ç¯å¢ƒé…ç½®</h2>
<h3>ç¯å¢ƒå˜é‡ç®¡ç†</h3>
<pre><code class="language-javascript">// .env.production
REACT_APP_API_URL=https://api.example.com
REACT_APP_CDN_URL=https://cdn.example.com
REACT_APP_ENV=production
REACT_APP_SENTRY_DSN=https://xxx@sentry.io/xxx
REACT_APP_GOOGLE_ANALYTICS_ID=GA-XXXXX-X
</code></pre>
<pre><code class="language-javascript">// src/config/index.js
const config = {
  development: {
    apiUrl: &#39;http://localhost:3000/api&#39;,
    cdnUrl: &#39;http://localhost:3000&#39;,
    enableLogging: true,
    enableMocking: true
  },
  
  production: {
    apiUrl: process.env.REACT_APP_API_URL,
    cdnUrl: process.env.REACT_APP_CDN_URL,
    enableLogging: false,
    enableMocking: false,
    sentryDsn: process.env.REACT_APP_SENTRY_DSN,
    googleAnalyticsId: process.env.REACT_APP_GOOGLE_ANALYTICS_ID
  }
}

const currentConfig = config[process.env.NODE_ENV || &#39;development&#39;]

export default currentConfig
</code></pre>
<pre><code class="language-javascript">// src/services/api.js
import config from &#39;../config&#39;

const api = {
  baseURL: config.apiUrl,
  
  request: async (url, options = {}) =&gt; {
    const response = await fetch(`${api.baseURL}${url}`, {
      ...options,
      headers: {
        &#39;Content-Type&#39;: &#39;application/json&#39;,
        ...options.headers
      }
    })
    
    if (!response.ok) {
      throw new Error(`HTTP error! status: ${response.status}`)
    }
    
    return response.json()
  }
}

export default api
</code></pre>
<h2>æ€§èƒ½ä¼˜åŒ–</h2>
<h3>ä»£ç åˆ†å‰²ä¼˜åŒ–</h3>
<pre><code class="language-javascript">// src/utils/loadable.js
import { lazy, Suspense } from &#39;react&#39;

export const loadable = (importFunc, fallback = &lt;div&gt;Loading...&lt;/div&gt;) =&gt; {
  const LazyComponent = lazy(importFunc)
  
  return (props) =&gt; (
    &lt;Suspense fallback={fallback}&gt;
      &lt;LazyComponent {...props} /&gt;
    &lt;/Suspense&gt;
  )
}

// ä½¿ç”¨ç¤ºä¾‹
export const HomePage = loadable(() =&gt; import(&#39;../pages/Home&#39;))
export const AboutPage = loadable(() =&gt; import(&#39;../pages/About&#39;))
</code></pre>
<h3>èµ„æºé¢„åŠ è½½</h3>
<pre><code class="language-javascript">// src/utils/preload.js
export const preloadRoute = (routeComponent) =&gt; {
  const componentImport = routeComponent()
  return componentImport
}

// åœ¨è·¯ç”±ç»„ä»¶ä¸­ä½¿ç”¨
const routes = [
  {
    path: &#39;/&#39;,
    component: HomePage
  },
  {
    path: &#39;/about&#39;,
    component: AboutPage
  }
]

// é¢„åŠ è½½å…³é”®è·¯ç”±
const preloadCriticalRoutes = () =&gt; {
  import(&#39;../pages/Home&#39;)
  import(&#39;../pages/About&#39;)
}

// åœ¨åº”ç”¨å¯åŠ¨æ—¶é¢„åŠ è½½
if (process.env.NODE_ENV === &#39;production&#39;) {
  preloadCriticalRoutes()
}
</code></pre>
<h3>å›¾ç‰‡ä¼˜åŒ–</h3>
<pre><code class="language-javascript">// src/components/OptimizedImage.jsx
import React, { useState, useRef, useEffect } from &#39;react&#39;

function OptimizedImage({ src, alt, className, ...props }) {
  const [isLoaded, setIsLoaded] = useState(false)
  const [isInView, setIsInView] = useState(false)
  const imgRef = useRef()

  useEffect(() =&gt; {
    const observer = new IntersectionObserver(
      ([entry]) =&gt; {
        if (entry.isIntersecting) {
          setIsInView(true)
          observer.disconnect()
        }
      },
      { threshold: 0.1 }
    )

    if (imgRef.current) {
      observer.observe(imgRef.current)
    }

    return () =&gt; observer.disconnect()
  }, [])

  return (
    &lt;div ref={imgRef} className={className}&gt;
      {isInView &amp;&amp; (
        &lt;img
          src={src}
          alt={alt}
          onLoad={() =&gt; setIsLoaded(true)}
          style={{
            opacity: isLoaded ? 1 : 0,
            transition: &#39;opacity 0.3s ease&#39;
          }}
          {...props}
        /&gt;
      )}
    &lt;/div&gt;
  )
}

export default OptimizedImage
</code></pre>
<h2>éƒ¨ç½²ç­–ç•¥</h2>
<h3>é™æ€ç½‘ç«™éƒ¨ç½²</h3>
<pre><code class="language-bash"># ä½¿ç”¨ Netlify
npm run build
# å°† dist æ–‡ä»¶å¤¹ä¸Šä¼ åˆ° Netlify

# ä½¿ç”¨ Vercel
npm install -g vercel
vercel --prod

# ä½¿ç”¨ GitHub Pages
npm install --save-dev gh-pages
</code></pre>
<pre><code class="language-javascript">// package.json
{
  &quot;scripts&quot;: {
    &quot;build&quot;: &quot;react-scripts build&quot;,
    &quot;deploy&quot;: &quot;gh-pages -d build&quot;,
    &quot;predeploy&quot;: &quot;npm run build&quot;
  }
}
</code></pre>
<h3>Dockeréƒ¨ç½²</h3>
<pre><code class="language-dockerfile"># Dockerfile
FROM node:18-alpine as builder

WORKDIR /app
COPY package*.json ./
RUN npm ci --only=production

COPY . .
RUN npm run build

FROM nginx:alpine
COPY --from=builder /app/dist /usr/share/nginx/html
COPY nginx.conf /etc/nginx/nginx.conf

EXPOSE 80
CMD [&quot;nginx&quot;, &quot;-g&quot;, &quot;daemon off;&quot;]
</code></pre>
<pre><code class="language-nginx"># nginx.conf
events {
    worker_connections 1024;
}

http {
    include       /etc/nginx/mime.types;
    default_type  application/octet-stream;

    server {
        listen 80;
        server_name localhost;
        root /usr/share/nginx/html;
        index index.html;

        # å¯ç”¨ gzip å‹ç¼©
        gzip on;
        gzip_vary on;
        gzip_min_length 1024;
        gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;

        # ç¼“å­˜é™æ€èµ„æº
        location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg)$ {
            expires 1y;
            add_header Cache-Control &quot;public, immutable&quot;;
        }

        # React Router æ”¯æŒ
        location / {
            try_files $uri $uri/ /index.html;
        }

        # å®‰å…¨å¤´
        add_header X-Frame-Options &quot;SAMEORIGIN&quot; always;
        add_header X-Content-Type-Options &quot;nosniff&quot; always;
        add_header X-XSS-Protection &quot;1; mode=block&quot; always;
    }
}
</code></pre>
<h3>AWS S3 + CloudFrontéƒ¨ç½²</h3>
<pre><code class="language-bash"># å®‰è£… AWS CLI
npm install -g aws-cli

# é…ç½® AWS å‡­è¯
aws configure

# æ„å»ºå¹¶éƒ¨ç½²
npm run build
aws s3 sync build/ s3://your-bucket-name --delete
aws cloudfront create-invalidation --distribution-id YOUR_DISTRIBUTION_ID --paths &quot;/*&quot;
</code></pre>
<pre><code class="language-javascript">// deploy.js
const AWS = require(&#39;aws-sdk&#39;)
const fs = require(&#39;fs&#39;)
const path = require(&#39;path&#39;)
const mime = require(&#39;mime-types&#39;)

const s3 = new AWS.S3({
  accessKeyId: process.env.AWS_ACCESS_KEY_ID,
  secretAccessKey: process.env.AWS_SECRET_ACCESS_KEY,
  region: process.env.AWS_REGION
})

const bucketName = process.env.S3_BUCKET_NAME
const buildDir = path.join(__dirname, &#39;build&#39;)

async function uploadDir(dir) {
  const files = fs.readdirSync(dir)
  
  for (const file of files) {
    const filePath = path.join(dir, file)
    const stat = fs.statSync(filePath)
    
    if (stat.isDirectory()) {
      await uploadDir(filePath)
    } else {
      const key = path.relative(buildDir, filePath).replace(/\\/g, &#39;/&#39;)
      const body = fs.readFileSync(filePath)
      const contentType = mime.lookup(filePath) || &#39;application/octet-stream&#39;
      
      await s3.upload({
        Bucket: bucketName,
        Key: key,
        Body: body,
        ContentType: contentType,
        CacheControl: key.match(/\.(js|css|png|jpg|jpeg|gif|ico|svg)$/) 
          ? &#39;max-age=31536000&#39; 
          : &#39;max-age=0&#39;
      }).promise()
      
      console.log(`Uploaded: ${key}`)
    }
  }
}

uploadDir(buildDir)
  .then(() =&gt; console.log(&#39;éƒ¨ç½²å®Œæˆ&#39;))
  .catch(console.error)
</code></pre>
<h2>CI/CDé…ç½®</h2>
<h3>GitHub Actions</h3>
<pre><code class="language-yaml"># .github/workflows/deploy.yml
name: Deploy to Production

on:
  push:
    branches: [ main ]

jobs:
  test:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v3
    
    - name: Setup Node.js
      uses: actions/setup-node@v3
      with:
        node-version: &#39;18&#39;
        cache: &#39;npm&#39;
    
    - name: Install dependencies
      run: npm ci
    
    - name: Run tests
      run: npm test -- --coverage --watchAll=false
    
    - name: Run linting
      run: npm run lint
    
    - name: Build
      run: npm run build
      env:
        REACT_APP_API_URL: ${{ secrets.REACT_APP_API_URL }}
        REACT_APP_SENTRY_DSN: ${{ secrets.REACT_APP_SENTRY_DSN }}
    
    - name: Deploy to S3
      env:
        AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}
        AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}
        AWS_REGION: ${{ secrets.AWS_REGION }}
        S3_BUCKET_NAME: ${{ secrets.S3_BUCKET_NAME }}
      run: |
        aws s3 sync build/ s3://$S3_BUCKET_NAME --delete
        aws cloudfront create-invalidation --distribution-id ${{ secrets.CLOUDFRONT_DISTRIBUTION_ID }} --paths &quot;/*&quot;
</code></pre>
<h3>Jenkins Pipeline</h3>
<pre><code class="language-groovy">// Jenkinsfile
pipeline {
    agent any
    
    environment {
        NODE_VERSION = &#39;18&#39;
        REACT_APP_API_URL = credentials(&#39;react-app-api-url&#39;)
        AWS_ACCESS_KEY_ID = credentials(&#39;aws-access-key-id&#39;)
        AWS_SECRET_ACCESS_KEY = credentials(&#39;aws-secret-access-key&#39;)
    }
    
    stages {
        stage(&#39;Checkout&#39;) {
            steps {
                checkout scm
            }
        }
        
        stage(&#39;Install Dependencies&#39;) {
            steps {
                sh &#39;npm ci&#39;
            }
        }
        
        stage(&#39;Test&#39;) {
            steps {
                sh &#39;npm test -- --coverage --watchAll=false&#39;
            }
        }
        
        stage(&#39;Build&#39;) {
            steps {
                sh &#39;npm run build&#39;
            }
        }
        
        stage(&#39;Deploy&#39;) {
            steps {
                sh &#39;&#39;&#39;
                    aws s3 sync build/ s3://your-bucket-name --delete
                    aws cloudfront create-invalidation --distribution-id YOUR_DISTRIBUTION_ID --paths &quot;/*&quot;
                &#39;&#39;&#39;
            }
        }
    }
    
    post {
        always {
            publishHTML([
                allowMissing: false,
                alwaysLinkToLastBuild: true,
                keepAll: true,
                reportDir: &#39;coverage/lcov-report&#39;,
                reportFiles: &#39;index.html&#39;,
                reportName: &#39;Coverage Report&#39;
            ])
        }
    }
}
</code></pre>
<h2>ç›‘æ§ä¸æ—¥å¿—</h2>
<h3>é”™è¯¯ç›‘æ§ - Sentry</h3>
<pre><code class="language-javascript">// src/utils/sentry.js
import * as Sentry from &#39;@sentry/react&#39;
import { BrowserTracing } from &#39;@sentry/tracing&#39;

export const initSentry = () =&gt; {
  if (process.env.NODE_ENV === &#39;production&#39;) {
    Sentry.init({
      dsn: process.env.REACT_APP_SENTRY_DSN,
      integrations: [
        new BrowserTracing()
      ],
      tracesSampleRate: 1.0,
      environment: process.env.NODE_ENV
    })
  }
}

// é”™è¯¯è¾¹ç•Œ
export const SentryErrorBoundary = Sentry.withErrorBoundary(
  ({ children }) =&gt; children,
  {
    fallback: ({ error, resetError }) =&gt; (
      &lt;div className=&quot;error-boundary&quot;&gt;
        &lt;h2&gt;åº”ç”¨å‡ºç°é”™è¯¯&lt;/h2&gt;
        &lt;p&gt;{error.message}&lt;/p&gt;
        &lt;button onClick={resetError}&gt;é‡è¯•&lt;/button&gt;
      &lt;/div&gt;
    )
  }
)
</code></pre>
<h3>æ€§èƒ½ç›‘æ§</h3>
<pre><code class="language-javascript">// src/utils/performance.js
export const measurePerformance = (name, fn) =&gt; {
  return async (...args) =&gt; {
    const start = performance.now()
    const result = await fn(...args)
    const end = performance.now()
    
    console.log(`${name} took ${end - start} milliseconds`)
    
    // å‘é€æ€§èƒ½æ•°æ®åˆ°ç›‘æ§æœåŠ¡
    if (process.env.NODE_ENV === &#39;production&#39;) {
      sendPerformanceData(name, end - start)
    }
    
    return result
  }
}

const sendPerformanceData = (name, duration) =&gt; {
  fetch(&#39;/api/performance&#39;, {
    method: &#39;POST&#39;,
    headers: {
      &#39;Content-Type&#39;: &#39;application/json&#39;
    },
    body: JSON.stringify({
      name,
      duration,
      timestamp: Date.now(),
      userAgent: navigator.userAgent
    })
  })
}

// ç›‘æ§ Web Vitals
export const measureWebVitals = () =&gt; {
  if (process.env.NODE_ENV === &#39;production&#39;) {
    import(&#39;web-vitals&#39;).then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) =&gt; {
      getCLS(sendToAnalytics)
      getFID(sendToAnalytics)
      getFCP(sendToAnalytics)
      getLCP(sendToAnalytics)
      getTTFB(sendToAnalytics)
    })
  }
}

const sendToAnalytics = (metric) =&gt; {
  // å‘é€åˆ° Google Analytics
  if (window.gtag) {
    window.gtag(&#39;event&#39;, metric.name, {
      event_category: &#39;Web Vitals&#39;,
      event_label: metric.id,
      value: Math.round(metric.name === &#39;CLS&#39; ? metric.value * 1000 : metric.value),
      non_interaction: true
    })
  }
}
</code></pre>
<h3>ç”¨æˆ·è¡Œä¸ºåˆ†æ</h3>
<pre><code class="language-javascript">// src/utils/analytics.js
class Analytics {
  constructor() {
    this.userId = null
    this.sessionId = this.generateSessionId()
  }
  
  init(userId) {
    this.userId = userId
    
    if (process.env.NODE_ENV === &#39;production&#39;) {
      // åˆå§‹åŒ– Google Analytics
      window.gtag(&#39;config&#39;, process.env.REACT_APP_GOOGLE_ANALYTICS_ID, {
        user_id: userId
      })
    }
  }
  
  trackEvent(eventName, properties = {}) {
    if (process.env.NODE_ENV === &#39;production&#39;) {
      window.gtag(&#39;event&#39;, eventName, {
        ...properties,
        user_id: this.userId,
        session_id: this.sessionId
      })
    }
    
    console.log(&#39;Event tracked:&#39;, eventName, properties)
  }
  
  trackPageView(path) {
    if (process.env.NODE_ENV === &#39;production&#39;) {
      window.gtag(&#39;config&#39;, process.env.REACT_APP_GOOGLE_ANALYTICS_ID, {
        page_path: path
      })
    }
    
    console.log(&#39;Page view tracked:&#39;, path)
  }
  
  generateSessionId() {
    return Date.now().toString(36) + Math.random().toString(36).substr(2)
  }
}

export default new Analytics()
</code></pre>
<h2>å®‰å…¨é…ç½®</h2>
<h3>å†…å®¹å®‰å…¨ç­–ç•¥ (CSP)</h3>
<pre><code class="language-html">&lt;!-- public/index.html --&gt;
&lt;meta http-equiv=&quot;Content-Security-Policy&quot; content=&quot;
  default-src &#39;self&#39;;
  script-src &#39;self&#39; &#39;unsafe-inline&#39; https://www.googletagmanager.com;
  style-src &#39;self&#39; &#39;unsafe-inline&#39; https://fonts.googleapis.com;
  img-src &#39;self&#39; data: https:;
  font-src &#39;self&#39; https://fonts.gstatic.com;
  connect-src &#39;self&#39; https://api.example.com;
&quot;&gt;
</code></pre>
<h3>ç¯å¢ƒå˜é‡å®‰å…¨</h3>
<pre><code class="language-javascript">// src/utils/security.js
export const sanitizeConfig = (config) =&gt; {
  const allowedKeys = [
    &#39;apiUrl&#39;,
    &#39;cdnUrl&#39;,
    &#39;googleAnalyticsId&#39;
  ]
  
  return Object.keys(config)
    .filter(key =&gt; allowedKeys.includes(key))
    .reduce((obj, key) =&gt; {
      obj[key] = config[key]
      return obj
    }, {})
}

// ä¸è¦åœ¨å®¢æˆ·ç«¯æš´éœ²æ•æ„Ÿä¿¡æ¯
export const getPublicConfig = () =&gt; {
  return sanitizeConfig({
    apiUrl: process.env.REACT_APP_API_URL,
    cdnUrl: process.env.REACT_APP_CDN_URL,
    googleAnalyticsId: process.env.REACT_APP_GOOGLE_ANALYTICS_ID
  })
}
</code></pre>
<h2>ç¼“å­˜ç­–ç•¥</h2>
<h3>æµè§ˆå™¨ç¼“å­˜</h3>
<pre><code class="language-javascript">// src/utils/cache.js
export const getCacheHeaders = (fileType) =&gt; {
  const cacheHeaders = {
    &#39;js&#39;: &#39;max-age=31536000, immutable&#39;,
    &#39;css&#39;: &#39;max-age=31536000, immutable&#39;,
    &#39;html&#39;: &#39;max-age=0, must-revalidate&#39;,
    &#39;images&#39;: &#39;max-age=2592000&#39;
  }
  
  return cacheHeaders[fileType] || &#39;max-age=86400&#39;
}

// Service Worker ç¼“å­˜
export const registerServiceWorker = () =&gt; {
  if (&#39;serviceWorker&#39; in navigator &amp;&amp; process.env.NODE_ENV === &#39;production&#39;) {
    navigator.serviceWorker.register(&#39;/sw.js&#39;)
      .then(registration =&gt; {
        console.log(&#39;SW registered: &#39;, registration)
      })
      .catch(registrationError =&gt; {
        console.log(&#39;SW registration failed: &#39;, registrationError)
      })
  }
}
</code></pre>
<pre><code class="language-javascript">// public/sw.js
const CACHE_NAME = &#39;my-app-v1&#39;
const urlsToCache = [
  &#39;/&#39;,
  &#39;/static/js/bundle.js&#39;,
  &#39;/static/css/main.css&#39;
]

self.addEventListener(&#39;install&#39;, event =&gt; {
  event.waitUntil(
    caches.open(CACHE_NAME)
      .then(cache =&gt; cache.addAll(urlsToCache))
  )
})

self.addEventListener(&#39;fetch&#39;, event =&gt; {
  event.respondWith(
    caches.match(event.request)
      .then(response =&gt; {
        if (response) {
          return response
        }
        return fetch(event.request)
      })
  )
})
</code></pre>
<h2>éƒ¨ç½²æœ€ä½³å®è·µ</h2>
<h3>1. æ¸è¿›å¼éƒ¨ç½²</h3>
<pre><code class="language-javascript">// è“ç»¿éƒ¨ç½²ç¤ºä¾‹
const deploymentStrategy = {
  type: &#39;blue-green&#39;,
  healthCheck: &#39;/health&#39;,
  rollbackThreshold: 5, // 5% é”™è¯¯ç‡è§¦å‘å›æ»š
  
  deploy: async (newVersion) =&gt; {
    // éƒ¨ç½²åˆ°ç»¿è‰²ç¯å¢ƒ
    await deployToGreen(newVersion)
    
    // å¥åº·æ£€æŸ¥
    const isHealthy = await performHealthCheck()
    if (!isHealthy) {
      throw new Error(&#39;å¥åº·æ£€æŸ¥å¤±è´¥&#39;)
    }
    
    // åˆ‡æ¢æµé‡
    await switchTraffic(&#39;green&#39;)
    
    // ç›‘æ§æŒ‡æ ‡
    await monitorMetrics()
  }
}
</code></pre>
<h3>2. ç‰ˆæœ¬ç®¡ç†</h3>
<pre><code class="language-javascript">// src/utils/version.js
export const getVersion = () =&gt; {
  return {
    version: process.env.REACT_APP_VERSION || &#39;unknown&#39;,
    buildTime: process.env.REACT_APP_BUILD_TIME || &#39;unknown&#39;,
    gitHash: process.env.REACT_APP_GIT_HASH || &#39;unknown&#39;
  }
}

// æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯
export const VersionInfo = () =&gt; {
  const version = getVersion()
  
  return (
    &lt;div className=&quot;version-info&quot;&gt;
      &lt;p&gt;ç‰ˆæœ¬: {version.version}&lt;/p&gt;
      &lt;p&gt;æ„å»ºæ—¶é—´: {version.buildTime}&lt;/p&gt;
      &lt;p&gt;Gitå“ˆå¸Œ: {version.gitHash}&lt;/p&gt;
    &lt;/div&gt;
  )
}
</code></pre>
<h3>3. å¥åº·æ£€æŸ¥</h3>
<pre><code class="language-javascript">// src/utils/health.js
export const healthCheck = async () =&gt; {
  const checks = [
    checkAPI,
    checkDependencies,
    checkPerformance
  ]
  
  const results = await Promise.allSettled(checks.map(check =&gt; check()))
  
  const isHealthy = results.every(result =&gt; result.status === &#39;fulfilled&#39;)
  
  return {
    healthy: isHealthy,
    checks: results.map((result, index) =&gt; ({
      name: checks[index].name,
      status: result.status,
      message: result.reason?.message || &#39;OK&#39;
    }))
  }
}

const checkAPI = async () =&gt; {
  const response = await fetch(&#39;/api/health&#39;)
  if (!response.ok) {
    throw new Error(&#39;APIå¥åº·æ£€æŸ¥å¤±è´¥&#39;)
  }
}

const checkDependencies = async () =&gt; {
  // æ£€æŸ¥å…³é”®ä¾èµ–æ˜¯å¦å¯ç”¨
  if (!window.fetch) {
    throw new Error(&#39;Fetch APIä¸å¯ç”¨&#39;)
  }
}

const checkPerformance = async () =&gt; {
  if (performance.now() &gt; 10000) {
    throw new Error(&#39;é¡µé¢åŠ è½½æ—¶é—´è¿‡é•¿&#39;)
  }
}
</code></pre>
<h2>æ€»ç»“</h2>
<p>ç”Ÿäº§éƒ¨ç½²æ˜¯ä¸€ä¸ªå¤æ‚çš„è¿‡ç¨‹ï¼Œéœ€è¦è€ƒè™‘å¤šä¸ªæ–¹é¢ï¼š</p>
<ol>
<li><strong>æ„å»ºä¼˜åŒ–</strong> - ä»£ç å‹ç¼©ã€èµ„æºä¼˜åŒ–ã€ç¼“å­˜ç­–ç•¥</li>
<li><strong>ç¯å¢ƒé…ç½®</strong> - ç¯å¢ƒå˜é‡ã€APIé…ç½®ã€å®‰å…¨è®¾ç½®</li>
<li><strong>éƒ¨ç½²ç­–ç•¥</strong> - è‡ªåŠ¨åŒ–éƒ¨ç½²ã€ç‰ˆæœ¬ç®¡ç†ã€å›æ»šæœºåˆ¶</li>
<li><strong>ç›‘æ§ä½“ç³»</strong> - é”™è¯¯ç›‘æ§ã€æ€§èƒ½ç›‘æ§ã€ç”¨æˆ·è¡Œä¸ºåˆ†æ</li>
<li><strong>å®‰å…¨é˜²æŠ¤</strong> - CSPé…ç½®ã€æ•°æ®åŠ å¯†ã€æƒé™æ§åˆ¶</li>
</ol>
<p>é€šè¿‡å®Œå–„çš„éƒ¨ç½²æµç¨‹å’Œç›‘æ§ä½“ç³»ï¼Œå¯ä»¥ç¡®ä¿Reactåº”ç”¨åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ç¨³å®šã€é«˜æ•ˆåœ°è¿è¡Œã€‚ </p>

          </div>

          <!-- æ–‡æ¡£å¯¼èˆª -->
          <div class="doc-navigation">
            
              <a href="29-é¡¹ç›®æ„å»º.html" class="nav-btn prev-btn">
                <span class="nav-icon">â†</span>
                <div class="nav-text">
                  <span class="nav-label">ä¸Šä¸€ç¯‡</span>
                  <span class="nav-title">é¡¹ç›®æ„å»º</span>
                </div>
              </a>
            
            
            
              <a href="31-å¼€å‘è€…å·¥å…·.html" class="nav-btn next-btn">
                <div class="nav-text">
                  <span class="nav-label">ä¸‹ä¸€ç¯‡</span>
                  <span class="nav-title">å¼€å‘è€…å·¥å…·</span>
                </div>
                <span class="nav-icon">â†’</span>
              </a>
            
          </div>
        </article>
      </main>
    </div>

    <!-- è¿”å›é¡¶éƒ¨æŒ‰é’® -->
    <button class="back-to-top" id="backToTop" onclick="scrollToTop()">
      <span>â†‘</span>
    </button>

    <!-- åº•éƒ¨ -->
    <footer class="footer">
      <div class="footer-content">
        <p>&copy; 2024 React ä¸­æ–‡æ–‡æ¡£. åŸºäº React 18.x æ„å»º</p>
        <p>Made with â¤ï¸ by Reactä¸­æ–‡ç¤¾åŒº</p>
      </div>
    </footer>
  </div>

  <script src="assets/script.js"></script>
</body>
</html>