<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>React-Router - React ä¸­æ–‡æ–‡æ¡£</title>
  <meta name="description" content="ä»å…¥é—¨åˆ°ç²¾é€šï¼Œå…¨é¢æŒæ¡Reactå¼€å‘æŠ€èƒ½">
  <link rel="stylesheet" href="assets/style.css">
  <link rel="stylesheet" href="assets/highlight.css">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>âš›ï¸</text></svg>">
</head>
<body>
  <div class="container">
    <!-- é¡¶éƒ¨å¯¼èˆª -->
    <header class="header">
      <div class="header-content">
        <div class="logo">
          <span class="logo-icon">âš›ï¸</span>
          <div class="logo-text">
            <h1>React ä¸­æ–‡æ–‡æ¡£</h1>
            <p>ç°ä»£åŒ–çš„Reactå­¦ä¹ æŒ‡å—</p>
          </div>
        </div>
        <nav class="header-nav">
          <a href="index.html" class="nav-link">é¦–é¡µ</a>
          <a href="#" class="nav-link" onclick="toggleSidebar()">ç›®å½•</a>
          <a href="https://github.com/facebook/react" target="_blank" class="nav-link">GitHub</a>
        </nav>
      </div>
    </header>

    <div class="main-layout">
      <!-- ä¾§è¾¹æ  -->
      <aside class="sidebar" id="sidebar">
        <div class="sidebar-content">
          <div class="search-box">
            <input type="text" placeholder="æœç´¢æ–‡æ¡£..." id="searchInput" onkeyup="searchDocs()">
            <span class="search-icon">ğŸ”</span>
          </div>
          <nav class="doc-nav">
            
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ“š</span>
          åŸºç¡€æ¦‚å¿µ
        </h3>
        <ul class="category-docs">
          <li><a href="01-Reactç®€ä»‹.html" class="doc-link">Reactç®€ä»‹</a></li><li><a href="02-ç¯å¢ƒæ­å»º.html" class="doc-link">ç¯å¢ƒæ­å»º</a></li><li><a href="03-JSXè¯­æ³•.html" class="doc-link">JSXè¯­æ³•</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ§©</span>
          ç»„ä»¶å¼€å‘
        </h3>
        <ul class="category-docs">
          <li><a href="04-ç»„ä»¶åŸºç¡€.html" class="doc-link">ç»„ä»¶åŸºç¡€</a></li><li><a href="05-Propsä¸State.html" class="doc-link">Propsä¸State</a></li><li><a href="06-äº‹ä»¶å¤„ç†.html" class="doc-link">äº‹ä»¶å¤„ç†</a></li><li><a href="07-æ¡ä»¶æ¸²æŸ“.html" class="doc-link">æ¡ä»¶æ¸²æŸ“</a></li><li><a href="08-åˆ—è¡¨æ¸²æŸ“.html" class="doc-link">åˆ—è¡¨æ¸²æŸ“</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ£</span>
          Hooks API
        </h3>
        <ul class="category-docs">
          <li><a href="09-Hooksæ¦‚è¿°.html" class="doc-link">Hooksæ¦‚è¿°</a></li><li><a href="10-useState.html" class="doc-link">useState</a></li><li><a href="11-useEffect.html" class="doc-link">useEffect</a></li><li><a href="12-useContext.html" class="doc-link">useContext</a></li><li><a href="13-useReducer.html" class="doc-link">useReducer</a></li><li><a href="14-useMemoå’ŒuseCallback.html" class="doc-link">useMemoå’ŒuseCallback</a></li><li><a href="15-useRef.html" class="doc-link">useRef</a></li><li><a href="16-è‡ªå®šä¹‰Hooks.html" class="doc-link">è‡ªå®šä¹‰Hooks</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ”„</span>
          ç”Ÿå‘½å‘¨æœŸ
        </h3>
        <ul class="category-docs">
          <li><a href="17-ç”Ÿå‘½å‘¨æœŸæ–¹æ³•.html" class="doc-link">ç”Ÿå‘½å‘¨æœŸæ–¹æ³•</a></li><li><a href="18-å‰¯ä½œç”¨å¤„ç†.html" class="doc-link">å‰¯ä½œç”¨å¤„ç†</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ¨</span>
          æ ·å¼ä¸UI
        </h3>
        <ul class="category-docs">
          <li><a href="19-æ ·å¼å¤„ç†.html" class="doc-link">æ ·å¼å¤„ç†</a></li><li><a href="20-åŠ¨ç”»æ•ˆæœ.html" class="doc-link">åŠ¨ç”»æ•ˆæœ</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ—ºï¸</span>
          è·¯ç”±ç®¡ç†
        </h3>
        <ul class="category-docs">
          <li><a href="21-React-Router.html" class="doc-link">React-Router</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ“¦</span>
          çŠ¶æ€ç®¡ç†
        </h3>
        <ul class="category-docs">
          <li><a href="22-Context-API.html" class="doc-link">Context-API</a></li><li><a href="23-Reduxé›†æˆ.html" class="doc-link">Reduxé›†æˆ</a></li><li><a href="24-ZustandçŠ¶æ€ç®¡ç†.html" class="doc-link">ZustandçŠ¶æ€ç®¡ç†</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸš€</span>
          æ€§èƒ½ä¼˜åŒ–
        </h3>
        <ul class="category-docs">
          <li><a href="25-æ€§èƒ½ä¼˜åŒ–æŠ€å·§.html" class="doc-link">æ€§èƒ½ä¼˜åŒ–æŠ€å·§</a></li><li><a href="26-ä»£ç åˆ†å‰².html" class="doc-link">ä»£ç åˆ†å‰²</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ§ª</span>
          æµ‹è¯•
        </h3>
        <ul class="category-docs">
          <li><a href="27-å•å…ƒæµ‹è¯•.html" class="doc-link">å•å…ƒæµ‹è¯•</a></li><li><a href="28-é›†æˆæµ‹è¯•.html" class="doc-link">é›†æˆæµ‹è¯•</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ—ï¸</span>
          æ„å»ºä¸éƒ¨ç½²
        </h3>
        <ul class="category-docs">
          <li><a href="29-é¡¹ç›®æ„å»º.html" class="doc-link">é¡¹ç›®æ„å»º</a></li><li><a href="30-ç”Ÿäº§éƒ¨ç½².html" class="doc-link">ç”Ÿäº§éƒ¨ç½²</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ› ï¸</span>
          å¼€å‘å·¥å…·
        </h3>
        <ul class="category-docs">
          <li><a href="31-å¼€å‘è€…å·¥å…·.html" class="doc-link">å¼€å‘è€…å·¥å…·</a></li><li><a href="32-è°ƒè¯•æŠ€å·§.html" class="doc-link">è°ƒè¯•æŠ€å·§</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ“–</span>
          APIå‚è€ƒ
        </h3>
        <ul class="category-docs">
          <li><a href="33-React-APIå®Œæ•´å‚è€ƒ.html" class="doc-link">React-APIå®Œæ•´å‚è€ƒ</a></li><li><a href="34-DOMå…ƒç´ å±æ€§.html" class="doc-link">DOMå…ƒç´ å±æ€§</a></li><li><a href="35-åˆæˆäº‹ä»¶.html" class="doc-link">åˆæˆäº‹ä»¶</a></li><li><a href="React-Hookså®Œæ•´å‚è€ƒ.html" class="doc-link">React-Hookså®Œæ•´å‚è€ƒ</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ’¡</span>
          æœ€ä½³å®è·µ
        </h3>
        <ul class="category-docs">
          <li><a href="36-ç¼–ç è§„èŒƒ.html" class="doc-link">ç¼–ç è§„èŒƒ</a></li><li><a href="37-é¡¹ç›®æ¶æ„.html" class="doc-link">é¡¹ç›®æ¶æ„</a></li><li><a href="38-å¸¸è§é—®é¢˜.html" class="doc-link">å¸¸è§é—®é¢˜</a></li>
        </ul>
      </div>
          </nav>
        </div>
      </aside>

      <!-- ä¸»å†…å®¹åŒº -->
      <main class="content">
        <article class="doc-article">
          <div class="doc-header">
            <div class="breadcrumb">
              <a href="index.html">é¦–é¡µ</a>
              <span class="separator">></span>
              <span class="current">React-Router</span>
            </div>
            <h1 class="doc-title">React-Router</h1>
            <div class="doc-meta">
              <span class="category" style="background: #ffecd2">
                ğŸ—ºï¸ è·¯ç”±ç®¡ç†
              </span>
            </div>
          </div>
          
          <div class="doc-content">
            <h1>21-React Router</h1>
<p>React Router æ˜¯Reactåº”ç”¨ä¸­æœ€æµè¡Œçš„è·¯ç”±åº“ï¼Œå®ƒå…è®¸ä½ æ„å»ºå•é¡µåº”ç”¨ï¼ˆSPAï¼‰ä¸­çš„å¯¼èˆªå’Œè·¯ç”±åŠŸèƒ½ã€‚</p>
<h2>å®‰è£…å’ŒåŸºç¡€è®¾ç½®</h2>
<h3>å®‰è£…</h3>
<pre><code class="language-bash">npm install react-router-dom
# æˆ–
yarn add react-router-dom
</code></pre>
<h3>åŸºç¡€è·¯ç”±è®¾ç½®</h3>
<pre><code class="language-jsx">import { BrowserRouter, Routes, Route, Link } from &#39;react-router-dom&#39;;

function App() {
  return (
    &lt;BrowserRouter&gt;
      &lt;nav&gt;
        &lt;Link to=&quot;/&quot;&gt;é¦–é¡µ&lt;/Link&gt;
        &lt;Link to=&quot;/about&quot;&gt;å…³äº&lt;/Link&gt;
        &lt;Link to=&quot;/contact&quot;&gt;è”ç³»&lt;/Link&gt;
      &lt;/nav&gt;
      
      &lt;Routes&gt;
        &lt;Route path=&quot;/&quot; element={&lt;Home /&gt;} /&gt;
        &lt;Route path=&quot;/about&quot; element={&lt;About /&gt;} /&gt;
        &lt;Route path=&quot;/contact&quot; element={&lt;Contact /&gt;} /&gt;
      &lt;/Routes&gt;
    &lt;/BrowserRouter&gt;
  );
}

function Home() {
  return &lt;h1&gt;é¦–é¡µ&lt;/h1&gt;;
}

function About() {
  return &lt;h1&gt;å…³äºæˆ‘ä»¬&lt;/h1&gt;;
}

function Contact() {
  return &lt;h1&gt;è”ç³»æˆ‘ä»¬&lt;/h1&gt;;
}
</code></pre>
<h2>æ ¸å¿ƒç»„ä»¶</h2>
<h3>BrowserRouter vs HashRouter</h3>
<pre><code class="language-jsx">// BrowserRouter - ä½¿ç”¨HTML5 history API
import { BrowserRouter } from &#39;react-router-dom&#39;;

function App() {
  return (
    &lt;BrowserRouter&gt;
      {/* è·¯ç”±é…ç½® */}
    &lt;/BrowserRouter&gt;
  );
}

// HashRouter - ä½¿ç”¨URL hash
import { HashRouter } from &#39;react-router-dom&#39;;

function App() {
  return (
    &lt;HashRouter&gt;
      {/* è·¯ç”±é…ç½® */}
    &lt;/HashRouter&gt;
  );
}
</code></pre>
<h3>Routeså’ŒRoute</h3>
<pre><code class="language-jsx">function App() {
  return (
    &lt;BrowserRouter&gt;
      &lt;Routes&gt;
        {/* ç²¾ç¡®åŒ¹é… */}
        &lt;Route path=&quot;/&quot; element={&lt;Home /&gt;} /&gt;
        
        {/* å‚æ•°è·¯ç”± */}
        &lt;Route path=&quot;/user/:id&quot; element={&lt;UserProfile /&gt;} /&gt;
        
        {/* åµŒå¥—è·¯ç”± */}
        &lt;Route path=&quot;/dashboard/*&quot; element={&lt;Dashboard /&gt;} /&gt;
        
        {/* 404é¡µé¢ */}
        &lt;Route path=&quot;*&quot; element={&lt;NotFound /&gt;} /&gt;
      &lt;/Routes&gt;
    &lt;/BrowserRouter&gt;
  );
}
</code></pre>
<h2>å¯¼èˆªç»„ä»¶</h2>
<h3>Link</h3>
<pre><code class="language-jsx">import { Link } from &#39;react-router-dom&#39;;

function Navigation() {
  return (
    &lt;nav&gt;
      &lt;Link to=&quot;/&quot;&gt;é¦–é¡µ&lt;/Link&gt;
      &lt;Link to=&quot;/about&quot;&gt;å…³äº&lt;/Link&gt;
      &lt;Link to=&quot;/products/123&quot;&gt;äº§å“è¯¦æƒ…&lt;/Link&gt;
      
      {/* å¸¦çŠ¶æ€çš„é“¾æ¥ */}
      &lt;Link to=&quot;/profile&quot; state={{ from: &#39;navigation&#39; }}&gt;
        ä¸ªäººèµ„æ–™
      &lt;/Link&gt;
      
      {/* æ›¿æ¢å†å²è®°å½• */}
      &lt;Link to=&quot;/login&quot; replace&gt;
        ç™»å½•
      &lt;/Link&gt;
    &lt;/nav&gt;
  );
}
</code></pre>
<h3>NavLink</h3>
<pre><code class="language-jsx">import { NavLink } from &#39;react-router-dom&#39;;

function Navigation() {
  return (
    &lt;nav&gt;
      &lt;NavLink
        to=&quot;/&quot;
        className={({ isActive }) =&gt; 
          isActive ? &#39;nav-link active&#39; : &#39;nav-link&#39;
        }
      &gt;
        é¦–é¡µ
      &lt;/NavLink&gt;
      
      &lt;NavLink
        to=&quot;/about&quot;
        style={({ isActive }) =&gt; ({
          color: isActive ? &#39;#ff6b6b&#39; : &#39;#333&#39;,
          fontWeight: isActive ? &#39;bold&#39; : &#39;normal&#39;
        })}
      &gt;
        å…³äº
      &lt;/NavLink&gt;
    &lt;/nav&gt;
  );
}
</code></pre>
<h2>è·¯ç”±å‚æ•°</h2>
<h3>URLå‚æ•°</h3>
<pre><code class="language-jsx">import { useParams } from &#39;react-router-dom&#39;;

function UserProfile() {
  const { id } = useParams();
  
  return (
    &lt;div&gt;
      &lt;h1&gt;ç”¨æˆ·èµ„æ–™&lt;/h1&gt;
      &lt;p&gt;ç”¨æˆ·ID: {id}&lt;/p&gt;
    &lt;/div&gt;
  );
}

// è·¯ç”±é…ç½®
&lt;Route path=&quot;/user/:id&quot; element={&lt;UserProfile /&gt;} /&gt;

// å¯é€‰å‚æ•°
&lt;Route path=&quot;/posts/:id?&quot; element={&lt;Posts /&gt;} /&gt;

// å¤šä¸ªå‚æ•°
&lt;Route path=&quot;/category/:categoryId/product/:productId&quot; element={&lt;Product /&gt;} /&gt;
</code></pre>
<h3>æŸ¥è¯¢å‚æ•°</h3>
<pre><code class="language-jsx">import { useSearchParams } from &#39;react-router-dom&#39;;

function ProductList() {
  const [searchParams, setSearchParams] = useSearchParams();
  
  const category = searchParams.get(&#39;category&#39;);
  const sort = searchParams.get(&#39;sort&#39;);
  const page = searchParams.get(&#39;page&#39;) || &#39;1&#39;;

  const handleFilterChange = (newCategory) =&gt; {
    setSearchParams({
      category: newCategory,
      sort: sort || &#39;name&#39;,
      page: &#39;1&#39;
    });
  };

  return (
    &lt;div&gt;
      &lt;h1&gt;äº§å“åˆ—è¡¨&lt;/h1&gt;
      &lt;p&gt;åˆ†ç±»: {category}&lt;/p&gt;
      &lt;p&gt;æ’åº: {sort}&lt;/p&gt;
      &lt;p&gt;é¡µç : {page}&lt;/p&gt;
      
      &lt;button onClick={() =&gt; handleFilterChange(&#39;electronics&#39;)}&gt;
        ç”µå­äº§å“
      &lt;/button&gt;
      &lt;button onClick={() =&gt; handleFilterChange(&#39;books&#39;)}&gt;
        å›¾ä¹¦
      &lt;/button&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<h2>ç¨‹åºå¼å¯¼èˆª</h2>
<h3>useNavigate</h3>
<pre><code class="language-jsx">import { useNavigate } from &#39;react-router-dom&#39;;

function LoginForm() {
  const navigate = useNavigate();

  const handleLogin = async (credentials) =&gt; {
    try {
      await login(credentials);
      // ç™»å½•æˆåŠŸåå¯¼èˆª
      navigate(&#39;/dashboard&#39;);
    } catch (error) {
      console.error(&#39;ç™»å½•å¤±è´¥&#39;);
    }
  };

  const handleCancel = () =&gt; {
    // è¿”å›ä¸Šä¸€é¡µ
    navigate(-1);
  };

  const handleGoHome = () =&gt; {
    // æ›¿æ¢å½“å‰å†å²è®°å½•
    navigate(&#39;/&#39;, { replace: true });
  };

  const handleNavigateWithState = () =&gt; {
    // ä¼ é€’çŠ¶æ€
    navigate(&#39;/profile&#39;, { 
      state: { 
        from: &#39;login&#39;,
        timestamp: Date.now()
      }
    });
  };

  return (
    &lt;form onSubmit={handleLogin}&gt;
      {/* è¡¨å•å†…å®¹ */}
      &lt;button type=&quot;submit&quot;&gt;ç™»å½•&lt;/button&gt;
      &lt;button type=&quot;button&quot; onClick={handleCancel}&gt;å–æ¶ˆ&lt;/button&gt;
    &lt;/form&gt;
  );
}
</code></pre>
<h2>åµŒå¥—è·¯ç”±</h2>
<h3>åŸºç¡€åµŒå¥—è·¯ç”±</h3>
<pre><code class="language-jsx">import { Routes, Route, Outlet, Link } from &#39;react-router-dom&#39;;

function Dashboard() {
  return (
    &lt;div&gt;
      &lt;h1&gt;ä»ªè¡¨æ¿&lt;/h1&gt;
      &lt;nav&gt;
        &lt;Link to=&quot;profile&quot;&gt;ä¸ªäººèµ„æ–™&lt;/Link&gt;
        &lt;Link to=&quot;settings&quot;&gt;è®¾ç½®&lt;/Link&gt;
        &lt;Link to=&quot;analytics&quot;&gt;åˆ†æ&lt;/Link&gt;
      &lt;/nav&gt;
      
      {/* å­è·¯ç”±æ¸²æŸ“ä½ç½® */}
      &lt;Outlet /&gt;
    &lt;/div&gt;
  );
}

function Profile() {
  return &lt;h2&gt;ä¸ªäººèµ„æ–™é¡µé¢&lt;/h2&gt;;
}

function Settings() {
  return &lt;h2&gt;è®¾ç½®é¡µé¢&lt;/h2&gt;;
}

function Analytics() {
  return &lt;h2&gt;åˆ†æé¡µé¢&lt;/h2&gt;;
}

function App() {
  return (
    &lt;BrowserRouter&gt;
      &lt;Routes&gt;
        &lt;Route path=&quot;/&quot; element={&lt;Home /&gt;} /&gt;
        &lt;Route path=&quot;/dashboard&quot; element={&lt;Dashboard /&gt;}&gt;
          &lt;Route path=&quot;profile&quot; element={&lt;Profile /&gt;} /&gt;
          &lt;Route path=&quot;settings&quot; element={&lt;Settings /&gt;} /&gt;
          &lt;Route path=&quot;analytics&quot; element={&lt;Analytics /&gt;} /&gt;
        &lt;/Route&gt;
      &lt;/Routes&gt;
    &lt;/BrowserRouter&gt;
  );
}
</code></pre>
<h3>ç´¢å¼•è·¯ç”±</h3>
<pre><code class="language-jsx">function Dashboard() {
  return (
    &lt;div&gt;
      &lt;h1&gt;ä»ªè¡¨æ¿&lt;/h1&gt;
      &lt;nav&gt;
        &lt;Link to=&quot;&quot;&gt;æ¦‚è§ˆ&lt;/Link&gt;
        &lt;Link to=&quot;profile&quot;&gt;ä¸ªäººèµ„æ–™&lt;/Link&gt;
        &lt;Link to=&quot;settings&quot;&gt;è®¾ç½®&lt;/Link&gt;
      &lt;/nav&gt;
      &lt;Outlet /&gt;
    &lt;/div&gt;
  );
}

function DashboardOverview() {
  return &lt;h2&gt;ä»ªè¡¨æ¿æ¦‚è§ˆ&lt;/h2&gt;;
}

// è·¯ç”±é…ç½®
&lt;Route path=&quot;/dashboard&quot; element={&lt;Dashboard /&gt;}&gt;
  &lt;Route index element={&lt;DashboardOverview /&gt;} /&gt;
  &lt;Route path=&quot;profile&quot; element={&lt;Profile /&gt;} /&gt;
  &lt;Route path=&quot;settings&quot; element={&lt;Settings /&gt;} /&gt;
&lt;/Route&gt;
</code></pre>
<h2>è·¯ç”±å®ˆå«</h2>
<h3>ç§æœ‰è·¯ç”±ä¿æŠ¤</h3>
<pre><code class="language-jsx">import { Navigate, useLocation } from &#39;react-router-dom&#39;;

function PrivateRoute({ children }) {
  const isAuthenticated = useAuth(); // è‡ªå®šä¹‰è®¤è¯Hook
  const location = useLocation();

  if (!isAuthenticated) {
    // é‡å®šå‘åˆ°ç™»å½•é¡µï¼Œå¹¶ä¿å­˜å½“å‰ä½ç½®
    return &lt;Navigate to=&quot;/login&quot; state={{ from: location }} replace /&gt;;
  }

  return children;
}

// ä½¿ç”¨
function App() {
  return (
    &lt;BrowserRouter&gt;
      &lt;Routes&gt;
        &lt;Route path=&quot;/login&quot; element={&lt;Login /&gt;} /&gt;
        &lt;Route path=&quot;/dashboard&quot; element={
          &lt;PrivateRoute&gt;
            &lt;Dashboard /&gt;
          &lt;/PrivateRoute&gt;
        } /&gt;
      &lt;/Routes&gt;
    &lt;/BrowserRouter&gt;
  );
}
</code></pre>
<h3>è§’è‰²æƒé™ä¿æŠ¤</h3>
<pre><code class="language-jsx">function RoleBasedRoute({ children, requiredRole }) {
  const { user } = useAuth();
  const location = useLocation();

  if (!user) {
    return &lt;Navigate to=&quot;/login&quot; state={{ from: location }} replace /&gt;;
  }

  if (requiredRole &amp;&amp; !user.roles.includes(requiredRole)) {
    return &lt;Navigate to=&quot;/unauthorized&quot; replace /&gt;;
  }

  return children;
}

// ä½¿ç”¨
&lt;Route path=&quot;/admin&quot; element={
  &lt;RoleBasedRoute requiredRole=&quot;admin&quot;&gt;
    &lt;AdminPanel /&gt;
  &lt;/RoleBasedRoute&gt;
} /&gt;
</code></pre>
<h2>è·å–è·¯ç”±ä¿¡æ¯</h2>
<h3>useLocation</h3>
<pre><code class="language-jsx">import { useLocation } from &#39;react-router-dom&#39;;

function CurrentLocation() {
  const location = useLocation();

  return (
    &lt;div&gt;
      &lt;p&gt;å½“å‰è·¯å¾„: {location.pathname}&lt;/p&gt;
      &lt;p&gt;æŸ¥è¯¢å‚æ•°: {location.search}&lt;/p&gt;
      &lt;p&gt;Hash: {location.hash}&lt;/p&gt;
      &lt;p&gt;çŠ¶æ€: {JSON.stringify(location.state)}&lt;/p&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<h3>useParams</h3>
<pre><code class="language-jsx">import { useParams } from &#39;react-router-dom&#39;;

function ProductDetail() {
  const { categoryId, productId } = useParams();

  return (
    &lt;div&gt;
      &lt;h1&gt;äº§å“è¯¦æƒ…&lt;/h1&gt;
      &lt;p&gt;åˆ†ç±»ID: {categoryId}&lt;/p&gt;
      &lt;p&gt;äº§å“ID: {productId}&lt;/p&gt;
    &lt;/div&gt;
  );
}

// è·¯ç”±é…ç½®
&lt;Route path=&quot;/category/:categoryId/product/:productId&quot; element={&lt;ProductDetail /&gt;} /&gt;
</code></pre>
<h2>æ•°æ®åŠ è½½</h2>
<h3>Loaderå‡½æ•°ï¼ˆReact Router v6.4+ï¼‰</h3>
<pre><code class="language-jsx">import { createBrowserRouter, useLoaderData } from &#39;react-router-dom&#39;;

// æ•°æ®åŠ è½½å‡½æ•°
async function productLoader({ params }) {
  const response = await fetch(`/api/products/${params.productId}`);
  if (!response.ok) {
    throw new Response(&#39;Not Found&#39;, { status: 404 });
  }
  return response.json();
}

function ProductDetail() {
  const product = useLoaderData();

  return (
    &lt;div&gt;
      &lt;h1&gt;{product.name}&lt;/h1&gt;
      &lt;p&gt;{product.description}&lt;/p&gt;
      &lt;p&gt;ä»·æ ¼: ${product.price}&lt;/p&gt;
    &lt;/div&gt;
  );
}

// è·¯ç”±é…ç½®
const router = createBrowserRouter([
  {
    path: &quot;/products/:productId&quot;,
    element: &lt;ProductDetail /&gt;,
    loader: productLoader
  }
]);
</code></pre>
<h3>é”™è¯¯è¾¹ç•Œ</h3>
<pre><code class="language-jsx">import { useRouteError } from &#39;react-router-dom&#39;;

function ErrorBoundary() {
  const error = useRouteError();

  return (
    &lt;div&gt;
      &lt;h1&gt;å‡ºé”™äº†ï¼&lt;/h1&gt;
      &lt;p&gt;{error.statusText || error.message}&lt;/p&gt;
    &lt;/div&gt;
  );
}

// è·¯ç”±é…ç½®
const router = createBrowserRouter([
  {
    path: &quot;/products/:productId&quot;,
    element: &lt;ProductDetail /&gt;,
    loader: productLoader,
    errorElement: &lt;ErrorBoundary /&gt;
  }
]);
</code></pre>
<h2>å®Œæ•´åº”ç”¨ç¤ºä¾‹</h2>
<pre><code class="language-jsx">import {
  BrowserRouter,
  Routes,
  Route,
  Link,
  Navigate,
  useNavigate,
  useLocation
} from &#39;react-router-dom&#39;;

// è®¤è¯ä¸Šä¸‹æ–‡
const AuthContext = createContext();

function AuthProvider({ children }) {
  const [user, setUser] = useState(null);
  const [loading, setLoading] = useState(true);

  useEffect(() =&gt; {
    // æ£€æŸ¥ç”¨æˆ·ç™»å½•çŠ¶æ€
    checkAuthStatus().then(user =&gt; {
      setUser(user);
      setLoading(false);
    });
  }, []);

  const login = async (credentials) =&gt; {
    const user = await loginAPI(credentials);
    setUser(user);
    return user;
  };

  const logout = () =&gt; {
    setUser(null);
    logoutAPI();
  };

  return (
    &lt;AuthContext.Provider value={{ user, login, logout, loading }}&gt;
      {children}
    &lt;/AuthContext.Provider&gt;
  );
}

function useAuth() {
  return useContext(AuthContext);
}

// ç§æœ‰è·¯ç”±ç»„ä»¶
function PrivateRoute({ children }) {
  const { user, loading } = useAuth();
  const location = useLocation();

  if (loading) {
    return &lt;div&gt;åŠ è½½ä¸­...&lt;/div&gt;;
  }

  if (!user) {
    return &lt;Navigate to=&quot;/login&quot; state={{ from: location }} replace /&gt;;
  }

  return children;
}

// å¯¼èˆªç»„ä»¶
function Navigation() {
  const { user, logout } = useAuth();
  const navigate = useNavigate();

  const handleLogout = () =&gt; {
    logout();
    navigate(&#39;/&#39;);
  };

  return (
    &lt;nav className=&quot;navbar&quot;&gt;
      &lt;Link to=&quot;/&quot; className=&quot;logo&quot;&gt;MyApp&lt;/Link&gt;
      
      &lt;div className=&quot;nav-links&quot;&gt;
        &lt;Link to=&quot;/&quot;&gt;é¦–é¡µ&lt;/Link&gt;
        &lt;Link to=&quot;/about&quot;&gt;å…³äº&lt;/Link&gt;
        
        {user ? (
          &lt;&gt;
            &lt;Link to=&quot;/dashboard&quot;&gt;ä»ªè¡¨æ¿&lt;/Link&gt;
            &lt;Link to=&quot;/profile&quot;&gt;ä¸ªäººèµ„æ–™&lt;/Link&gt;
            &lt;button onClick={handleLogout}&gt;é€€å‡º&lt;/button&gt;
          &lt;/&gt;
        ) : (
          &lt;&gt;
            &lt;Link to=&quot;/login&quot;&gt;ç™»å½•&lt;/Link&gt;
            &lt;Link to=&quot;/register&quot;&gt;æ³¨å†Œ&lt;/Link&gt;
          &lt;/&gt;
        )}
      &lt;/div&gt;
    &lt;/nav&gt;
  );
}

// ç™»å½•ç»„ä»¶
function Login() {
  const { login } = useAuth();
  const navigate = useNavigate();
  const location = useLocation();
  
  const from = location.state?.from?.pathname || &#39;/dashboard&#39;;

  const handleSubmit = async (e) =&gt; {
    e.preventDefault();
    const formData = new FormData(e.target);
    const credentials = {
      email: formData.get(&#39;email&#39;),
      password: formData.get(&#39;password&#39;)
    };

    try {
      await login(credentials);
      navigate(from, { replace: true });
    } catch (error) {
      console.error(&#39;ç™»å½•å¤±è´¥&#39;);
    }
  };

  return (
    &lt;div className=&quot;login-page&quot;&gt;
      &lt;h1&gt;ç™»å½•&lt;/h1&gt;
      &lt;form onSubmit={handleSubmit}&gt;
        &lt;input name=&quot;email&quot; type=&quot;email&quot; placeholder=&quot;é‚®ç®±&quot; required /&gt;
        &lt;input name=&quot;password&quot; type=&quot;password&quot; placeholder=&quot;å¯†ç &quot; required /&gt;
        &lt;button type=&quot;submit&quot;&gt;ç™»å½•&lt;/button&gt;
      &lt;/form&gt;
    &lt;/div&gt;
  );
}

// ä»ªè¡¨æ¿ç»„ä»¶
function Dashboard() {
  return (
    &lt;div className=&quot;dashboard&quot;&gt;
      &lt;h1&gt;ä»ªè¡¨æ¿&lt;/h1&gt;
      &lt;div className=&quot;dashboard-nav&quot;&gt;
        &lt;Link to=&quot;overview&quot;&gt;æ¦‚è§ˆ&lt;/Link&gt;
        &lt;Link to=&quot;analytics&quot;&gt;åˆ†æ&lt;/Link&gt;
        &lt;Link to=&quot;settings&quot;&gt;è®¾ç½®&lt;/Link&gt;
      &lt;/div&gt;
      &lt;Outlet /&gt;
    &lt;/div&gt;
  );
}

// ä¸»åº”ç”¨
function App() {
  return (
    &lt;AuthProvider&gt;
      &lt;BrowserRouter&gt;
        &lt;div className=&quot;app&quot;&gt;
          &lt;Navigation /&gt;
          
          &lt;main className=&quot;main-content&quot;&gt;
            &lt;Routes&gt;
              &lt;Route path=&quot;/&quot; element={&lt;Home /&gt;} /&gt;
              &lt;Route path=&quot;/about&quot; element={&lt;About /&gt;} /&gt;
              &lt;Route path=&quot;/login&quot; element={&lt;Login /&gt;} /&gt;
              &lt;Route path=&quot;/register&quot; element={&lt;Register /&gt;} /&gt;
              
              &lt;Route path=&quot;/dashboard&quot; element={
                &lt;PrivateRoute&gt;
                  &lt;Dashboard /&gt;
                &lt;/PrivateRoute&gt;
              }&gt;
                &lt;Route index element={&lt;DashboardOverview /&gt;} /&gt;
                &lt;Route path=&quot;overview&quot; element={&lt;DashboardOverview /&gt;} /&gt;
                &lt;Route path=&quot;analytics&quot; element={&lt;Analytics /&gt;} /&gt;
                &lt;Route path=&quot;settings&quot; element={&lt;Settings /&gt;} /&gt;
              &lt;/Route&gt;
              
              &lt;Route path=&quot;/profile&quot; element={
                &lt;PrivateRoute&gt;
                  &lt;Profile /&gt;
                &lt;/PrivateRoute&gt;
              } /&gt;
              
              &lt;Route path=&quot;*&quot; element={&lt;NotFound /&gt;} /&gt;
            &lt;/Routes&gt;
          &lt;/main&gt;
        &lt;/div&gt;
      &lt;/BrowserRouter&gt;
    &lt;/AuthProvider&gt;
  );
}

export default App;
</code></pre>
<h2>æœ€ä½³å®è·µ</h2>
<h3>1. è·¯ç”±ç»„ç»‡</h3>
<pre><code class="language-jsx">// å°†è·¯ç”±é…ç½®å•ç‹¬ç®¡ç†
const routes = [
  { path: &#39;/&#39;, element: &lt;Home /&gt; },
  { path: &#39;/about&#39;, element: &lt;About /&gt; },
  { 
    path: &#39;/dashboard&#39;, 
    element: &lt;Dashboard /&gt;,
    children: [
      { index: true, element: &lt;DashboardOverview /&gt; },
      { path: &#39;profile&#39;, element: &lt;Profile /&gt; },
      { path: &#39;settings&#39;, element: &lt;Settings /&gt; }
    ]
  }
];
</code></pre>
<h3>2. ä»£ç åˆ†å‰²</h3>
<pre><code class="language-jsx">import { lazy, Suspense } from &#39;react&#39;;

// æ‡’åŠ è½½ç»„ä»¶
const Dashboard = lazy(() =&gt; import(&#39;./pages/Dashboard&#39;));
const Profile = lazy(() =&gt; import(&#39;./pages/Profile&#39;));

function App() {
  return (
    &lt;BrowserRouter&gt;
      &lt;Suspense fallback={&lt;div&gt;åŠ è½½ä¸­...&lt;/div&gt;}&gt;
        &lt;Routes&gt;
          &lt;Route path=&quot;/dashboard&quot; element={&lt;Dashboard /&gt;} /&gt;
          &lt;Route path=&quot;/profile&quot; element={&lt;Profile /&gt;} /&gt;
        &lt;/Routes&gt;
      &lt;/Suspense&gt;
    &lt;/BrowserRouter&gt;
  );
}
</code></pre>
<h3>3. é”™è¯¯å¤„ç†</h3>
<pre><code class="language-jsx">function ErrorBoundary() {
  const error = useRouteError();
  
  if (error.status === 404) {
    return &lt;NotFound /&gt;;
  }
  
  if (error.status === 401) {
    return &lt;Navigate to=&quot;/login&quot; /&gt;;
  }
  
  return &lt;GenericError error={error} /&gt;;
}
</code></pre>
<h2>æ€»ç»“</h2>
<p>React Routeræä¾›äº†ï¼š</p>
<ol>
<li><strong>å£°æ˜å¼è·¯ç”±</strong>ï¼šé€šè¿‡ç»„ä»¶é…ç½®è·¯ç”±</li>
<li><strong>åµŒå¥—è·¯ç”±</strong>ï¼šæ„å»ºå¤æ‚çš„è·¯ç”±ç»“æ„</li>
<li><strong>ç¨‹åºå¼å¯¼èˆª</strong>ï¼šåœ¨ä»£ç ä¸­æ§åˆ¶å¯¼èˆª</li>
<li><strong>è·¯ç”±å®ˆå«</strong>ï¼šä¿æŠ¤éœ€è¦æƒé™çš„è·¯ç”±</li>
<li><strong>æ•°æ®åŠ è½½</strong>ï¼šä¸è·¯ç”±å…³è”çš„æ•°æ®è·å–</li>
</ol>
<p>æŒæ¡è¿™äº›æ¦‚å¿µå¯ä»¥æ„å»ºåŠŸèƒ½å®Œæ•´çš„å•é¡µåº”ç”¨ã€‚ </p>

          </div>

          <!-- æ–‡æ¡£å¯¼èˆª -->
          <div class="doc-navigation">
            
              <a href="20-åŠ¨ç”»æ•ˆæœ.html" class="nav-btn prev-btn">
                <span class="nav-icon">â†</span>
                <div class="nav-text">
                  <span class="nav-label">ä¸Šä¸€ç¯‡</span>
                  <span class="nav-title">åŠ¨ç”»æ•ˆæœ</span>
                </div>
              </a>
            
            
            
              <a href="22-Context-API.html" class="nav-btn next-btn">
                <div class="nav-text">
                  <span class="nav-label">ä¸‹ä¸€ç¯‡</span>
                  <span class="nav-title">Context-API</span>
                </div>
                <span class="nav-icon">â†’</span>
              </a>
            
          </div>
        </article>
      </main>
    </div>

    <!-- è¿”å›é¡¶éƒ¨æŒ‰é’® -->
    <button class="back-to-top" id="backToTop" onclick="scrollToTop()">
      <span>â†‘</span>
    </button>

    <!-- åº•éƒ¨ -->
    <footer class="footer">
      <div class="footer-content">
        <p>&copy; 2024 React ä¸­æ–‡æ–‡æ¡£. åŸºäº React 18.x æ„å»º</p>
        <p>Made with â¤ï¸ by Reactä¸­æ–‡ç¤¾åŒº</p>
      </div>
    </footer>
  </div>

  <script src="assets/script.js"></script>
</body>
</html>