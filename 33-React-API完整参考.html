<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>React-APIå®Œæ•´å‚è€ƒ - React ä¸­æ–‡æ–‡æ¡£</title>
  <meta name="description" content="ä»å…¥é—¨åˆ°ç²¾é€šï¼Œå…¨é¢æŒæ¡Reactå¼€å‘æŠ€èƒ½">
  <link rel="stylesheet" href="assets/style.css">
  <link rel="stylesheet" href="assets/highlight.css">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>âš›ï¸</text></svg>">
</head>
<body>
  <div class="container">
    <!-- é¡¶éƒ¨å¯¼èˆª -->
    <header class="header">
      <div class="header-content">
        <div class="logo">
          <span class="logo-icon">âš›ï¸</span>
          <div class="logo-text">
            <h1>React ä¸­æ–‡æ–‡æ¡£</h1>
            <p>ç°ä»£åŒ–çš„Reactå­¦ä¹ æŒ‡å—</p>
          </div>
        </div>
        <nav class="header-nav">
          <a href="index.html" class="nav-link">é¦–é¡µ</a>
          <a href="#" class="nav-link" onclick="toggleSidebar()">ç›®å½•</a>
          <a href="https://github.com/facebook/react" target="_blank" class="nav-link">GitHub</a>
        </nav>
      </div>
    </header>

    <div class="main-layout">
      <!-- ä¾§è¾¹æ  -->
      <aside class="sidebar" id="sidebar">
        <div class="sidebar-content">
          <div class="search-box">
            <input type="text" placeholder="æœç´¢æ–‡æ¡£..." id="searchInput" onkeyup="searchDocs()">
            <span class="search-icon">ğŸ”</span>
          </div>
          <nav class="doc-nav">
            
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ“š</span>
          åŸºç¡€æ¦‚å¿µ
        </h3>
        <ul class="category-docs">
          <li><a href="01-Reactç®€ä»‹.html" class="doc-link">Reactç®€ä»‹</a></li><li><a href="02-ç¯å¢ƒæ­å»º.html" class="doc-link">ç¯å¢ƒæ­å»º</a></li><li><a href="03-JSXè¯­æ³•.html" class="doc-link">JSXè¯­æ³•</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ§©</span>
          ç»„ä»¶å¼€å‘
        </h3>
        <ul class="category-docs">
          <li><a href="04-ç»„ä»¶åŸºç¡€.html" class="doc-link">ç»„ä»¶åŸºç¡€</a></li><li><a href="05-Propsä¸State.html" class="doc-link">Propsä¸State</a></li><li><a href="06-äº‹ä»¶å¤„ç†.html" class="doc-link">äº‹ä»¶å¤„ç†</a></li><li><a href="07-æ¡ä»¶æ¸²æŸ“.html" class="doc-link">æ¡ä»¶æ¸²æŸ“</a></li><li><a href="08-åˆ—è¡¨æ¸²æŸ“.html" class="doc-link">åˆ—è¡¨æ¸²æŸ“</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ£</span>
          Hooks API
        </h3>
        <ul class="category-docs">
          <li><a href="09-Hooksæ¦‚è¿°.html" class="doc-link">Hooksæ¦‚è¿°</a></li><li><a href="10-useState.html" class="doc-link">useState</a></li><li><a href="11-useEffect.html" class="doc-link">useEffect</a></li><li><a href="12-useContext.html" class="doc-link">useContext</a></li><li><a href="13-useReducer.html" class="doc-link">useReducer</a></li><li><a href="14-useMemoå’ŒuseCallback.html" class="doc-link">useMemoå’ŒuseCallback</a></li><li><a href="15-useRef.html" class="doc-link">useRef</a></li><li><a href="16-è‡ªå®šä¹‰Hooks.html" class="doc-link">è‡ªå®šä¹‰Hooks</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ”„</span>
          ç”Ÿå‘½å‘¨æœŸ
        </h3>
        <ul class="category-docs">
          <li><a href="17-ç”Ÿå‘½å‘¨æœŸæ–¹æ³•.html" class="doc-link">ç”Ÿå‘½å‘¨æœŸæ–¹æ³•</a></li><li><a href="18-å‰¯ä½œç”¨å¤„ç†.html" class="doc-link">å‰¯ä½œç”¨å¤„ç†</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ¨</span>
          æ ·å¼ä¸UI
        </h3>
        <ul class="category-docs">
          <li><a href="19-æ ·å¼å¤„ç†.html" class="doc-link">æ ·å¼å¤„ç†</a></li><li><a href="20-åŠ¨ç”»æ•ˆæœ.html" class="doc-link">åŠ¨ç”»æ•ˆæœ</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ—ºï¸</span>
          è·¯ç”±ç®¡ç†
        </h3>
        <ul class="category-docs">
          <li><a href="21-React-Router.html" class="doc-link">React-Router</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ“¦</span>
          çŠ¶æ€ç®¡ç†
        </h3>
        <ul class="category-docs">
          <li><a href="22-Context-API.html" class="doc-link">Context-API</a></li><li><a href="23-Reduxé›†æˆ.html" class="doc-link">Reduxé›†æˆ</a></li><li><a href="24-ZustandçŠ¶æ€ç®¡ç†.html" class="doc-link">ZustandçŠ¶æ€ç®¡ç†</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸš€</span>
          æ€§èƒ½ä¼˜åŒ–
        </h3>
        <ul class="category-docs">
          <li><a href="25-æ€§èƒ½ä¼˜åŒ–æŠ€å·§.html" class="doc-link">æ€§èƒ½ä¼˜åŒ–æŠ€å·§</a></li><li><a href="26-ä»£ç åˆ†å‰².html" class="doc-link">ä»£ç åˆ†å‰²</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ§ª</span>
          æµ‹è¯•
        </h3>
        <ul class="category-docs">
          <li><a href="27-å•å…ƒæµ‹è¯•.html" class="doc-link">å•å…ƒæµ‹è¯•</a></li><li><a href="28-é›†æˆæµ‹è¯•.html" class="doc-link">é›†æˆæµ‹è¯•</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ—ï¸</span>
          æ„å»ºä¸éƒ¨ç½²
        </h3>
        <ul class="category-docs">
          <li><a href="29-é¡¹ç›®æ„å»º.html" class="doc-link">é¡¹ç›®æ„å»º</a></li><li><a href="30-ç”Ÿäº§éƒ¨ç½².html" class="doc-link">ç”Ÿäº§éƒ¨ç½²</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ› ï¸</span>
          å¼€å‘å·¥å…·
        </h3>
        <ul class="category-docs">
          <li><a href="31-å¼€å‘è€…å·¥å…·.html" class="doc-link">å¼€å‘è€…å·¥å…·</a></li><li><a href="32-è°ƒè¯•æŠ€å·§.html" class="doc-link">è°ƒè¯•æŠ€å·§</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ“–</span>
          APIå‚è€ƒ
        </h3>
        <ul class="category-docs">
          <li><a href="33-React-APIå®Œæ•´å‚è€ƒ.html" class="doc-link">React-APIå®Œæ•´å‚è€ƒ</a></li><li><a href="34-DOMå…ƒç´ å±æ€§.html" class="doc-link">DOMå…ƒç´ å±æ€§</a></li><li><a href="35-åˆæˆäº‹ä»¶.html" class="doc-link">åˆæˆäº‹ä»¶</a></li><li><a href="React-Hookså®Œæ•´å‚è€ƒ.html" class="doc-link">React-Hookså®Œæ•´å‚è€ƒ</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ’¡</span>
          æœ€ä½³å®è·µ
        </h3>
        <ul class="category-docs">
          <li><a href="36-ç¼–ç è§„èŒƒ.html" class="doc-link">ç¼–ç è§„èŒƒ</a></li><li><a href="37-é¡¹ç›®æ¶æ„.html" class="doc-link">é¡¹ç›®æ¶æ„</a></li><li><a href="38-å¸¸è§é—®é¢˜.html" class="doc-link">å¸¸è§é—®é¢˜</a></li>
        </ul>
      </div>
          </nav>
        </div>
      </aside>

      <!-- ä¸»å†…å®¹åŒº -->
      <main class="content">
        <article class="doc-article">
          <div class="doc-header">
            <div class="breadcrumb">
              <a href="index.html">é¦–é¡µ</a>
              <span class="separator">></span>
              <span class="current">React-APIå®Œæ•´å‚è€ƒ</span>
            </div>
            <h1 class="doc-title">React-APIå®Œæ•´å‚è€ƒ</h1>
            <div class="doc-meta">
              <span class="category" style="background: #fbc2eb">
                ğŸ“– APIå‚è€ƒ
              </span>
            </div>
          </div>
          
          <div class="doc-content">
            <h1>React API å®Œæ•´å‚è€ƒ</h1>
<h2>React é¡¶çº§ API</h2>
<h3>React.Component</h3>
<pre><code class="language-javascript">class MyComponent extends React.Component {
  constructor(props) {
    super(props);
    this.state = { count: 0 };
  }
  
  render() {
    return &lt;div&gt;{this.state.count}&lt;/div&gt;;
  }
}
</code></pre>
<h3>React.PureComponent</h3>
<pre><code class="language-javascript">class MyPureComponent extends React.PureComponent {
  render() {
    return &lt;div&gt;{this.props.name}&lt;/div&gt;;
  }
}
// è‡ªåŠ¨è¿›è¡Œæµ…å±‚æ¯”è¾ƒï¼Œé¿å…ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“
</code></pre>
<h3>React.memo()</h3>
<pre><code class="language-javascript">const MyComponent = React.memo(function MyComponent({ name }) {
  return &lt;div&gt;{name}&lt;/div&gt;;
});

// å¸¦è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°
const MyComponent = React.memo(function MyComponent(props) {
  return &lt;div&gt;{props.name}&lt;/div&gt;;
}, (prevProps, nextProps) =&gt; {
  return prevProps.name === nextProps.name;
});
</code></pre>
<h3>React.createElement()</h3>
<pre><code class="language-javascript">// JSX: &lt;div className=&quot;container&quot;&gt;Hello&lt;/div&gt;
// ç­‰ä»·äº:
React.createElement(
  &#39;div&#39;,
  { className: &#39;container&#39; },
  &#39;Hello&#39;
);

// åµŒå¥—å…ƒç´ 
React.createElement(
  &#39;div&#39;,
  { className: &#39;container&#39; },
  React.createElement(&#39;h1&#39;, null, &#39;Title&#39;),
  React.createElement(&#39;p&#39;, null, &#39;Content&#39;)
);
</code></pre>
<h3>React.cloneElement()</h3>
<pre><code class="language-javascript">function ParentComponent({ children }) {
  return React.cloneElement(children, { 
    additionalProp: &#39;value&#39;,
    className: &#39;enhanced&#39;
  });
}

// ä½¿ç”¨
&lt;ParentComponent&gt;
  &lt;ChildComponent originalProp=&quot;test&quot; /&gt;
&lt;/ParentComponent&gt;
// ChildComponent å°†æ”¶åˆ° originalProp, additionalProp å’Œ className
</code></pre>
<h3>React.Children</h3>
<pre><code class="language-javascript">function ParentComponent({ children }) {
  // éå†children
  React.Children.forEach(children, (child, index) =&gt; {
    console.log(`Child ${index}:`, child);
  });
  
  // æ˜ å°„children
  const enhancedChildren = React.Children.map(children, (child, index) =&gt; {
    return React.cloneElement(child, { key: index, index });
  });
  
  // è®¡ç®—childrenæ•°é‡
  const childCount = React.Children.count(children);
  
  // å°†childrenè½¬æ¢ä¸ºæ•°ç»„
  const childArray = React.Children.toArray(children);
  
  // éªŒè¯åªæœ‰ä¸€ä¸ªchild
  const onlyChild = React.Children.only(children); // å¦‚æœchildrenä¸æ˜¯å•ä¸ªå…ƒç´ ä¼šæŠ›å‡ºé”™è¯¯
  
  return &lt;div&gt;{enhancedChildren}&lt;/div&gt;;
}
</code></pre>
<h3>React.Fragment</h3>
<pre><code class="language-javascript">// å®Œæ•´å†™æ³•
function Component() {
  return (
    &lt;React.Fragment&gt;
      &lt;h1&gt;Title&lt;/h1&gt;
      &lt;p&gt;Content&lt;/p&gt;
    &lt;/React.Fragment&gt;
  );
}

// ç®€å†™
function Component() {
  return (
    &lt;&gt;
      &lt;h1&gt;Title&lt;/h1&gt;
      &lt;p&gt;Content&lt;/p&gt;
    &lt;/&gt;
  );
}

// å¸¦keyçš„Fragmentï¼ˆç”¨äºåˆ—è¡¨ï¼‰
function Component({ items }) {
  return (
    &lt;div&gt;
      {items.map(item =&gt; (
        &lt;React.Fragment key={item.id}&gt;
          &lt;h3&gt;{item.title}&lt;/h3&gt;
          &lt;p&gt;{item.content}&lt;/p&gt;
        &lt;/React.Fragment&gt;
      ))}
    &lt;/div&gt;
  );
}
</code></pre>
<h3>React.createRef()</h3>
<pre><code class="language-javascript">class MyComponent extends React.Component {
  constructor(props) {
    super(props);
    this.inputRef = React.createRef();
  }
  
  focusInput = () =&gt; {
    this.inputRef.current.focus();
  }
  
  render() {
    return (
      &lt;div&gt;
        &lt;input ref={this.inputRef} /&gt;
        &lt;button onClick={this.focusInput}&gt;Focus&lt;/button&gt;
      &lt;/div&gt;
    );
  }
}
</code></pre>
<h3>React.forwardRef()</h3>
<pre><code class="language-javascript">const FancyButton = React.forwardRef((props, ref) =&gt; (
  &lt;button ref={ref} className=&quot;fancy-button&quot;&gt;
    {props.children}
  &lt;/button&gt;
));

// ä½¿ç”¨
function App() {
  const buttonRef = React.createRef();
  
  return (
    &lt;FancyButton ref={buttonRef}&gt;
      Click me!
    &lt;/FancyButton&gt;
  );
}
</code></pre>
<h3>React.lazy()</h3>
<pre><code class="language-javascript">// åŠ¨æ€å¯¼å…¥ç»„ä»¶
const LazyComponent = React.lazy(() =&gt; import(&#39;./LazyComponent&#39;));

function App() {
  return (
    &lt;div&gt;
      &lt;React.Suspense fallback={&lt;div&gt;Loading...&lt;/div&gt;}&gt;
        &lt;LazyComponent /&gt;
      &lt;/React.Suspense&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<h3>React.Suspense</h3>
<pre><code class="language-javascript">function App() {
  return (
    &lt;div&gt;
      &lt;React.Suspense 
        fallback={&lt;div&gt;Loading...&lt;/div&gt;}
        // å¯é€‰ï¼šé”™è¯¯è¾¹ç•Œ
      &gt;
        &lt;LazyComponent /&gt;
        &lt;AnotherLazyComponent /&gt;
      &lt;/React.Suspense&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<h2>React.Component å®ä¾‹æ–¹æ³•</h2>
<h3>setState()</h3>
<pre><code class="language-javascript">class Counter extends React.Component {
  constructor(props) {
    super(props);
    this.state = { count: 0 };
  }
  
  increment = () =&gt; {
    // å¯¹è±¡å½¢å¼
    this.setState({ count: this.state.count + 1 });
    
    // å‡½æ•°å½¢å¼ï¼ˆæ¨èï¼‰
    this.setState(prevState =&gt; ({
      count: prevState.count + 1
    }));
    
    // å¸¦å›è°ƒ
    this.setState(
      prevState =&gt; ({ count: prevState.count + 1 }),
      () =&gt; {
        console.log(&#39;State updated:&#39;, this.state.count);
      }
    );
  }
  
  render() {
    return (
      &lt;div&gt;
        &lt;div&gt;Count: {this.state.count}&lt;/div&gt;
        &lt;button onClick={this.increment}&gt;+&lt;/button&gt;
      &lt;/div&gt;
    );
  }
}
</code></pre>
<h3>forceUpdate()</h3>
<pre><code class="language-javascript">class MyComponent extends React.Component {
  handleClick = () =&gt; {
    // å¼ºåˆ¶æ›´æ–°ï¼ˆä¸æ¨èä½¿ç”¨ï¼‰
    this.forceUpdate();
  }
  
  render() {
    return (
      &lt;button onClick={this.handleClick}&gt;
        Force Update
      &lt;/button&gt;
    );
  }
}
</code></pre>
<h2>ç”Ÿå‘½å‘¨æœŸæ–¹æ³•</h2>
<h3>æŒ‚è½½é˜¶æ®µ</h3>
<pre><code class="language-javascript">class LifecycleComponent extends React.Component {
  constructor(props) {
    super(props);
    console.log(&#39;1. constructor&#39;);
    this.state = { data: null };
  }
  
  static getDerivedStateFromProps(props, state) {
    console.log(&#39;2. getDerivedStateFromProps&#39;);
    // è¿”å›å¯¹è±¡æ¥æ›´æ–°stateï¼Œæˆ–è¿”å›nullä¸æ›´æ–°
    return props.initialData ? { data: props.initialData } : null;
  }
  
  componentDidMount() {
    console.log(&#39;4. componentDidMount&#39;);
    // é€‚åˆè¿›è¡ŒAPIè°ƒç”¨ã€è®¾ç½®è®¢é˜…ç­‰
    this.fetchData();
  }
  
  render() {
    console.log(&#39;3. render&#39;);
    return &lt;div&gt;{this.state.data}&lt;/div&gt;;
  }
  
  fetchData = async () =&gt; {
    const response = await fetch(&#39;/api/data&#39;);
    const data = await response.json();
    this.setState({ data });
  }
}
</code></pre>
<h3>æ›´æ–°é˜¶æ®µ</h3>
<pre><code class="language-javascript">class UpdateComponent extends React.Component {
  static getDerivedStateFromProps(props, state) {
    console.log(&#39;1. getDerivedStateFromProps (update)&#39;);
    return null;
  }
  
  shouldComponentUpdate(nextProps, nextState) {
    console.log(&#39;2. shouldComponentUpdate&#39;);
    // è¿”å›falseå¯ä»¥é˜»æ­¢æ›´æ–°
    return nextProps.value !== this.props.value;
  }
  
  render() {
    console.log(&#39;3. render (update)&#39;);
    return &lt;div&gt;{this.props.value}&lt;/div&gt;;
  }
  
  getSnapshotBeforeUpdate(prevProps, prevState) {
    console.log(&#39;4. getSnapshotBeforeUpdate&#39;);
    // è¿”å›å€¼ä¼šä¼ é€’ç»™componentDidUpdate
    return { scrollPosition: window.scrollY };
  }
  
  componentDidUpdate(prevProps, prevState, snapshot) {
    console.log(&#39;5. componentDidUpdate&#39;);
    console.log(&#39;Previous scroll position:&#39;, snapshot.scrollPosition);
  }
}
</code></pre>
<h3>å¸è½½é˜¶æ®µ</h3>
<pre><code class="language-javascript">class CleanupComponent extends React.Component {
  componentDidMount() {
    this.timer = setInterval(() =&gt; {
      console.log(&#39;Timer tick&#39;);
    }, 1000);
    
    document.addEventListener(&#39;resize&#39;, this.handleResize);
  }
  
  componentWillUnmount() {
    console.log(&#39;componentWillUnmount&#39;);
    // æ¸…ç†å·¥ä½œ
    clearInterval(this.timer);
    document.removeEventListener(&#39;resize&#39;, this.handleResize);
  }
  
  handleResize = () =&gt; {
    console.log(&#39;Window resized&#39;);
  }
  
  render() {
    return &lt;div&gt;Component with cleanup&lt;/div&gt;;
  }
}
</code></pre>
<h3>é”™è¯¯å¤„ç†</h3>
<pre><code class="language-javascript">class ErrorBoundary extends React.Component {
  constructor(props) {
    super(props);
    this.state = { hasError: false, error: null };
  }
  
  static getDerivedStateFromError(error) {
    // æ›´æ–°stateä»¥æ˜¾ç¤ºé”™è¯¯UI
    return { hasError: true, error };
  }
  
  componentDidCatch(error, errorInfo) {
    // è®°å½•é”™è¯¯ä¿¡æ¯
    console.error(&#39;Error caught by boundary:&#39;, error, errorInfo);
    // å¯ä»¥å°†é”™è¯¯ä¿¡æ¯å‘é€åˆ°é”™è¯¯æŠ¥å‘ŠæœåŠ¡
  }
  
  render() {
    if (this.state.hasError) {
      return (
        &lt;div&gt;
          &lt;h2&gt;å‡ºé”™äº†ï¼&lt;/h2&gt;
          &lt;details&gt;
            &lt;summary&gt;é”™è¯¯è¯¦æƒ…&lt;/summary&gt;
            &lt;pre&gt;{this.state.error.toString()}&lt;/pre&gt;
          &lt;/details&gt;
        &lt;/div&gt;
      );
    }
    
    return this.props.children;
  }
}

// ä½¿ç”¨é”™è¯¯è¾¹ç•Œ
function App() {
  return (
    &lt;ErrorBoundary&gt;
      &lt;ComponentThatMightThrow /&gt;
    &lt;/ErrorBoundary&gt;
  );
}
</code></pre>
<h2>Context API</h2>
<h3>React.createContext()</h3>
<pre><code class="language-javascript">// åˆ›å»ºContext
const ThemeContext = React.createContext(&#39;light&#39;); // é»˜è®¤å€¼

// å¸¦é»˜è®¤å€¼çš„å¤æ‚Context
const UserContext = React.createContext({
  user: null,
  login: () =&gt; {},
  logout: () =&gt; {}
});
</code></pre>
<h3>Context.Provider</h3>
<pre><code class="language-javascript">function App() {
  const [theme, setTheme] = useState(&#39;light&#39;);
  const [user, setUser] = useState(null);
  
  const themeValue = {
    theme,
    toggleTheme: () =&gt; setTheme(prev =&gt; prev === &#39;light&#39; ? &#39;dark&#39; : &#39;light&#39;)
  };
  
  const userValue = {
    user,
    login: (userData) =&gt; setUser(userData),
    logout: () =&gt; setUser(null)
  };
  
  return (
    &lt;ThemeContext.Provider value={themeValue}&gt;
      &lt;UserContext.Provider value={userValue}&gt;
        &lt;MainApp /&gt;
      &lt;/UserContext.Provider&gt;
    &lt;/ThemeContext.Provider&gt;
  );
}
</code></pre>
<h3>Context.Consumer</h3>
<pre><code class="language-javascript">function ThemedButton() {
  return (
    &lt;ThemeContext.Consumer&gt;
      {({ theme, toggleTheme }) =&gt; (
        &lt;button 
          style={{ 
            backgroundColor: theme === &#39;light&#39; ? &#39;#fff&#39; : &#39;#333&#39;,
            color: theme === &#39;light&#39; ? &#39;#333&#39; : &#39;#fff&#39;
          }}
          onClick={toggleTheme}
        &gt;
          Toggle Theme
        &lt;/button&gt;
      )}
    &lt;/ThemeContext.Consumer&gt;
  );
}
</code></pre>
<h3>useContext Hook</h3>
<pre><code class="language-javascript">function ThemedComponent() {
  const { theme, toggleTheme } = useContext(ThemeContext);
  const { user, login, logout } = useContext(UserContext);
  
  return (
    &lt;div className={`theme-${theme}`}&gt;
      {user ? (
        &lt;div&gt;
          &lt;span&gt;Welcome, {user.name}!&lt;/span&gt;
          &lt;button onClick={logout}&gt;Logout&lt;/button&gt;
        &lt;/div&gt;
      ) : (
        &lt;button onClick={() =&gt; login({ name: &#39;User&#39; })}&gt;Login&lt;/button&gt;
      )}
      &lt;button onClick={toggleTheme}&gt;Toggle Theme&lt;/button&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<h2>Hooks API</h2>
<h3>useState</h3>
<pre><code class="language-javascript">function StateExample() {
  // åŸºæœ¬ç”¨æ³•
  const [count, setCount] = useState(0);
  const [name, setName] = useState(&#39;&#39;);
  
  // å¯¹è±¡çŠ¶æ€
  const [user, setUser] = useState({
    name: &#39;&#39;,
    email: &#39;&#39;,
    age: 0
  });
  
  // æ•°ç»„çŠ¶æ€
  const [items, setItems] = useState([]);
  
  // å‡½æ•°åˆå§‹åŒ–ï¼ˆæƒ°æ€§åˆå§‹åŒ–ï¼‰
  const [expensiveValue, setExpensiveValue] = useState(() =&gt; {
    console.log(&#39;Computing expensive initial value&#39;);
    return someExpensiveComputation();
  });
  
  // æ›´æ–°æ–¹æ³•
  const updateUser = (field, value) =&gt; {
    setUser(prev =&gt; ({
      ...prev,
      [field]: value
    }));
  };
  
  const addItem = (item) =&gt; {
    setItems(prev =&gt; [...prev, item]);
  };
  
  return (
    &lt;div&gt;
      &lt;div&gt;Count: {count}&lt;/div&gt;
      &lt;button onClick={() =&gt; setCount(count + 1)}&gt;Increment&lt;/button&gt;
      &lt;button onClick={() =&gt; setCount(prev =&gt; prev + 1)}&gt;Increment (functional)&lt;/button&gt;
      
      &lt;input 
        value={name}
        onChange={e =&gt; setName(e.target.value)}
        placeholder=&quot;Name&quot;
      /&gt;
      
      &lt;input 
        value={user.email}
        onChange={e =&gt; updateUser(&#39;email&#39;, e.target.value)}
        placeholder=&quot;Email&quot;
      /&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<h3>useEffect</h3>
<pre><code class="language-javascript">function EffectExample({ userId }) {
  const [user, setUser] = useState(null);
  const [posts, setPosts] = useState([]);
  
  // ç»„ä»¶æŒ‚è½½æ—¶æ‰§è¡Œ
  useEffect(() =&gt; {
    console.log(&#39;Component mounted&#39;);
    return () =&gt; console.log(&#39;Component unmounted&#39;);
  }, []);
  
  // ä¾èµ–å˜åŒ–æ—¶æ‰§è¡Œ
  useEffect(() =&gt; {
    if (userId) {
      fetchUser(userId).then(setUser);
    }
  }, [userId]);
  
  // å¤šä¸ªå‰¯ä½œç”¨
  useEffect(() =&gt; {
    document.title = user ? `${user.name}&#39;s Profile` : &#39;Loading...&#39;;
  }, [user]);
  
  // æ¸…ç†å‰¯ä½œç”¨
  useEffect(() =&gt; {
    const subscription = subscribeToUserUpdates(userId, (updatedUser) =&gt; {
      setUser(updatedUser);
    });
    
    return () =&gt; {
      subscription.unsubscribe();
    };
  }, [userId]);
  
  // æ¡ä»¶æ‰§è¡Œ
  useEffect(() =&gt; {
    if (user &amp;&amp; !posts.length) {
      fetchUserPosts(user.id).then(setPosts);
    }
  }, [user, posts.length]);
  
  return (
    &lt;div&gt;
      {user ? (
        &lt;div&gt;
          &lt;h1&gt;{user.name}&lt;/h1&gt;
          &lt;div&gt;Posts: {posts.length}&lt;/div&gt;
        &lt;/div&gt;
      ) : (
        &lt;div&gt;Loading...&lt;/div&gt;
      )}
    &lt;/div&gt;
  );
}
</code></pre>
<h3>useReducer</h3>
<pre><code class="language-javascript">// å¤æ‚reducerç¤ºä¾‹
function appReducer(state, action) {
  switch (action.type) {
    case &#39;SET_LOADING&#39;:
      return { ...state, loading: action.payload };
    
    case &#39;SET_ERROR&#39;:
      return { ...state, error: action.payload, loading: false };
    
    case &#39;SET_DATA&#39;:
      return { ...state, data: action.payload, loading: false, error: null };
    
    case &#39;UPDATE_FILTER&#39;:
      return { ...state, filter: action.payload };
    
    case &#39;RESET&#39;:
      return initialState;
    
    default:
      throw new Error(`Unknown action type: ${action.type}`);
  }
}

const initialState = {
  data: [],
  loading: false,
  error: null,
  filter: &#39;&#39;
};

function DataComponent() {
  const [state, dispatch] = useReducer(appReducer, initialState);
  
  // å¼‚æ­¥action creator
  const fetchData = useCallback(async () =&gt; {
    dispatch({ type: &#39;SET_LOADING&#39;, payload: true });
    try {
      const response = await fetch(&#39;/api/data&#39;);
      const data = await response.json();
      dispatch({ type: &#39;SET_DATA&#39;, payload: data });
    } catch (error) {
      dispatch({ type: &#39;SET_ERROR&#39;, payload: error.message });
    }
  }, []);
  
  useEffect(() =&gt; {
    fetchData();
  }, [fetchData]);
  
  const filteredData = useMemo(() =&gt; {
    return state.data.filter(item =&gt; 
      item.name.toLowerCase().includes(state.filter.toLowerCase())
    );
  }, [state.data, state.filter]);
  
  if (state.loading) return &lt;div&gt;Loading...&lt;/div&gt;;
  if (state.error) return &lt;div&gt;Error: {state.error}&lt;/div&gt;;
  
  return (
    &lt;div&gt;
      &lt;input 
        value={state.filter}
        onChange={e =&gt; dispatch({ type: &#39;UPDATE_FILTER&#39;, payload: e.target.value })}
        placeholder=&quot;Filter...&quot;
      /&gt;
      &lt;button onClick={() =&gt; dispatch({ type: &#39;RESET&#39; })}&gt;Reset&lt;/button&gt;
      
      &lt;ul&gt;
        {filteredData.map(item =&gt; (
          &lt;li key={item.id}&gt;{item.name}&lt;/li&gt;
        ))}
      &lt;/ul&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<h3>useMemo å’Œ useCallback</h3>
<pre><code class="language-javascript">function OptimizedComponent({ items, onItemClick }) {
  const [filter, setFilter] = useState(&#39;&#39;);
  const [sortOrder, setSortOrder] = useState(&#39;asc&#39;);
  
  // è®°å¿†åŒ–è®¡ç®—
  const processedItems = useMemo(() =&gt; {
    console.log(&#39;Processing items...&#39;);
    
    // è¿‡æ»¤
    let filtered = items.filter(item =&gt; 
      item.name.toLowerCase().includes(filter.toLowerCase())
    );
    
    // æ’åº
    filtered.sort((a, b) =&gt; {
      return sortOrder === &#39;asc&#39; 
        ? a.name.localeCompare(b.name)
        : b.name.localeCompare(a.name);
    });
    
    return filtered;
  }, [items, filter, sortOrder]);
  
  // è®°å¿†åŒ–å›è°ƒ
  const handleItemClick = useCallback((itemId) =&gt; {
    console.log(&#39;Item clicked:&#39;, itemId);
    onItemClick(itemId);
  }, [onItemClick]);
  
  // è®°å¿†åŒ–äº‹ä»¶å¤„ç†å™¨
  const handleFilterChange = useCallback((e) =&gt; {
    setFilter(e.target.value);
  }, []);
  
  const handleSortChange = useCallback((e) =&gt; {
    setSortOrder(e.target.value);
  }, []);
  
  return (
    &lt;div&gt;
      &lt;input 
        value={filter}
        onChange={handleFilterChange}
        placeholder=&quot;Filter items...&quot;
      /&gt;
      
      &lt;select value={sortOrder} onChange={handleSortChange}&gt;
        &lt;option value=&quot;asc&quot;&gt;A-Z&lt;/option&gt;
        &lt;option value=&quot;desc&quot;&gt;Z-A&lt;/option&gt;
      &lt;/select&gt;
      
      &lt;div&gt;Showing {processedItems.length} items&lt;/div&gt;
      
      &lt;ul&gt;
        {processedItems.map(item =&gt; (
          &lt;li key={item.id}&gt;
            &lt;button onClick={() =&gt; handleItemClick(item.id)}&gt;
              {item.name}
            &lt;/button&gt;
          &lt;/li&gt;
        ))}
      &lt;/ul&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<h3>useRef</h3>
<pre><code class="language-javascript">function RefAdvancedExample() {
  const inputRef = useRef(null);
  const intervalRef = useRef(null);
  const renderCountRef = useRef(0);
  const previousValueRef = useRef();
  
  const [count, setCount] = useState(0);
  const [inputValue, setInputValue] = useState(&#39;&#39;);
  
  // è®°å½•æ¸²æŸ“æ¬¡æ•°
  renderCountRef.current += 1;
  
  // è®°å½•å‰ä¸€ä¸ªå€¼
  useEffect(() =&gt; {
    previousValueRef.current = count;
  });
  
  // å¯åŠ¨å®šæ—¶å™¨
  const startTimer = () =&gt; {
    if (intervalRef.current) return;
    
    intervalRef.current = setInterval(() =&gt; {
      setCount(prev =&gt; prev + 1);
    }, 1000);
  };
  
  // åœæ­¢å®šæ—¶å™¨
  const stopTimer = () =&gt; {
    if (intervalRef.current) {
      clearInterval(intervalRef.current);
      intervalRef.current = null;
    }
  };
  
  // ç»„ä»¶å¸è½½æ—¶æ¸…ç†
  useEffect(() =&gt; {
    return () =&gt; {
      stopTimer();
    };
  }, []);
  
  // èšç„¦è¾“å…¥æ¡†
  const focusInput = () =&gt; {
    inputRef.current?.focus();
  };
  
  // è·å–è¾“å…¥æ¡†çš„å€¼ï¼ˆä¸é€šè¿‡stateï¼‰
  const getInputValue = () =&gt; {
    alert(inputRef.current?.value || &#39;No value&#39;);
  };
  
  return (
    &lt;div&gt;
      &lt;div&gt;
        &lt;div&gt;Current count: {count}&lt;/div&gt;
        &lt;div&gt;Previous count: {previousValueRef.current}&lt;/div&gt;
        &lt;div&gt;Render count: {renderCountRef.current}&lt;/div&gt;
      &lt;/div&gt;
      
      &lt;div&gt;
        &lt;button onClick={startTimer}&gt;Start Timer&lt;/button&gt;
        &lt;button onClick={stopTimer}&gt;Stop Timer&lt;/button&gt;
      &lt;/div&gt;
      
      &lt;div&gt;
        &lt;input 
          ref={inputRef}
          value={inputValue}
          onChange={e =&gt; setInputValue(e.target.value)}
          placeholder=&quot;Type something...&quot;
        /&gt;
        &lt;button onClick={focusInput}&gt;Focus Input&lt;/button&gt;
        &lt;button onClick={getInputValue}&gt;Get Input Value&lt;/button&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<h2>è‡ªå®šä¹‰ Hooks é«˜çº§æ¨¡å¼</h2>
<h3>useDebounce</h3>
<pre><code class="language-javascript">function useDebounce(value, delay) {
  const [debouncedValue, setDebouncedValue] = useState(value);
  
  useEffect(() =&gt; {
    const handler = setTimeout(() =&gt; {
      setDebouncedValue(value);
    }, delay);
    
    return () =&gt; {
      clearTimeout(handler);
    };
  }, [value, delay]);
  
  return debouncedValue;
}

// ä½¿ç”¨
function SearchComponent() {
  const [searchTerm, setSearchTerm] = useState(&#39;&#39;);
  const debouncedSearchTerm = useDebounce(searchTerm, 500);
  
  useEffect(() =&gt; {
    if (debouncedSearchTerm) {
      // æ‰§è¡Œæœç´¢
      console.log(&#39;Searching for:&#39;, debouncedSearchTerm);
    }
  }, [debouncedSearchTerm]);
  
  return (
    &lt;input 
      value={searchTerm}
      onChange={e =&gt; setSearchTerm(e.target.value)}
      placeholder=&quot;Search...&quot;
    /&gt;
  );
}
</code></pre>
<h3>useInterval</h3>
<pre><code class="language-javascript">function useInterval(callback, delay) {
  const savedCallback = useRef();
  
  // è®°ä½æœ€æ–°çš„å›è°ƒ
  useEffect(() =&gt; {
    savedCallback.current = callback;
  }, [callback]);
  
  // è®¾ç½®å®šæ—¶å™¨
  useEffect(() =&gt; {
    function tick() {
      savedCallback.current();
    }
    
    if (delay !== null) {
      const id = setInterval(tick, delay);
      return () =&gt; clearInterval(id);
    }
  }, [delay]);
}

// ä½¿ç”¨
function Timer() {
  const [count, setCount] = useState(0);
  const [isRunning, setIsRunning] = useState(true);
  
  useInterval(() =&gt; {
    setCount(count + 1);
  }, isRunning ? 1000 : null);
  
  return (
    &lt;div&gt;
      &lt;div&gt;Count: {count}&lt;/div&gt;
      &lt;button onClick={() =&gt; setIsRunning(!isRunning)}&gt;
        {isRunning ? &#39;Stop&#39; : &#39;Start&#39;}
      &lt;/button&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<h3>usePrevious</h3>
<pre><code class="language-javascript">function usePrevious(value) {
  const ref = useRef();
  
  useEffect(() =&gt; {
    ref.current = value;
  });
  
  return ref.current;
}

// ä½¿ç”¨
function Counter() {
  const [count, setCount] = useState(0);
  const prevCount = usePrevious(count);
  
  return (
    &lt;div&gt;
      &lt;div&gt;Current: {count}&lt;/div&gt;
      &lt;div&gt;Previous: {prevCount}&lt;/div&gt;
      &lt;button onClick={() =&gt; setCount(count + 1)}&gt;Increment&lt;/button&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<p>è¿™ä¸ªAPIå‚è€ƒæ–‡æ¡£æ¶µç›–äº†Reactçš„æ‰€æœ‰ä¸»è¦APIå’Œä½¿ç”¨æ¨¡å¼ã€‚æ¯ä¸ªAPIéƒ½åŒ…å«äº†è¯¦ç»†çš„ä½¿ç”¨ç¤ºä¾‹å’Œæœ€ä½³å®è·µï¼Œå¯ä»¥ä½œä¸ºæ—¥å¸¸å¼€å‘çš„å‚è€ƒæ‰‹å†Œã€‚ </p>

          </div>

          <!-- æ–‡æ¡£å¯¼èˆª -->
          <div class="doc-navigation">
            
              <a href="32-è°ƒè¯•æŠ€å·§.html" class="nav-btn prev-btn">
                <span class="nav-icon">â†</span>
                <div class="nav-text">
                  <span class="nav-label">ä¸Šä¸€ç¯‡</span>
                  <span class="nav-title">è°ƒè¯•æŠ€å·§</span>
                </div>
              </a>
            
            
            
              <a href="34-DOMå…ƒç´ å±æ€§.html" class="nav-btn next-btn">
                <div class="nav-text">
                  <span class="nav-label">ä¸‹ä¸€ç¯‡</span>
                  <span class="nav-title">DOMå…ƒç´ å±æ€§</span>
                </div>
                <span class="nav-icon">â†’</span>
              </a>
            
          </div>
        </article>
      </main>
    </div>

    <!-- è¿”å›é¡¶éƒ¨æŒ‰é’® -->
    <button class="back-to-top" id="backToTop" onclick="scrollToTop()">
      <span>â†‘</span>
    </button>

    <!-- åº•éƒ¨ -->
    <footer class="footer">
      <div class="footer-content">
        <p>&copy; 2024 React ä¸­æ–‡æ–‡æ¡£. åŸºäº React 18.x æ„å»º</p>
        <p>Made with â¤ï¸ by Reactä¸­æ–‡ç¤¾åŒº</p>
      </div>
    </footer>
  </div>

  <script src="assets/script.js"></script>
</body>
</html>