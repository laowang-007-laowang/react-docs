<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>React-Hookså®Œæ•´å‚è€ƒ - React ä¸­æ–‡æ–‡æ¡£</title>
  <meta name="description" content="ä»å…¥é—¨åˆ°ç²¾é€šï¼Œå…¨é¢æŒæ¡Reactå¼€å‘æŠ€èƒ½">
  <link rel="stylesheet" href="assets/style.css">
  <link rel="stylesheet" href="assets/highlight.css">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>âš›ï¸</text></svg>">
</head>
<body>
  <div class="container">
    <!-- é¡¶éƒ¨å¯¼èˆª -->
    <header class="header">
      <div class="header-content">
        <div class="logo">
          <span class="logo-icon">âš›ï¸</span>
          <div class="logo-text">
            <h1>React ä¸­æ–‡æ–‡æ¡£</h1>
            <p>ç°ä»£åŒ–çš„Reactå­¦ä¹ æŒ‡å—</p>
          </div>
        </div>
        <nav class="header-nav">
          <a href="index.html" class="nav-link">é¦–é¡µ</a>
          <a href="#" class="nav-link" onclick="toggleSidebar()">ç›®å½•</a>
          <a href="https://github.com/facebook/react" target="_blank" class="nav-link">GitHub</a>
        </nav>
      </div>
    </header>

    <div class="main-layout">
      <!-- ä¾§è¾¹æ  -->
      <aside class="sidebar" id="sidebar">
        <div class="sidebar-content">
          <div class="search-box">
            <input type="text" placeholder="æœç´¢æ–‡æ¡£..." id="searchInput" onkeyup="searchDocs()">
            <span class="search-icon">ğŸ”</span>
          </div>
          <nav class="doc-nav">
            
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ“š</span>
          åŸºç¡€æ¦‚å¿µ
        </h3>
        <ul class="category-docs">
          <li><a href="01-Reactç®€ä»‹.html" class="doc-link">Reactç®€ä»‹</a></li><li><a href="02-ç¯å¢ƒæ­å»º.html" class="doc-link">ç¯å¢ƒæ­å»º</a></li><li><a href="03-JSXè¯­æ³•.html" class="doc-link">JSXè¯­æ³•</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ§©</span>
          ç»„ä»¶å¼€å‘
        </h3>
        <ul class="category-docs">
          <li><a href="04-ç»„ä»¶åŸºç¡€.html" class="doc-link">ç»„ä»¶åŸºç¡€</a></li><li><a href="05-Propsä¸State.html" class="doc-link">Propsä¸State</a></li><li><a href="06-äº‹ä»¶å¤„ç†.html" class="doc-link">äº‹ä»¶å¤„ç†</a></li><li><a href="07-æ¡ä»¶æ¸²æŸ“.html" class="doc-link">æ¡ä»¶æ¸²æŸ“</a></li><li><a href="08-åˆ—è¡¨æ¸²æŸ“.html" class="doc-link">åˆ—è¡¨æ¸²æŸ“</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ£</span>
          Hooks API
        </h3>
        <ul class="category-docs">
          <li><a href="09-Hooksæ¦‚è¿°.html" class="doc-link">Hooksæ¦‚è¿°</a></li><li><a href="10-useState.html" class="doc-link">useState</a></li><li><a href="11-useEffect.html" class="doc-link">useEffect</a></li><li><a href="12-useContext.html" class="doc-link">useContext</a></li><li><a href="13-useReducer.html" class="doc-link">useReducer</a></li><li><a href="14-useMemoå’ŒuseCallback.html" class="doc-link">useMemoå’ŒuseCallback</a></li><li><a href="15-useRef.html" class="doc-link">useRef</a></li><li><a href="16-è‡ªå®šä¹‰Hooks.html" class="doc-link">è‡ªå®šä¹‰Hooks</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ”„</span>
          ç”Ÿå‘½å‘¨æœŸ
        </h3>
        <ul class="category-docs">
          <li><a href="17-ç”Ÿå‘½å‘¨æœŸæ–¹æ³•.html" class="doc-link">ç”Ÿå‘½å‘¨æœŸæ–¹æ³•</a></li><li><a href="18-å‰¯ä½œç”¨å¤„ç†.html" class="doc-link">å‰¯ä½œç”¨å¤„ç†</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ¨</span>
          æ ·å¼ä¸UI
        </h3>
        <ul class="category-docs">
          <li><a href="19-æ ·å¼å¤„ç†.html" class="doc-link">æ ·å¼å¤„ç†</a></li><li><a href="20-åŠ¨ç”»æ•ˆæœ.html" class="doc-link">åŠ¨ç”»æ•ˆæœ</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ—ºï¸</span>
          è·¯ç”±ç®¡ç†
        </h3>
        <ul class="category-docs">
          <li><a href="21-React-Router.html" class="doc-link">React-Router</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ“¦</span>
          çŠ¶æ€ç®¡ç†
        </h3>
        <ul class="category-docs">
          <li><a href="22-Context-API.html" class="doc-link">Context-API</a></li><li><a href="23-Reduxé›†æˆ.html" class="doc-link">Reduxé›†æˆ</a></li><li><a href="24-ZustandçŠ¶æ€ç®¡ç†.html" class="doc-link">ZustandçŠ¶æ€ç®¡ç†</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸš€</span>
          æ€§èƒ½ä¼˜åŒ–
        </h3>
        <ul class="category-docs">
          <li><a href="25-æ€§èƒ½ä¼˜åŒ–æŠ€å·§.html" class="doc-link">æ€§èƒ½ä¼˜åŒ–æŠ€å·§</a></li><li><a href="26-ä»£ç åˆ†å‰².html" class="doc-link">ä»£ç åˆ†å‰²</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ§ª</span>
          æµ‹è¯•
        </h3>
        <ul class="category-docs">
          <li><a href="27-å•å…ƒæµ‹è¯•.html" class="doc-link">å•å…ƒæµ‹è¯•</a></li><li><a href="28-é›†æˆæµ‹è¯•.html" class="doc-link">é›†æˆæµ‹è¯•</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ—ï¸</span>
          æ„å»ºä¸éƒ¨ç½²
        </h3>
        <ul class="category-docs">
          <li><a href="29-é¡¹ç›®æ„å»º.html" class="doc-link">é¡¹ç›®æ„å»º</a></li><li><a href="30-ç”Ÿäº§éƒ¨ç½².html" class="doc-link">ç”Ÿäº§éƒ¨ç½²</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ› ï¸</span>
          å¼€å‘å·¥å…·
        </h3>
        <ul class="category-docs">
          <li><a href="31-å¼€å‘è€…å·¥å…·.html" class="doc-link">å¼€å‘è€…å·¥å…·</a></li><li><a href="32-è°ƒè¯•æŠ€å·§.html" class="doc-link">è°ƒè¯•æŠ€å·§</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ“–</span>
          APIå‚è€ƒ
        </h3>
        <ul class="category-docs">
          <li><a href="33-React-APIå®Œæ•´å‚è€ƒ.html" class="doc-link">React-APIå®Œæ•´å‚è€ƒ</a></li><li><a href="34-DOMå…ƒç´ å±æ€§.html" class="doc-link">DOMå…ƒç´ å±æ€§</a></li><li><a href="35-åˆæˆäº‹ä»¶.html" class="doc-link">åˆæˆäº‹ä»¶</a></li><li><a href="React-Hookså®Œæ•´å‚è€ƒ.html" class="doc-link">React-Hookså®Œæ•´å‚è€ƒ</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">ğŸ’¡</span>
          æœ€ä½³å®è·µ
        </h3>
        <ul class="category-docs">
          <li><a href="36-ç¼–ç è§„èŒƒ.html" class="doc-link">ç¼–ç è§„èŒƒ</a></li><li><a href="37-é¡¹ç›®æ¶æ„.html" class="doc-link">é¡¹ç›®æ¶æ„</a></li><li><a href="38-å¸¸è§é—®é¢˜.html" class="doc-link">å¸¸è§é—®é¢˜</a></li>
        </ul>
      </div>
          </nav>
        </div>
      </aside>

      <!-- ä¸»å†…å®¹åŒº -->
      <main class="content">
        <article class="doc-article">
          <div class="doc-header">
            <div class="breadcrumb">
              <a href="index.html">é¦–é¡µ</a>
              <span class="separator">></span>
              <span class="current">React-Hookså®Œæ•´å‚è€ƒ</span>
            </div>
            <h1 class="doc-title">React-Hookså®Œæ•´å‚è€ƒ</h1>
            <div class="doc-meta">
              <span class="category" style="background: #fbc2eb">
                ğŸ“– APIå‚è€ƒ
              </span>
            </div>
          </div>
          
          <div class="doc-content">
            <h1>React Hooks å®Œæ•´å‚è€ƒ</h1>
<p>æœ¬æ–‡æ¡£æä¾›Reactæ‰€æœ‰å®˜æ–¹Hooksçš„è¯¦ç»†å‚è€ƒï¼ŒåŒ…æ‹¬å…¥å‚ã€å‡ºå‚ã€ä½¿ç”¨è§„åˆ™ã€æ³¨æ„äº‹é¡¹å’Œä½¿ç”¨åœºæ™¯ã€‚</p>
<h2>ç›®å½•</h2>
<h3>åŸºç¡€ Hooks</h3>
<ul>
<li><a href="#usestate">useState</a></li>
<li><a href="#useeffect">useEffect</a></li>
<li><a href="#usecontext">useContext</a></li>
</ul>
<h3>é¢å¤– Hooks</h3>
<ul>
<li><a href="#usereducer">useReducer</a></li>
<li><a href="#usecallback">useCallback</a></li>
<li><a href="#usememo">useMemo</a></li>
<li><a href="#useref">useRef</a></li>
<li><a href="#useimperativehandle">useImperativeHandle</a></li>
<li><a href="#uselayouteffect">useLayoutEffect</a></li>
<li><a href="#usedebugvalue">useDebugValue</a></li>
</ul>
<h3>React 18+ Hooks</h3>
<ul>
<li><a href="#useid">useId</a></li>
<li><a href="#usetransition">useTransition</a></li>
<li><a href="#usedeferredvalue">useDeferredValue</a></li>
<li><a href="#usesyncexternalstore">useSyncExternalStore</a></li>
<li><a href="#useinsertioneffect">useInsertionEffect</a></li>
</ul>
<hr>
<h2>useState</h2>
<p>ç®¡ç†ç»„ä»¶å†…éƒ¨çŠ¶æ€çš„Hookã€‚</p>
<h3>è¯­æ³•</h3>
<pre><code class="language-typescript">const [state, setState] = useState&lt;T&gt;(initialState: T | (() =&gt; T))
</code></pre>
<h3>å‚æ•°</h3>
<ul>
<li><strong>initialState</strong>: <code>T | (() =&gt; T)</code><ul>
<li>çŠ¶æ€çš„åˆå§‹å€¼</li>
<li>å¯ä»¥æ˜¯å€¼æˆ–è¿”å›åˆå§‹å€¼çš„å‡½æ•°</li>
<li>å‡½æ•°åªåœ¨åˆå§‹æ¸²æŸ“æ—¶è°ƒç”¨ä¸€æ¬¡</li>
</ul>
</li>
</ul>
<h3>è¿”å›å€¼</h3>
<p>è¿”å›ä¸€ä¸ªåŒ…å«ä¸¤ä¸ªå…ƒç´ çš„æ•°ç»„ï¼š</p>
<ul>
<li><strong>state</strong>: <code>T</code> - å½“å‰çŠ¶æ€å€¼</li>
<li><strong>setState</strong>: <code>(newState: T | ((prevState: T) =&gt; T)) =&gt; void</code> - æ›´æ–°çŠ¶æ€çš„å‡½æ•°</li>
</ul>
<h3>ä½¿ç”¨è§„åˆ™</h3>
<ol>
<li>åªèƒ½åœ¨å‡½æ•°ç»„ä»¶æˆ–è‡ªå®šä¹‰Hookä¸­è°ƒç”¨</li>
<li>ä¸èƒ½åœ¨å¾ªç¯ã€æ¡ä»¶è¯­å¥æˆ–åµŒå¥—å‡½æ•°ä¸­è°ƒç”¨</li>
<li>å¿…é¡»åœ¨ç»„ä»¶çš„é¡¶å±‚è°ƒç”¨</li>
</ol>
<h3>ä½¿ç”¨åœºæ™¯</h3>
<ul>
<li>ç®¡ç†ç»„ä»¶çš„æœ¬åœ°çŠ¶æ€</li>
<li>è¡¨å•è¾“å…¥å€¼ç®¡ç†</li>
<li>å¼€å…³çŠ¶æ€æ§åˆ¶</li>
<li>è®¡æ•°å™¨åŠŸèƒ½</li>
</ul>
<h3>ä»£ç ç¤ºä¾‹</h3>
<pre><code class="language-jsx">// åŸºç¡€ç”¨æ³•
function Counter() {
  const [count, setCount] = useState(0)

  return (
    &lt;div&gt;
      &lt;p&gt;Count: {count}&lt;/p&gt;
      &lt;button onClick={() =&gt; setCount(count + 1)}&gt;+&lt;/button&gt;
      &lt;button onClick={() =&gt; setCount(prev =&gt; prev - 1)}&gt;-&lt;/button&gt;
    &lt;/div&gt;
  )
}

// æƒ°æ€§åˆå§‹åŒ–
function ExpensiveComponent() {
  const [data, setData] = useState(() =&gt; {
    // åªåœ¨åˆå§‹æ¸²æŸ“æ—¶æ‰§è¡Œ
    return computeExpensiveValue()
  })

  return &lt;div&gt;{data}&lt;/div&gt;
}

// å¯¹è±¡çŠ¶æ€ç®¡ç†
function UserForm() {
  const [user, setUser] = useState({
    name: &#39;&#39;,
    email: &#39;&#39;,
    age: 0
  })

  const updateUser = (field, value) =&gt; {
    setUser(prev =&gt; ({
      ...prev,
      [field]: value
    }))
  }

  return (
    &lt;form&gt;
      &lt;input 
        value={user.name}
        onChange={(e) =&gt; updateUser(&#39;name&#39;, e.target.value)}
        placeholder=&quot;Name&quot;
      /&gt;
      &lt;input 
        value={user.email}
        onChange={(e) =&gt; updateUser(&#39;email&#39;, e.target.value)}
        placeholder=&quot;Email&quot;
      /&gt;
    &lt;/form&gt;
  )
}
</code></pre>
<h3>æ³¨æ„äº‹é¡¹</h3>
<ol>
<li><strong>çŠ¶æ€æ›´æ–°æ˜¯å¼‚æ­¥çš„</strong> - setStateåç«‹å³è®¿é—®stateå¯èƒ½å¾—åˆ°æ—§å€¼</li>
<li><strong>çŠ¶æ€æ›´æ–°ä¼šè§¦å‘é‡æ–°æ¸²æŸ“</strong> - ç¡®ä¿çŠ¶æ€ç¡®å®éœ€è¦æ›´æ–°</li>
<li><strong>å¯¹è±¡å’Œæ•°ç»„éœ€è¦åˆ›å»ºæ–°çš„å¼•ç”¨</strong> - Reactä½¿ç”¨Object.isè¿›è¡Œæ¯”è¾ƒ</li>
<li><strong>å‡½æ•°å¼æ›´æ–°</strong> - å½“æ–°çŠ¶æ€ä¾èµ–æ—§çŠ¶æ€æ—¶ï¼Œä½¿ç”¨å‡½æ•°å¼æ›´æ–°æ›´å®‰å…¨</li>
</ol>
<hr>
<h2>useEffect</h2>
<p>å¤„ç†å‰¯ä½œç”¨çš„Hookï¼Œå¦‚æ•°æ®è·å–ã€è®¢é˜…ã€æ‰‹åŠ¨DOMæ“ä½œç­‰ã€‚</p>
<h3>è¯­æ³•</h3>
<pre><code class="language-typescript">useEffect(
  effect: () =&gt; void | (() =&gt; void),
  deps?: readonly unknown[]
): void
</code></pre>
<h3>å‚æ•°</h3>
<ul>
<li><strong>effect</strong>: <code>() =&gt; void | (() =&gt; void)</code><ul>
<li>å‰¯ä½œç”¨å‡½æ•°</li>
<li>å¯ä»¥è¿”å›æ¸…ç†å‡½æ•°</li>
</ul>
</li>
<li><strong>deps</strong>: <code>readonly unknown[]</code> (å¯é€‰)<ul>
<li>ä¾èµ–æ•°ç»„</li>
<li>åªæœ‰ä¾èµ–é¡¹å˜åŒ–æ—¶æ‰é‡æ–°æ‰§è¡Œeffect</li>
<li>ç©ºæ•°ç»„è¡¨ç¤ºåªåœ¨æŒ‚è½½å’Œå¸è½½æ—¶æ‰§è¡Œ</li>
<li>ä¸ä¼ è¡¨ç¤ºæ¯æ¬¡æ¸²æŸ“éƒ½æ‰§è¡Œ</li>
</ul>
</li>
</ul>
<h3>è¿”å›å€¼</h3>
<p>æ— è¿”å›å€¼</p>
<h3>ä½¿ç”¨è§„åˆ™</h3>
<ol>
<li>åªèƒ½åœ¨å‡½æ•°ç»„ä»¶æˆ–è‡ªå®šä¹‰Hookä¸­è°ƒç”¨</li>
<li>å¿…é¡»åœ¨ç»„ä»¶çš„é¡¶å±‚è°ƒç”¨</li>
<li>ä¾èµ–æ•°ç»„ä¸­å¿…é¡»åŒ…å«effectä¸­ä½¿ç”¨çš„æ‰€æœ‰å“åº”å¼å€¼</li>
</ol>
<h3>ä½¿ç”¨åœºæ™¯</h3>
<ul>
<li>æ•°æ®è·å–å’ŒAPIè°ƒç”¨</li>
<li>äº‹ä»¶ç›‘å¬å™¨çš„æ·»åŠ å’Œç§»é™¤</li>
<li>å®šæ—¶å™¨çš„åˆ›å»ºå’Œæ¸…ç†</li>
<li>è®¢é˜…å¤–éƒ¨æ•°æ®æº</li>
<li>æ‰‹åŠ¨DOMæ“ä½œ</li>
</ul>
<h3>ä»£ç ç¤ºä¾‹</h3>
<pre><code class="language-jsx">// æ•°æ®è·å–
function UserProfile({ userId }) {
  const [user, setUser] = useState(null)
  const [loading, setLoading] = useState(true)

  useEffect(() =&gt; {
    let cancelled = false

    const fetchUser = async () =&gt; {
      try {
        setLoading(true)
        const response = await fetch(`/api/users/${userId}`)
        const userData = await response.json()
        
        if (!cancelled) {
          setUser(userData)
        }
      } catch (error) {
        if (!cancelled) {
          console.error(&#39;Failed to fetch user:&#39;, error)
        }
      } finally {
        if (!cancelled) {
          setLoading(false)
        }
      }
    }

    fetchUser()

    return () =&gt; {
      cancelled = true
    }
  }, [userId])

  if (loading) return &lt;div&gt;Loading...&lt;/div&gt;
  if (!user) return &lt;div&gt;User not found&lt;/div&gt;

  return &lt;div&gt;{user.name}&lt;/div&gt;
}

// äº‹ä»¶ç›‘å¬å™¨
function WindowWidth() {
  const [width, setWidth] = useState(window.innerWidth)

  useEffect(() =&gt; {
    const handleResize = () =&gt; {
      setWidth(window.innerWidth)
    }

    window.addEventListener(&#39;resize&#39;, handleResize)

    return () =&gt; {
      window.removeEventListener(&#39;resize&#39;, handleResize)
    }
  }, [])

  return &lt;div&gt;Window width: {width}px&lt;/div&gt;
}

// å®šæ—¶å™¨
function Timer() {
  const [time, setTime] = useState(0)
  const [isRunning, setIsRunning] = useState(false)

  useEffect(() =&gt; {
    let intervalId

    if (isRunning) {
      intervalId = setInterval(() =&gt; {
        setTime(time =&gt; time + 1)
      }, 1000)
    }

    return () =&gt; {
      if (intervalId) {
        clearInterval(intervalId)
      }
    }
  }, [isRunning])

  return (
    &lt;div&gt;
      &lt;div&gt;Time: {time}s&lt;/div&gt;
      &lt;button onClick={() =&gt; setIsRunning(!isRunning)}&gt;
        {isRunning ? &#39;Stop&#39; : &#39;Start&#39;}
      &lt;/button&gt;
    &lt;/div&gt;
  )
}
</code></pre>
<h3>æ³¨æ„äº‹é¡¹</h3>
<ol>
<li><strong>æ¸…ç†å‡½æ•°</strong> - å§‹ç»ˆæ¸…ç†å‰¯ä½œç”¨ä»¥é¿å…å†…å­˜æ³„æ¼</li>
<li><strong>ä¾èµ–æ•°ç»„</strong> - ç¡®ä¿åŒ…å«æ‰€æœ‰ä¾èµ–é¡¹ï¼Œä½¿ç”¨ESLintæ’ä»¶æ£€æŸ¥</li>
<li><strong>æ— é™å¾ªç¯</strong> - é¿å…åœ¨effectä¸­æ›´æ–°ä¾èµ–é¡¹å¯¼è‡´çš„æ— é™å¾ªç¯</li>
<li><strong>å–æ¶ˆæœºåˆ¶</strong> - å¯¹äºå¼‚æ­¥æ“ä½œï¼Œå®ç°å–æ¶ˆæœºåˆ¶é˜²æ­¢åœ¨ç»„ä»¶å¸è½½åæ›´æ–°çŠ¶æ€</li>
</ol>
<hr>
<h2>useContext</h2>
<p>æ¶ˆè´¹Contextå€¼çš„Hookã€‚</p>
<h3>è¯­æ³•</h3>
<pre><code class="language-typescript">const value = useContext&lt;T&gt;(context: React.Context&lt;T&gt;): T
</code></pre>
<h3>å‚æ•°</h3>
<ul>
<li><strong>context</strong>: <code>React.Context&lt;T&gt;</code><ul>
<li>é€šè¿‡<code>createContext</code>åˆ›å»ºçš„Contextå¯¹è±¡</li>
</ul>
</li>
</ul>
<h3>è¿”å›å€¼</h3>
<ul>
<li><strong>value</strong>: <code>T</code> - Contextçš„å½“å‰å€¼</li>
</ul>
<h3>ä½¿ç”¨è§„åˆ™</h3>
<ol>
<li>åªèƒ½åœ¨å‡½æ•°ç»„ä»¶æˆ–è‡ªå®šä¹‰Hookä¸­è°ƒç”¨</li>
<li>å¿…é¡»åœ¨ç»„ä»¶çš„é¡¶å±‚è°ƒç”¨</li>
<li>ç»„ä»¶å¿…é¡»è¢«å¯¹åº”çš„Context.ProvideråŒ…è£¹</li>
</ol>
<h3>ä½¿ç”¨åœºæ™¯</h3>
<ul>
<li>å…¨å±€çŠ¶æ€ç®¡ç†</li>
<li>ä¸»é¢˜åˆ‡æ¢</li>
<li>ç”¨æˆ·è®¤è¯ä¿¡æ¯</li>
<li>è¯­è¨€å›½é™…åŒ–</li>
<li>é¿å…prop drilling</li>
</ul>
<h3>ä»£ç ç¤ºä¾‹</h3>
<pre><code class="language-jsx">// åˆ›å»ºContext
const ThemeContext = createContext()
const UserContext = createContext()

// Providerç»„ä»¶
function App() {
  const [theme, setTheme] = useState(&#39;light&#39;)
  const [user, setUser] = useState(null)

  return (
    &lt;ThemeContext.Provider value={{ theme, setTheme }}&gt;
      &lt;UserContext.Provider value={{ user, setUser }}&gt;
        &lt;Header /&gt;
        &lt;MainContent /&gt;
      &lt;/UserContext.Provider&gt;
    &lt;/ThemeContext.Provider&gt;
  )
}

// æ¶ˆè´¹Context
function Header() {
  const { theme, setTheme } = useContext(ThemeContext)
  const { user } = useContext(UserContext)

  return (
    &lt;header className={`header ${theme}`}&gt;
      &lt;h1&gt;My App&lt;/h1&gt;
      {user &amp;&amp; &lt;span&gt;Welcome, {user.name}&lt;/span&gt;}
      &lt;button onClick={() =&gt; setTheme(theme === &#39;light&#39; ? &#39;dark&#39; : &#39;light&#39;)}&gt;
        Toggle Theme
      &lt;/button&gt;
    &lt;/header&gt;
  )
}

// è‡ªå®šä¹‰Hookå°è£…Context
function useTheme() {
  const context = useContext(ThemeContext)
  if (!context) {
    throw new Error(&#39;useTheme must be used within a ThemeProvider&#39;)
  }
  return context
}

function useUser() {
  const context = useContext(UserContext)
  if (!context) {
    throw new Error(&#39;useUser must be used within a UserProvider&#39;)
  }
  return context
}

// ä½¿ç”¨è‡ªå®šä¹‰Hook
function Profile() {
  const { theme } = useTheme()
  const { user, setUser } = useUser()

  return (
    &lt;div className={`profile ${theme}`}&gt;
      {user ? (
        &lt;div&gt;
          &lt;p&gt;Name: {user.name}&lt;/p&gt;
          &lt;button onClick={() =&gt; setUser(null)}&gt;Logout&lt;/button&gt;
        &lt;/div&gt;
      ) : (
        &lt;button onClick={() =&gt; setUser({ name: &#39;John&#39; })}&gt;Login&lt;/button&gt;
      )}
    &lt;/div&gt;
  )
}
</code></pre>
<h3>æ³¨æ„äº‹é¡¹</h3>
<ol>
<li><strong>Providerå±‚çº§</strong> - ç¡®ä¿ç»„ä»¶åœ¨æ­£ç¡®çš„Providerå†…éƒ¨</li>
<li><strong>Contexté»˜è®¤å€¼</strong> - åœ¨æ²¡æœ‰Provideræ—¶çš„fallbackå€¼</li>
<li><strong>æ€§èƒ½è€ƒè™‘</strong> - Contextå€¼å˜åŒ–ä¼šå¯¼è‡´æ‰€æœ‰æ¶ˆè´¹è€…é‡æ–°æ¸²æŸ“</li>
<li><strong>ç±»å‹å®‰å…¨</strong> - åœ¨TypeScriptä¸­æ­£ç¡®å®šä¹‰Contextç±»å‹</li>
</ol>
<hr>
<h2>useReducer</h2>
<p>useStateçš„æ›¿ä»£æ–¹æ¡ˆï¼Œç”¨äºç®¡ç†å¤æ‚çš„çŠ¶æ€é€»è¾‘ã€‚</p>
<h3>è¯­æ³•</h3>
<pre><code class="language-typescript">const [state, dispatch] = useReducer&lt;R&gt;(
  reducer: (state: ReducerState&lt;R&gt;, action: ReducerAction&lt;R&gt;) =&gt; ReducerState&lt;R&gt;,
  initialArg: ReducerState&lt;R&gt;,
  init?: (initialArg: ReducerState&lt;R&gt;) =&gt; ReducerState&lt;R&gt;
): [ReducerState&lt;R&gt;, Dispatch&lt;ReducerAction&lt;R&gt;&gt;]
</code></pre>
<h3>å‚æ•°</h3>
<ul>
<li><strong>reducer</strong>: <code>(state, action) =&gt; newState</code><ul>
<li>çº¯å‡½æ•°ï¼Œæ¥æ”¶å½“å‰çŠ¶æ€å’Œactionï¼Œè¿”å›æ–°çŠ¶æ€</li>
</ul>
</li>
<li><strong>initialArg</strong>: åˆå§‹çŠ¶æ€å€¼</li>
<li><strong>init</strong>: <code>(initialArg) =&gt; initialState</code> (å¯é€‰)<ul>
<li>æƒ°æ€§åˆå§‹åŒ–å‡½æ•°</li>
</ul>
</li>
</ul>
<h3>è¿”å›å€¼</h3>
<p>è¿”å›åŒ…å«ä¸¤ä¸ªå…ƒç´ çš„æ•°ç»„ï¼š</p>
<ul>
<li><strong>state</strong>: å½“å‰çŠ¶æ€</li>
<li><strong>dispatch</strong>: æ´¾å‘actionçš„å‡½æ•°</li>
</ul>
<h3>ä½¿ç”¨è§„åˆ™</h3>
<ol>
<li>åªèƒ½åœ¨å‡½æ•°ç»„ä»¶æˆ–è‡ªå®šä¹‰Hookä¸­è°ƒç”¨</li>
<li>å¿…é¡»åœ¨ç»„ä»¶çš„é¡¶å±‚è°ƒç”¨</li>
<li>reducerå‡½æ•°å¿…é¡»æ˜¯çº¯å‡½æ•°</li>
</ol>
<h3>ä½¿ç”¨åœºæ™¯</h3>
<ul>
<li>å¤æ‚çš„çŠ¶æ€é€»è¾‘</li>
<li>çŠ¶æ€æ›´æ–°ä¾èµ–å¤šä¸ªå­å€¼</li>
<li>ä¸‹ä¸€ä¸ªçŠ¶æ€ä¾èµ–å‰ä¸€ä¸ªçŠ¶æ€</li>
<li>çŠ¶æ€ç®¡ç†éœ€è¦æ›´å¥½çš„å¯é¢„æµ‹æ€§</li>
</ul>
<h3>ä»£ç ç¤ºä¾‹</h3>
<pre><code class="language-jsx">// è®¡æ•°å™¨ç¤ºä¾‹
const initialState = { count: 0 }

function counterReducer(state, action) {
  switch (action.type) {
    case &#39;increment&#39;:
      return { count: state.count + 1 }
    case &#39;decrement&#39;:
      return { count: state.count - 1 }
    case &#39;reset&#39;:
      return initialState
    case &#39;set&#39;:
      return { count: action.payload }
    default:
      throw new Error(`Unknown action type: ${action.type}`)
  }
}

function Counter() {
  const [state, dispatch] = useReducer(counterReducer, initialState)

  return (
    &lt;div&gt;
      &lt;p&gt;Count: {state.count}&lt;/p&gt;
      &lt;button onClick={() =&gt; dispatch({ type: &#39;increment&#39; })}&gt;+&lt;/button&gt;
      &lt;button onClick={() =&gt; dispatch({ type: &#39;decrement&#39; })}&gt;-&lt;/button&gt;
      &lt;button onClick={() =&gt; dispatch({ type: &#39;reset&#39; })}&gt;Reset&lt;/button&gt;
      &lt;button onClick={() =&gt; dispatch({ type: &#39;set&#39;, payload: 10 })}&gt;
        Set to 10
      &lt;/button&gt;
    &lt;/div&gt;
  )
}

// è¡¨å•ç®¡ç†ç¤ºä¾‹
const formInitialState = {
  name: &#39;&#39;,
  email: &#39;&#39;,
  errors: {},
  isSubmitting: false
}

function formReducer(state, action) {
  switch (action.type) {
    case &#39;SET_FIELD&#39;:
      return {
        ...state,
        [action.field]: action.value,
        errors: {
          ...state.errors,
          [action.field]: null
        }
      }
    case &#39;SET_ERROR&#39;:
      return {
        ...state,
        errors: {
          ...state.errors,
          [action.field]: action.error
        }
      }
    case &#39;SET_SUBMITTING&#39;:
      return {
        ...state,
        isSubmitting: action.isSubmitting
      }
    case &#39;RESET_FORM&#39;:
      return formInitialState
    default:
      return state
  }
}

function ContactForm() {
  const [state, dispatch] = useReducer(formReducer, formInitialState)

  const handleSubmit = async (e) =&gt; {
    e.preventDefault()
    
    // éªŒè¯
    if (!state.name) {
      dispatch({ type: &#39;SET_ERROR&#39;, field: &#39;name&#39;, error: &#39;Name is required&#39; })
      return
    }
    
    if (!state.email) {
      dispatch({ type: &#39;SET_ERROR&#39;, field: &#39;email&#39;, error: &#39;Email is required&#39; })
      return
    }

    // æäº¤
    dispatch({ type: &#39;SET_SUBMITTING&#39;, isSubmitting: true })
    
    try {
      await submitForm({ name: state.name, email: state.email })
      dispatch({ type: &#39;RESET_FORM&#39; })
    } catch (error) {
      dispatch({ type: &#39;SET_ERROR&#39;, field: &#39;submit&#39;, error: error.message })
    } finally {
      dispatch({ type: &#39;SET_SUBMITTING&#39;, isSubmitting: false })
    }
  }

  return (
    &lt;form onSubmit={handleSubmit}&gt;
      &lt;input
        type=&quot;text&quot;
        value={state.name}
        onChange={(e) =&gt; dispatch({ 
          type: &#39;SET_FIELD&#39;, 
          field: &#39;name&#39;, 
          value: e.target.value 
        })}
        placeholder=&quot;Name&quot;
      /&gt;
      {state.errors.name &amp;&amp; &lt;span&gt;{state.errors.name}&lt;/span&gt;}

      &lt;input
        type=&quot;email&quot;
        value={state.email}
        onChange={(e) =&gt; dispatch({ 
          type: &#39;SET_FIELD&#39;, 
          field: &#39;email&#39;, 
          value: e.target.value 
        })}
        placeholder=&quot;Email&quot;
      /&gt;
      {state.errors.email &amp;&amp; &lt;span&gt;{state.errors.email}&lt;/span&gt;}

      &lt;button type=&quot;submit&quot; disabled={state.isSubmitting}&gt;
        {state.isSubmitting ? &#39;Submitting...&#39; : &#39;Submit&#39;}
      &lt;/button&gt;
      
      {state.errors.submit &amp;&amp; &lt;div&gt;{state.errors.submit}&lt;/div&gt;}
    &lt;/form&gt;
  )
}
</code></pre>
<h3>æ³¨æ„äº‹é¡¹</h3>
<ol>
<li><strong>çº¯å‡½æ•°</strong> - reducerå¿…é¡»æ˜¯çº¯å‡½æ•°ï¼Œä¸èƒ½æœ‰å‰¯ä½œç”¨</li>
<li><strong>ä¸å¯å˜æ›´æ–°</strong> - å¿…é¡»è¿”å›æ–°çš„çŠ¶æ€å¯¹è±¡</li>
<li><strong>actionè®¾è®¡</strong> - è®¾è®¡æ¸…æ™°çš„actionç±»å‹å’Œç»“æ„</li>
<li><strong>æ€§èƒ½</strong> - å¤æ‚çŠ¶æ€æ—¶æ¯”useStateæ›´é«˜æ•ˆ</li>
</ol>
<hr>
<h2>useCallback</h2>
<p>è¿”å›ä¸€ä¸ªè®°å¿†åŒ–çš„å›è°ƒå‡½æ•°ã€‚</p>
<h3>è¯­æ³•</h3>
<pre><code class="language-typescript">const memoizedCallback = useCallback&lt;T&gt;(
  callback: T,
  deps: readonly unknown[]
): T
</code></pre>
<h3>å‚æ•°</h3>
<ul>
<li><strong>callback</strong>: è¦è®°å¿†åŒ–çš„å‡½æ•°</li>
<li><strong>deps</strong>: ä¾èµ–æ•°ç»„ï¼Œåªæœ‰å½“ä¾èµ–é¡¹æ”¹å˜æ—¶æ‰ä¼šè¿”å›æ–°çš„å‡½æ•°</li>
</ul>
<h3>è¿”å›å€¼</h3>
<ul>
<li><strong>memoizedCallback</strong>: è®°å¿†åŒ–çš„å›è°ƒå‡½æ•°</li>
</ul>
<h3>ä½¿ç”¨è§„åˆ™</h3>
<ol>
<li>åªèƒ½åœ¨å‡½æ•°ç»„ä»¶æˆ–è‡ªå®šä¹‰Hookä¸­è°ƒç”¨</li>
<li>å¿…é¡»åœ¨ç»„ä»¶çš„é¡¶å±‚è°ƒç”¨</li>
<li>ä¾èµ–æ•°ç»„å¿…é¡»åŒ…å«å›è°ƒå‡½æ•°ä¸­ä½¿ç”¨çš„æ‰€æœ‰å“åº”å¼å€¼</li>
</ol>
<h3>ä½¿ç”¨åœºæ™¯</h3>
<ul>
<li>é˜²æ­¢å­ç»„ä»¶ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“</li>
<li>ä½œä¸ºå…¶ä»–Hookçš„ä¾èµ–é¡¹</li>
<li>ä¼ é€’ç»™ä½¿ç”¨äº†React.memoçš„å­ç»„ä»¶</li>
<li>æ˜‚è´µçš„å‡½æ•°è®¡ç®—</li>
</ul>
<h3>ä»£ç ç¤ºä¾‹</h3>
<pre><code class="language-jsx">// é˜²æ­¢å­ç»„ä»¶é‡æ–°æ¸²æŸ“
const ExpensiveChild = React.memo(({ onClick, data }) =&gt; {
  console.log(&#39;ExpensiveChild rendered&#39;)
  
  return (
    &lt;div&gt;
      &lt;button onClick={onClick}&gt;Click me&lt;/button&gt;
      &lt;div&gt;{data.map(item =&gt; &lt;div key={item.id}&gt;{item.name}&lt;/div&gt;)}&lt;/div&gt;
    &lt;/div&gt;
  )
})

function Parent() {
  const [count, setCount] = useState(0)
  const [items, setItems] = useState([])

  // æ²¡æœ‰useCallbackï¼Œæ¯æ¬¡æ¸²æŸ“éƒ½ä¼šåˆ›å»ºæ–°å‡½æ•°
  const handleClick = () =&gt; {
    console.log(&#39;Button clicked&#39;)
  }

  // ä½¿ç”¨useCallbackï¼Œåªæœ‰å½“ä¾èµ–é¡¹æ”¹å˜æ—¶æ‰åˆ›å»ºæ–°å‡½æ•°
  const handleClickMemoized = useCallback(() =&gt; {
    console.log(&#39;Button clicked&#39;, count)
  }, [count])

  const addItem = useCallback(() =&gt; {
    setItems(prev =&gt; [...prev, { id: Date.now(), name: `Item ${prev.length}` }])
  }, [])

  return (
    &lt;div&gt;
      &lt;button onClick={() =&gt; setCount(count + 1)}&gt;Count: {count}&lt;/button&gt;
      &lt;button onClick={addItem}&gt;Add Item&lt;/button&gt;
      
      {/* è¿™ä¸ªä¼šå¯¼è‡´ExpensiveChildæ¯æ¬¡éƒ½é‡æ–°æ¸²æŸ“ */}
      &lt;ExpensiveChild onClick={handleClick} data={items} /&gt;
      
      {/* è¿™ä¸ªåªæœ‰åœ¨countæ”¹å˜æ—¶æ‰ä¼šé‡æ–°æ¸²æŸ“ */}
      &lt;ExpensiveChild onClick={handleClickMemoized} data={items} /&gt;
    &lt;/div&gt;
  )
}

// ä½œä¸ºuseEffectçš„ä¾èµ–
function SearchComponent() {
  const [query, setQuery] = useState(&#39;&#39;)
  const [results, setResults] = useState([])

  const searchFunction = useCallback(async (searchQuery) =&gt; {
    if (!searchQuery) {
      setResults([])
      return
    }

    try {
      const response = await fetch(`/api/search?q=${searchQuery}`)
      const data = await response.json()
      setResults(data)
    } catch (error) {
      console.error(&#39;Search failed:&#39;, error)
    }
  }, [])

  useEffect(() =&gt; {
    const timeoutId = setTimeout(() =&gt; {
      searchFunction(query)
    }, 500)

    return () =&gt; clearTimeout(timeoutId)
  }, [query, searchFunction])

  return (
    &lt;div&gt;
      &lt;input
        type=&quot;text&quot;
        value={query}
        onChange={(e) =&gt; setQuery(e.target.value)}
        placeholder=&quot;Search...&quot;
      /&gt;
      &lt;ul&gt;
        {results.map(result =&gt; (
          &lt;li key={result.id}&gt;{result.title}&lt;/li&gt;
        ))}
      &lt;/ul&gt;
    &lt;/div&gt;
  )
}

// è‡ªå®šä¹‰Hookä¸­çš„useCallback
function useToggle(initialValue = false) {
  const [value, setValue] = useState(initialValue)

  const toggle = useCallback(() =&gt; {
    setValue(prev =&gt; !prev)
  }, [])

  const setTrue = useCallback(() =&gt; {
    setValue(true)
  }, [])

  const setFalse = useCallback(() =&gt; {
    setValue(false)
  }, [])

  return { value, toggle, setTrue, setFalse }
}
</code></pre>
<h3>æ³¨æ„äº‹é¡¹</h3>
<ol>
<li><strong>ä¸è¦è¿‡åº¦ä½¿ç”¨</strong> - åªåœ¨çœŸæ­£éœ€è¦æ—¶ä½¿ç”¨ï¼Œå¦åˆ™å¯èƒ½é€‚å¾—å…¶å</li>
<li><strong>ä¾èµ–æ•°ç»„</strong> - ç¡®ä¿åŒ…å«æ‰€æœ‰ä¾èµ–é¡¹</li>
<li><strong>å¼•ç”¨ç›¸ç­‰æ€§</strong> - useCallbackä¿è¯å¼•ç”¨ç›¸ç­‰æ€§ï¼Œä¸æ˜¯å€¼ç›¸ç­‰æ€§</li>
<li><strong>ä¸React.memoé…åˆ</strong> - é€šå¸¸ä¸React.memoä¸€èµ·ä½¿ç”¨æ‰æœ‰æ„ä¹‰</li>
</ol>
<hr>
<h2>useMemo</h2>
<p>è¿”å›ä¸€ä¸ªè®°å¿†åŒ–çš„å€¼ï¼Œåªæœ‰å½“ä¾èµ–é¡¹æ”¹å˜æ—¶æ‰é‡æ–°è®¡ç®—ã€‚</p>
<h3>è¯­æ³•</h3>
<pre><code class="language-typescript">const memoizedValue = useMemo&lt;T&gt;(
  factory: () =&gt; T,
  deps: readonly unknown[]
): T
</code></pre>
<h3>å‚æ•°</h3>
<ul>
<li><strong>factory</strong>: <code>() =&gt; T</code> - è¿”å›è¦è®°å¿†åŒ–å€¼çš„å‡½æ•°</li>
<li><strong>deps</strong>: <code>readonly unknown[]</code> - ä¾èµ–æ•°ç»„</li>
</ul>
<h3>è¿”å›å€¼</h3>
<ul>
<li><strong>memoizedValue</strong>: <code>T</code> - è®°å¿†åŒ–çš„å€¼</li>
</ul>
<h3>ä½¿ç”¨è§„åˆ™</h3>
<ol>
<li>åªèƒ½åœ¨å‡½æ•°ç»„ä»¶æˆ–è‡ªå®šä¹‰Hookä¸­è°ƒç”¨</li>
<li>å¿…é¡»åœ¨ç»„ä»¶çš„é¡¶å±‚è°ƒç”¨</li>
<li>ä¾èµ–æ•°ç»„å¿…é¡»åŒ…å«factoryå‡½æ•°ä¸­ä½¿ç”¨çš„æ‰€æœ‰å“åº”å¼å€¼</li>
</ol>
<h3>ä½¿ç”¨åœºæ™¯</h3>
<ul>
<li>æ˜‚è´µçš„è®¡ç®—æ“ä½œ</li>
<li>å¤æ‚å¯¹è±¡çš„åˆ›å»º</li>
<li>é¿å…åœ¨æ¯æ¬¡æ¸²æŸ“æ—¶é‡æ–°è®¡ç®—ç›¸åŒçš„å€¼</li>
<li>ä½œä¸ºå…¶ä»–Hookçš„ä¾èµ–é¡¹</li>
</ul>
<h3>ä»£ç ç¤ºä¾‹</h3>
<pre><code class="language-jsx">// æ˜‚è´µçš„è®¡ç®—
function ExpensiveComponent({ items, filter }) {
  // æ²¡æœ‰useMemoï¼Œæ¯æ¬¡æ¸²æŸ“éƒ½ä¼šé‡æ–°è®¡ç®—
  const expensiveValue = computeExpensiveValue(items, filter)

  // ä½¿ç”¨useMemoï¼Œåªæœ‰å½“ä¾èµ–é¡¹æ”¹å˜æ—¶æ‰é‡æ–°è®¡ç®—
  const memoizedExpensiveValue = useMemo(() =&gt; {
    console.log(&#39;Computing expensive value...&#39;)
    return computeExpensiveValue(items, filter)
  }, [items, filter])

  return &lt;div&gt;{memoizedExpensiveValue}&lt;/div&gt;
}

function computeExpensiveValue(items, filter) {
  return items
    .filter(item =&gt; item.category === filter)
    .reduce((sum, item) =&gt; sum + item.value, 0)
}

// å¤æ‚å¯¹è±¡åˆ›å»º
function UserList({ users, sortBy, filterBy }) {
  const processedUsers = useMemo(() =&gt; {
    console.log(&#39;Processing users...&#39;)
    
    let filtered = users.filter(user =&gt; 
      filterBy ? user.role === filterBy : true
    )

    let sorted = filtered.sort((a, b) =&gt; {
      switch (sortBy) {
        case &#39;name&#39;:
          return a.name.localeCompare(b.name)
        case &#39;age&#39;:
          return a.age - b.age
        case &#39;email&#39;:
          return a.email.localeCompare(b.email)
        default:
          return 0
      }
    })

    return sorted.map(user =&gt; ({
      ...user,
      displayName: `${user.name} (${user.role})`
    }))
  }, [users, sortBy, filterBy])

  return (
    &lt;ul&gt;
      {processedUsers.map(user =&gt; (
        &lt;li key={user.id}&gt;{user.displayName}&lt;/li&gt;
      ))}
    &lt;/ul&gt;
  )
}

// é¿å…å­ç»„ä»¶é‡æ–°æ¸²æŸ“
const ChildComponent = React.memo(({ config }) =&gt; {
  console.log(&#39;ChildComponent rendered&#39;)
  return &lt;div&gt;{config.title}&lt;/div&gt;
})

function ParentComponent({ title, count }) {
  // æ²¡æœ‰useMemoï¼Œæ¯æ¬¡æ¸²æŸ“éƒ½ä¼šåˆ›å»ºæ–°å¯¹è±¡
  const config = { title, timestamp: Date.now() }

  // ä½¿ç”¨useMemoï¼Œåªæœ‰titleæ”¹å˜æ—¶æ‰åˆ›å»ºæ–°å¯¹è±¡
  const memoizedConfig = useMemo(() =&gt; ({
    title,
    timestamp: Date.now()
  }), [title])

  return (
    &lt;div&gt;
      &lt;button onClick={() =&gt; setCount(count + 1)}&gt;Count: {count}&lt;/button&gt;
      {/* æ¯æ¬¡éƒ½ä¼šé‡æ–°æ¸²æŸ“ */}
      &lt;ChildComponent config={config} /&gt;
      {/* åªæœ‰titleæ”¹å˜æ—¶æ‰é‡æ–°æ¸²æŸ“ */}
      &lt;ChildComponent config={memoizedConfig} /&gt;
    &lt;/div&gt;
  )
}

// ä½œä¸ºå…¶ä»–Hookçš„ä¾èµ–é¡¹
function SearchWithCache({ query, options }) {
  const searchParams = useMemo(() =&gt; ({
    query: query.trim().toLowerCase(),
    includeArchived: options.includeArchived,
    sortBy: options.sortBy
  }), [query, options.includeArchived, options.sortBy])

  const [results, setResults] = useState([])

  useEffect(() =&gt; {
    const searchData = async () =&gt; {
      try {
        const response = await fetch(&#39;/api/search&#39;, {
          method: &#39;POST&#39;,
          headers: { &#39;Content-Type&#39;: &#39;application/json&#39; },
          body: JSON.stringify(searchParams)
        })
        const data = await response.json()
        setResults(data)
      } catch (error) {
        console.error(&#39;Search failed:&#39;, error)
      }
    }

    if (searchParams.query) {
      searchData()
    } else {
      setResults([])
    }
  }, [searchParams])

  return (
    &lt;ul&gt;
      {results.map(result =&gt; (
        &lt;li key={result.id}&gt;{result.title}&lt;/li&gt;
      ))}
    &lt;/ul&gt;
  )
}
</code></pre>
<h3>æ³¨æ„äº‹é¡¹</h3>
<ol>
<li><strong>ä¸è¦è¿‡åº¦ä½¿ç”¨</strong> - è®°å¿†åŒ–æœ¬èº«ä¹Ÿæœ‰å¼€é”€</li>
<li><strong>å¼•ç”¨ç±»å‹</strong> - å¯¹äºåŸå§‹å€¼ï¼ŒuseMemoé€šå¸¸æ²¡æœ‰å¿…è¦</li>
<li><strong>ä¾èµ–æ•°ç»„</strong> - ç¡®ä¿åŒ…å«æ‰€æœ‰ä¾èµ–é¡¹</li>
<li><strong>æ€§èƒ½æƒè¡¡</strong> - åªåœ¨çœŸæ­£æ˜‚è´µçš„è®¡ç®—æ—¶ä½¿ç”¨</li>
</ol>
<hr>
<h2>useRef</h2>
<p>è¿”å›ä¸€ä¸ªå¯å˜çš„refå¯¹è±¡ï¼Œç”¨äºè®¿é—®DOMå…ƒç´ æˆ–å­˜å‚¨å¯å˜å€¼ã€‚</p>
<h3>è¯­æ³•</h3>
<pre><code class="language-typescript">const refContainer = useRef&lt;T&gt;(initialValue: T): React.MutableRefObject&lt;T&gt;
</code></pre>
<h3>å‚æ•°</h3>
<ul>
<li><strong>initialValue</strong>: <code>T</code> - refçš„åˆå§‹å€¼</li>
</ul>
<h3>è¿”å›å€¼</h3>
<ul>
<li><strong>refContainer</strong>: <code>React.MutableRefObject&lt;T&gt;</code> - åŒ…å«currentå±æ€§çš„refå¯¹è±¡</li>
</ul>
<h3>ä½¿ç”¨è§„åˆ™</h3>
<ol>
<li>åªèƒ½åœ¨å‡½æ•°ç»„ä»¶æˆ–è‡ªå®šä¹‰Hookä¸­è°ƒç”¨</li>
<li>å¿…é¡»åœ¨ç»„ä»¶çš„é¡¶å±‚è°ƒç”¨</li>
<li>æ›´æ”¹ref.currentä¸ä¼šè§¦å‘é‡æ–°æ¸²æŸ“</li>
</ol>
<h3>ä½¿ç”¨åœºæ™¯</h3>
<ul>
<li>è®¿é—®DOMå…ƒç´ </li>
<li>å­˜å‚¨ç»„ä»¶å®ä¾‹</li>
<li>ä¿å­˜å¯å˜å€¼è€Œä¸è§¦å‘é‡æ–°æ¸²æŸ“</li>
<li>å­˜å‚¨å®šæ—¶å™¨IDã€è®¢é˜…ç­‰</li>
<li>è·å–ä¸Šä¸€æ¬¡çš„çŠ¶æ€å€¼</li>
</ul>
<h3>ä»£ç ç¤ºä¾‹</h3>
<pre><code class="language-jsx">// è®¿é—®DOMå…ƒç´ 
function TextInputWithFocusButton() {
  const inputEl = useRef(null)

  const onButtonClick = () =&gt; {
    // `current` æŒ‡å‘å·²æŒ‚è½½åˆ° DOM ä¸Šçš„æ–‡æœ¬è¾“å…¥å…ƒç´ 
    inputEl.current.focus()
  }

  return (
    &lt;div&gt;
      &lt;input ref={inputEl} type=&quot;text&quot; /&gt;
      &lt;button onClick={onButtonClick}&gt;Focus the input&lt;/button&gt;
    &lt;/div&gt;
  )
}

// å­˜å‚¨å¯å˜å€¼
function Timer() {
  const [count, setCount] = useState(0)
  const intervalRef = useRef(null)

  const startTimer = () =&gt; {
    if (intervalRef.current !== null) return

    intervalRef.current = setInterval(() =&gt; {
      setCount(c =&gt; c + 1)
    }, 1000)
  }

  const stopTimer = () =&gt; {
    if (intervalRef.current !== null) {
      clearInterval(intervalRef.current)
      intervalRef.current = null
    }
  }

  useEffect(() =&gt; {
    return () =&gt; {
      // ç»„ä»¶å¸è½½æ—¶æ¸…ç†å®šæ—¶å™¨
      if (intervalRef.current !== null) {
        clearInterval(intervalRef.current)
      }
    }
  }, [])

  return (
    &lt;div&gt;
      &lt;div&gt;Count: {count}&lt;/div&gt;
      &lt;button onClick={startTimer}&gt;Start&lt;/button&gt;
      &lt;button onClick={stopTimer}&gt;Stop&lt;/button&gt;
    &lt;/div&gt;
  )
}

// è·å–ä¸Šä¸€æ¬¡çš„å€¼
function usePrevious(value) {
  const ref = useRef()
  
  useEffect(() =&gt; {
    ref.current = value
  })
  
  return ref.current
}

function Counter() {
  const [count, setCount] = useState(0)
  const prevCount = usePrevious(count)

  return (
    &lt;div&gt;
      &lt;h1&gt;Now: {count}, before: {prevCount}&lt;/h1&gt;
      &lt;button onClick={() =&gt; setCount(count + 1)}&gt;Increment&lt;/button&gt;
    &lt;/div&gt;
  )
}

// å­˜å‚¨å›è°ƒå‡½æ•°çš„æœ€æ–°ç‰ˆæœ¬
function useEventCallback(fn) {
  const ref = useRef()
  
  useEffect(() =&gt; {
    ref.current = fn
  })

  return useCallback((...args) =&gt; {
    const f = ref.current
    return f(...args)
  }, [])
}

function Chat({ roomId }) {
  const [message, setMessage] = useState(&#39;&#39;)

  const handleSendMessage = useEventCallback(() =&gt; {
    sendMessage(roomId, message)
    setMessage(&#39;&#39;)
  })

  useEffect(() =&gt; {
    const socket = createSocket(roomId)
    
    socket.on(&#39;message&#39;, handleSendMessage)
    
    return () =&gt; socket.disconnect()
  }, [roomId, handleSendMessage])

  return (
    &lt;div&gt;
      &lt;input
        value={message}
        onChange={e =&gt; setMessage(e.target.value)}
      /&gt;
      &lt;button onClick={handleSendMessage}&gt;Send&lt;/button&gt;
    &lt;/div&gt;
  )
}

// æ»šåŠ¨åˆ°åº•éƒ¨
function ChatMessages({ messages }) {
  const messagesEndRef = useRef(null)

  const scrollToBottom = () =&gt; {
    messagesEndRef.current?.scrollIntoView({ behavior: &quot;smooth&quot; })
  }

  useEffect(() =&gt; {
    scrollToBottom()
  }, [messages])

  return (
    &lt;div className=&quot;messages-container&quot;&gt;
      {messages.map(message =&gt; (
        &lt;div key={message.id} className=&quot;message&quot;&gt;
          {message.text}
        &lt;/div&gt;
      ))}
      &lt;div ref={messagesEndRef} /&gt;
    &lt;/div&gt;
  )
}

// æµ‹é‡DOMå…ƒç´ 
function MeasureComponent() {
  const elementRef = useRef(null)
  const [dimensions, setDimensions] = useState({ width: 0, height: 0 })

  useEffect(() =&gt; {
    const measureElement = () =&gt; {
      if (elementRef.current) {
        const { offsetWidth, offsetHeight } = elementRef.current
        setDimensions({ width: offsetWidth, height: offsetHeight })
      }
    }

    measureElement()

    const resizeObserver = new ResizeObserver(measureElement)
    if (elementRef.current) {
      resizeObserver.observe(elementRef.current)
    }

    return () =&gt; resizeObserver.disconnect()
  }, [])

  return (
    &lt;div&gt;
      &lt;div ref={elementRef} style={{ resize: &#39;both&#39;, overflow: &#39;auto&#39;, border: &#39;1px solid&#39; }}&gt;
        &lt;p&gt;è°ƒæ•´æˆ‘çš„å¤§å°&lt;/p&gt;
        &lt;p&gt;Width: {dimensions.width}px&lt;/p&gt;
        &lt;p&gt;Height: {dimensions.height}px&lt;/p&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  )
}
</code></pre>
<h3>æ³¨æ„äº‹é¡¹</h3>
<ol>
<li><strong>ä¸è§¦å‘æ¸²æŸ“</strong> - ä¿®æ”¹ref.currentä¸ä¼šè§¦å‘ç»„ä»¶é‡æ–°æ¸²æŸ“</li>
<li><strong>åˆå§‹åŒ–æ—¶æœº</strong> - refåœ¨æ‰€æœ‰DOMæ›´æ–°åæ‰è¢«è®¾ç½®</li>
<li><strong>å‡½æ•°ç»„ä»¶å®ä¾‹</strong> - ä¸èƒ½ç›´æ¥ä¸ºå‡½æ•°ç»„ä»¶è®¾ç½®ref</li>
<li><strong>é¿å…è¿‡åº¦ä½¿ç”¨</strong> - ä¼˜å…ˆä½¿ç”¨å£°æ˜å¼æ–¹æ³•è€Œä¸æ˜¯å‘½ä»¤å¼</li>
</ol>
<hr>
<h2>useImperativeHandle</h2>
<p>è‡ªå®šä¹‰refæš´éœ²ç»™çˆ¶ç»„ä»¶çš„å®ä¾‹å€¼ã€‚</p>
<h3>è¯­æ³•</h3>
<pre><code class="language-typescript">useImperativeHandle&lt;T&gt;(
  ref: React.Ref&lt;T&gt;,
  createHandle: () =&gt; T,
  deps?: readonly unknown[]
): void
</code></pre>
<h3>å‚æ•°</h3>
<ul>
<li><strong>ref</strong>: <code>React.Ref&lt;T&gt;</code> - ä»çˆ¶ç»„ä»¶ä¼ å…¥çš„ref</li>
<li><strong>createHandle</strong>: <code>() =&gt; T</code> - è¿”å›è¦æš´éœ²ç»™çˆ¶ç»„ä»¶çš„å¯¹è±¡çš„å‡½æ•°  </li>
<li><strong>deps</strong>: <code>readonly unknown[]</code> (å¯é€‰) - ä¾èµ–æ•°ç»„</li>
</ul>
<h3>è¿”å›å€¼</h3>
<p>æ— è¿”å›å€¼</p>
<h3>ä½¿ç”¨è§„åˆ™</h3>
<ol>
<li>åªèƒ½åœ¨å‡½æ•°ç»„ä»¶æˆ–è‡ªå®šä¹‰Hookä¸­è°ƒç”¨</li>
<li>å¿…é¡»ä¸forwardRefä¸€èµ·ä½¿ç”¨</li>
<li>å¿…é¡»åœ¨ç»„ä»¶çš„é¡¶å±‚è°ƒç”¨</li>
</ol>
<h3>ä½¿ç”¨åœºæ™¯</h3>
<ul>
<li>æš´éœ²å­ç»„ä»¶çš„æ–¹æ³•ç»™çˆ¶ç»„ä»¶</li>
<li>é™åˆ¶æš´éœ²çš„APIè¡¨é¢</li>
<li>åˆ›å»ºå¯é‡ç”¨çš„ç»„ä»¶åº“</li>
<li>å°è£…å¤æ‚çš„DOMæ“ä½œ</li>
</ul>
<h3>ä»£ç ç¤ºä¾‹</h3>
<pre><code class="language-jsx">// åŸºç¡€ç”¨æ³• - æš´éœ²ç„¦ç‚¹æ–¹æ³•
const FancyInput = forwardRef((props, ref) =&gt; {
  const inputRef = useRef()

  useImperativeHandle(ref, () =&gt; ({
    focus: () =&gt; {
      inputRef.current.focus()
    },
    clear: () =&gt; {
      inputRef.current.value = &#39;&#39;
    },
    getValue: () =&gt; {
      return inputRef.current.value
    }
  }))

  return &lt;input ref={inputRef} {...props} /&gt;
})

function Parent() {
  const fancyInputRef = useRef()

  const handleClick = () =&gt; {
    fancyInputRef.current.focus()
  }

  const handleClear = () =&gt; {
    fancyInputRef.current.clear()
  }

  const handleGetValue = () =&gt; {
    console.log(fancyInputRef.current.getValue())
  }

  return (
    &lt;div&gt;
      &lt;FancyInput ref={fancyInputRef} /&gt;
      &lt;button onClick={handleClick}&gt;Focus&lt;/button&gt;
      &lt;button onClick={handleClear}&gt;Clear&lt;/button&gt;
      &lt;button onClick={handleGetValue}&gt;Get Value&lt;/button&gt;
    &lt;/div&gt;
  )
}

// æ¨¡æ€æ¡†ç»„ä»¶
const Modal = forwardRef(({ children }, ref) =&gt; {
  const [isOpen, setIsOpen] = useState(false)
  const modalRef = useRef()

  useImperativeHandle(ref, () =&gt; ({
    open: () =&gt; setIsOpen(true),
    close: () =&gt; setIsOpen(false),
    toggle: () =&gt; setIsOpen(prev =&gt; !prev),
    isOpen: () =&gt; isOpen,
    focusModal: () =&gt; modalRef.current?.focus()
  }))

  if (!isOpen) return null

  return (
    &lt;div className=&quot;modal-overlay&quot; onClick={() =&gt; setIsOpen(false)}&gt;
      &lt;div 
        ref={modalRef}
        className=&quot;modal-content&quot; 
        onClick={e =&gt; e.stopPropagation()}
        tabIndex={-1}
      &gt;
        {children}
        &lt;button onClick={() =&gt; setIsOpen(false)}&gt;Close&lt;/button&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  )
})

function App() {
  const modalRef = useRef()

  return (
    &lt;div&gt;
      &lt;button onClick={() =&gt; modalRef.current.open()}&gt;
        Open Modal
      &lt;/button&gt;
      
      &lt;Modal ref={modalRef}&gt;
        &lt;h2&gt;Modal Content&lt;/h2&gt;
        &lt;p&gt;This is a modal dialog.&lt;/p&gt;
      &lt;/Modal&gt;
    &lt;/div&gt;
  )
}

// è§†é¢‘æ’­æ”¾å™¨ç»„ä»¶
const VideoPlayer = forwardRef(({ src, ...props }, ref) =&gt; {
  const videoRef = useRef()
  const [isPlaying, setIsPlaying] = useState(false)
  const [currentTime, setCurrentTime] = useState(0)
  const [duration, setDuration] = useState(0)

  useImperativeHandle(ref, () =&gt; ({
    play: () =&gt; {
      videoRef.current.play()
      setIsPlaying(true)
    },
    pause: () =&gt; {
      videoRef.current.pause()
      setIsPlaying(false)
    },
    seek: (time) =&gt; {
      videoRef.current.currentTime = time
      setCurrentTime(time)
    },
    setVolume: (volume) =&gt; {
      videoRef.current.volume = Math.max(0, Math.min(1, volume))
    },
    getCurrentTime: () =&gt; currentTime,
    getDuration: () =&gt; duration,
    isPlaying: () =&gt; isPlaying
  }))

  const handleTimeUpdate = () =&gt; {
    setCurrentTime(videoRef.current.currentTime)
  }

  const handleLoadedMetadata = () =&gt; {
    setDuration(videoRef.current.duration)
  }

  const handlePlay = () =&gt; setIsPlaying(true)
  const handlePause = () =&gt; setIsPlaying(false)

  return (
    &lt;video
      ref={videoRef}
      src={src}
      onTimeUpdate={handleTimeUpdate}
      onLoadedMetadata={handleLoadedMetadata}
      onPlay={handlePlay}
      onPause={handlePause}
      {...props}
    /&gt;
  )
})

function VideoControls() {
  const playerRef = useRef()

  const handlePlayPause = () =&gt; {
    if (playerRef.current.isPlaying()) {
      playerRef.current.pause()
    } else {
      playerRef.current.play()
    }
  }

  const handleSeekForward = () =&gt; {
    const currentTime = playerRef.current.getCurrentTime()
    playerRef.current.seek(currentTime + 10)
  }

  const handleVolumeChange = (e) =&gt; {
    playerRef.current.setVolume(e.target.value / 100)
  }

  return (
    &lt;div&gt;
      &lt;VideoPlayer 
        ref={playerRef}
        src=&quot;/video.mp4&quot;
        controls={false}
      /&gt;
      
      &lt;div className=&quot;custom-controls&quot;&gt;
        &lt;button onClick={handlePlayPause}&gt;Play/Pause&lt;/button&gt;
        &lt;button onClick={handleSeekForward}&gt;+10s&lt;/button&gt;
        &lt;input 
          type=&quot;range&quot; 
          min=&quot;0&quot; 
          max=&quot;100&quot; 
          onChange={handleVolumeChange}
        /&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  )
}

// è¡¨å•ç»„ä»¶
const Form = forwardRef(({ children, onSubmit }, ref) =&gt; {
  const formRef = useRef()
  const fieldsRef = useRef({})

  useImperativeHandle(ref, () =&gt; ({
    submit: () =&gt; {
      formRef.current.requestSubmit()
    },
    reset: () =&gt; {
      formRef.current.reset()
    },
    validate: () =&gt; {
      return formRef.current.checkValidity()
    },
    getFieldValue: (name) =&gt; {
      return fieldsRef.current[name]?.value
    },
    setFieldValue: (name, value) =&gt; {
      if (fieldsRef.current[name]) {
        fieldsRef.current[name].value = value
      }
    },
    focusField: (name) =&gt; {
      fieldsRef.current[name]?.focus()
    }
  }))

  const registerField = (name, element) =&gt; {
    fieldsRef.current[name] = element
  }

  return (
    &lt;form ref={formRef} onSubmit={onSubmit}&gt;
      {React.Children.map(children, child =&gt; 
        React.cloneElement(child, { registerField })
      )}
    &lt;/form&gt;
  )
})

const FormField = ({ name, registerField, ...props }) =&gt; {
  const inputRef = useRef()

  useEffect(() =&gt; {
    if (registerField &amp;&amp; name) {
      registerField(name, inputRef.current)
    }
  }, [name, registerField])

  return &lt;input ref={inputRef} name={name} {...props} /&gt;
}

function FormExample() {
  const formRef = useRef()

  const handleSubmit = (e) =&gt; {
    e.preventDefault()
    console.log(&#39;Username:&#39;, formRef.current.getFieldValue(&#39;username&#39;))
    console.log(&#39;Email:&#39;, formRef.current.getFieldValue(&#39;email&#39;))
  }

  const handleReset = () =&gt; {
    formRef.current.reset()
  }

  const handleFocusUsername = () =&gt; {
    formRef.current.focusField(&#39;username&#39;)
  }

  return (
    &lt;div&gt;
      &lt;Form ref={formRef} onSubmit={handleSubmit}&gt;
        &lt;FormField name=&quot;username&quot; placeholder=&quot;Username&quot; required /&gt;
        &lt;FormField name=&quot;email&quot; type=&quot;email&quot; placeholder=&quot;Email&quot; required /&gt;
        &lt;button type=&quot;submit&quot;&gt;Submit&lt;/button&gt;
      &lt;/Form&gt;
      
      &lt;button onClick={handleReset}&gt;Reset Form&lt;/button&gt;
      &lt;button onClick={handleFocusUsername}&gt;Focus Username&lt;/button&gt;
    &lt;/div&gt;
  )
}
</code></pre>
<h3>æ³¨æ„äº‹é¡¹</h3>
<ol>
<li><strong>forwardRefé…åˆ</strong> - å¿…é¡»ä¸React.forwardRefä¸€èµ·ä½¿ç”¨</li>
<li><strong>é¿å…è¿‡åº¦ä½¿ç”¨</strong> - ä¼˜å…ˆä½¿ç”¨propså’Œå›è°ƒå‡½æ•°</li>
<li><strong>APIè®¾è®¡</strong> - è®¾è®¡æ¸…æ™°ã€ä¸€è‡´çš„æš´éœ²æ¥å£</li>
<li><strong>ç±»å‹å®‰å…¨</strong> - åœ¨TypeScriptä¸­æ­£ç¡®å®šä¹‰refç±»å‹</li>
</ol>
<hr>
<h2>useLayoutEffect</h2>
<p>ä¸useEffectç±»ä¼¼ï¼Œä½†å®ƒåœ¨æ‰€æœ‰DOMå˜æ›´ä¹‹ååŒæ­¥è°ƒç”¨ã€‚</p>
<h3>è¯­æ³•</h3>
<pre><code class="language-typescript">useLayoutEffect(
  effect: () =&gt; void | (() =&gt; void),
  deps?: readonly unknown[]
): void
</code></pre>
<h3>å‚æ•°</h3>
<ul>
<li><strong>effect</strong>: <code>() =&gt; void | (() =&gt; void)</code> - å‰¯ä½œç”¨å‡½æ•°</li>
<li><strong>deps</strong>: <code>readonly unknown[]</code> (å¯é€‰) - ä¾èµ–æ•°ç»„</li>
</ul>
<h3>è¿”å›å€¼</h3>
<p>æ— è¿”å›å€¼</p>
<h3>ä½¿ç”¨è§„åˆ™</h3>
<ol>
<li>åªèƒ½åœ¨å‡½æ•°ç»„ä»¶æˆ–è‡ªå®šä¹‰Hookä¸­è°ƒç”¨</li>
<li>å¿…é¡»åœ¨ç»„ä»¶çš„é¡¶å±‚è°ƒç”¨</li>
<li>åœ¨æµè§ˆå™¨æ‰§è¡Œç»˜åˆ¶ä¹‹å‰åŒæ­¥è¿è¡Œ</li>
</ol>
<h3>ä½¿ç”¨åœºæ™¯</h3>
<ul>
<li>éœ€è¦åŒæ­¥è¯»å–DOMå¹¶è¿›è¡Œä¿®æ”¹</li>
<li>é¿å…è§†è§‰é—ªçƒ</li>
<li>æµ‹é‡DOMå…ƒç´ å°ºå¯¸</li>
<li>éœ€è¦åœ¨æµè§ˆå™¨ç»˜åˆ¶å‰å®Œæˆçš„æ“ä½œ</li>
</ul>
<h3>ä»£ç ç¤ºä¾‹</h3>
<pre><code class="language-jsx">// é¿å…é—ªçƒçš„å·¥å…·æç¤ºå®šä½
function Tooltip({ children, content, isVisible }) {
  const tooltipRef = useRef()
  const triggerRef = useRef()

  useLayoutEffect(() =&gt; {
    if (isVisible &amp;&amp; tooltipRef.current &amp;&amp; triggerRef.current) {
      const triggerRect = triggerRef.current.getBoundingClientRect()
      const tooltipRect = tooltipRef.current.getBoundingClientRect()
      
      // è®¡ç®—æœ€ä½³ä½ç½®
      let top = triggerRect.top - tooltipRect.height - 8
      let left = triggerRect.left + (triggerRect.width - tooltipRect.width) / 2

      // è¾¹ç•Œæ£€æŸ¥
      if (top &lt; 0) {
        top = triggerRect.bottom + 8
      }
      
      if (left &lt; 0) {
        left = 8
      } else if (left + tooltipRect.width &gt; window.innerWidth) {
        left = window.innerWidth - tooltipRect.width - 8
      }

      tooltipRef.current.style.top = `${top}px`
      tooltipRef.current.style.left = `${left}px`
    }
  }, [isVisible])

  return (
    &lt;div className=&quot;tooltip-container&quot;&gt;
      &lt;div ref={triggerRef}&gt;
        {children}
      &lt;/div&gt;
      
      {isVisible &amp;&amp; (
        &lt;div 
          ref={tooltipRef}
          className=&quot;tooltip&quot;
          style={{ position: &#39;fixed&#39;, visibility: &#39;hidden&#39; }}
        &gt;
          {content}
        &lt;/div&gt;
      )}
    &lt;/div&gt;
  )
}

// æµ‹é‡å…ƒç´ å°ºå¯¸
function ResizableBox({ children }) {
  const boxRef = useRef()
  const [dimensions, setDimensions] = useState({ width: 0, height: 0 })

  useLayoutEffect(() =&gt; {
    const measureBox = () =&gt; {
      if (boxRef.current) {
        const { offsetWidth, offsetHeight } = boxRef.current
        setDimensions({ width: offsetWidth, height: offsetHeight })
      }
    }

    measureBox()

    // ç›‘å¬å°ºå¯¸å˜åŒ–
    const resizeObserver = new ResizeObserver(measureBox)
    if (boxRef.current) {
      resizeObserver.observe(boxRef.current)
    }

    return () =&gt; resizeObserver.disconnect()
  }, [])

  return (
    &lt;div ref={boxRef} className=&quot;resizable-box&quot;&gt;
      &lt;div className=&quot;dimensions-display&quot;&gt;
        {dimensions.width} Ã— {dimensions.height}
      &lt;/div&gt;
      {children}
    &lt;/div&gt;
  )
}

// æ»šåŠ¨ä½ç½®åŒæ­¥
function ScrollSyncPane({ children, scrollTop, onScroll }) {
  const paneRef = useRef()

  useLayoutEffect(() =&gt; {
    if (paneRef.current &amp;&amp; paneRef.current.scrollTop !== scrollTop) {
      paneRef.current.scrollTop = scrollTop
    }
  }, [scrollTop])

  const handleScroll = (e) =&gt; {
    onScroll(e.target.scrollTop)
  }

  return (
    &lt;div 
      ref={paneRef}
      className=&quot;scroll-pane&quot;
      onScroll={handleScroll}
    &gt;
      {children}
    &lt;/div&gt;
  )
}

function ScrollSyncExample() {
  const [scrollTop, setScrollTop] = useState(0)

  return (
    &lt;div style={{ display: &#39;flex&#39; }}&gt;
      &lt;ScrollSyncPane scrollTop={scrollTop} onScroll={setScrollTop}&gt;
        &lt;div style={{ height: &#39;1000px&#39; }}&gt;
          Left Pane Content
        &lt;/div&gt;
      &lt;/ScrollSyncPane&gt;
      
      &lt;ScrollSyncPane scrollTop={scrollTop} onScroll={setScrollTop}&gt;
        &lt;div style={{ height: &#39;1000px&#39; }}&gt;
          Right Pane Content
        &lt;/div&gt;
      &lt;/ScrollSyncPane&gt;
    &lt;/div&gt;
  )
}

// åŠ¨ç”»åŒæ­¥
function AnimatedHeight({ isExpanded, children }) {
  const contentRef = useRef()
  const [height, setHeight] = useState(0)

  useLayoutEffect(() =&gt; {
    if (contentRef.current) {
      const contentHeight = contentRef.current.scrollHeight
      setHeight(isExpanded ? contentHeight : 0)
    }
  }, [isExpanded, children])

  return (
    &lt;div 
      style={{ 
        height: height,
        overflow: &#39;hidden&#39;,
        transition: &#39;height 0.3s ease&#39;
      }}
    &gt;
      &lt;div ref={contentRef}&gt;
        {children}
      &lt;/div&gt;
    &lt;/div&gt;
  )
}

// DOMæ“ä½œé¿å…é—ªçƒ
function ThemeToggle() {
  const [theme, setTheme] = useState(&#39;light&#39;)

  useLayoutEffect(() =&gt; {
    // åœ¨ç»˜åˆ¶å‰åº”ç”¨ä¸»é¢˜ï¼Œé¿å…é—ªçƒ
    document.documentElement.setAttribute(&#39;data-theme&#39;, theme)
    
    // ä¹Ÿå¯ä»¥ç›´æ¥ä¿®æ”¹æ ·å¼
    document.body.className = `theme-${theme}`
  }, [theme])

  return (
    &lt;button onClick={() =&gt; setTheme(theme === &#39;light&#39; ? &#39;dark&#39; : &#39;light&#39;)}&gt;
      Switch to {theme === &#39;light&#39; ? &#39;dark&#39; : &#39;light&#39;} theme
    &lt;/button&gt;
  )
}

// è‡ªå®šä¹‰Hook - æµ‹é‡å…ƒç´ 
function useElementSize() {
  const ref = useRef()
  const [size, setSize] = useState({ width: 0, height: 0 })

  useLayoutEffect(() =&gt; {
    const measureElement = () =&gt; {
      if (ref.current) {
        const { offsetWidth, offsetHeight } = ref.current
        setSize({ width: offsetWidth, height: offsetHeight })
      }
    }

    measureElement()

    const resizeObserver = new ResizeObserver(measureElement)
    if (ref.current) {
      resizeObserver.observe(ref.current)
    }

    return () =&gt; resizeObserver.disconnect()
  }, [])

  return [ref, size]
}

function ComponentWithSize() {
  const [ref, size] = useElementSize()

  return (
    &lt;div ref={ref} style={{ resize: &#39;both&#39;, overflow: &#39;auto&#39;, border: &#39;1px solid&#39; }}&gt;
      &lt;p&gt;Width: {size.width}px&lt;/p&gt;
      &lt;p&gt;Height: {size.height}px&lt;/p&gt;
      &lt;p&gt;è°ƒæ•´æˆ‘çš„å¤§å°&lt;/p&gt;
    &lt;/div&gt;
  )
}
</code></pre>
<h3>æ³¨æ„äº‹é¡¹</h3>
<ol>
<li><strong>æ€§èƒ½å½±å“</strong> - åŒæ­¥æ‰§è¡Œï¼Œå¯èƒ½é˜»å¡æµè§ˆå™¨ç»˜åˆ¶</li>
<li><strong>ä½¿ç”¨æ—¶æœº</strong> - åªåœ¨çœŸæ­£éœ€è¦åŒæ­¥DOMæ“ä½œæ—¶ä½¿ç”¨</li>
<li><strong>æœåŠ¡ç«¯æ¸²æŸ“</strong> - åœ¨SSRä¸­å¯èƒ½å¯¼è‡´è­¦å‘Š</li>
<li><strong>ä¸useEffectåŒºåˆ«</strong> - useLayoutEffectåœ¨DOMå˜æ›´åã€ç»˜åˆ¶å‰æ‰§è¡Œ</li>
</ol>
<hr>
<h2>useDebugValue</h2>
<p>åœ¨Reactå¼€å‘è€…å·¥å…·ä¸­æ˜¾ç¤ºè‡ªå®šä¹‰Hookçš„æ ‡ç­¾ã€‚</p>
<h3>è¯­æ³•</h3>
<pre><code class="language-typescript">useDebugValue&lt;T&gt;(
  value: T,
  format?: (value: T) =&gt; any
): void
</code></pre>
<h3>å‚æ•°</h3>
<ul>
<li><strong>value</strong>: <code>T</code> - è¦æ˜¾ç¤ºçš„è°ƒè¯•å€¼</li>
<li><strong>format</strong>: <code>(value: T) =&gt; any</code> (å¯é€‰) - æ ¼å¼åŒ–å‡½æ•°ï¼Œåªåœ¨DevToolsæ‰“å¼€æ—¶è°ƒç”¨</li>
</ul>
<h3>è¿”å›å€¼</h3>
<p>æ— è¿”å›å€¼</p>
<h3>ä½¿ç”¨è§„åˆ™</h3>
<ol>
<li>åªèƒ½åœ¨è‡ªå®šä¹‰Hookä¸­è°ƒç”¨</li>
<li>ä¸è¦åœ¨æ™®é€šç»„ä»¶ä¸­ä½¿ç”¨</li>
<li>åªåœ¨React DevToolsä¸­å¯è§</li>
</ol>
<h3>ä½¿ç”¨åœºæ™¯</h3>
<ul>
<li>è°ƒè¯•è‡ªå®šä¹‰Hook</li>
<li>æ˜¾ç¤ºHookçš„å†…éƒ¨çŠ¶æ€</li>
<li>æä¾›æœ‰ç”¨çš„è°ƒè¯•ä¿¡æ¯</li>
<li>å¼€å‘ç»„ä»¶åº“æ—¶æä¾›æ›´å¥½çš„å¼€å‘ä½“éªŒ</li>
</ul>
<h3>ä»£ç ç¤ºä¾‹</h3>
<pre><code class="language-jsx">// åŸºç¡€ç”¨æ³•
function useCounter(initialValue = 0) {
  const [count, setCount] = useState(initialValue)

  // åœ¨DevToolsä¸­æ˜¾ç¤ºå½“å‰è®¡æ•°
  useDebugValue(count)

  const increment = useCallback(() =&gt; setCount(c =&gt; c + 1), [])
  const decrement = useCallback(() =&gt; setCount(c =&gt; c - 1), [])
  const reset = useCallback(() =&gt; setCount(initialValue), [initialValue])

  return { count, increment, decrement, reset }
}

// æ ¼å¼åŒ–æ˜¾ç¤º
function useToggle(initialValue = false) {
  const [value, setValue] = useState(initialValue)

  // ä½¿ç”¨æ ¼å¼åŒ–å‡½æ•°æä¾›æ›´å‹å¥½çš„æ˜¾ç¤º
  useDebugValue(value, value =&gt; value ? &#39;ON&#39; : &#39;OFF&#39;)

  const toggle = useCallback(() =&gt; setValue(v =&gt; !v), [])
  const setTrue = useCallback(() =&gt; setValue(true), [])
  const setFalse = useCallback(() =&gt; setValue(false), [])

  return { value, toggle, setTrue, setFalse }
}

// å¤æ‚çŠ¶æ€çš„è°ƒè¯•
function useForm(initialValues = {}) {
  const [values, setValues] = useState(initialValues)
  const [errors, setErrors] = useState({})
  const [touched, setTouched] = useState({})

  // æ˜¾ç¤ºè¡¨å•çŠ¶æ€æ¦‚è§ˆ
  useDebugValue(
    { values, errors, touched },
    ({ values, errors, touched }) =&gt; {
      const fieldCount = Object.keys(values).length
      const errorCount = Object.keys(errors).length
      const touchedCount = Object.keys(touched).length
      
      return `${fieldCount} fields, ${errorCount} errors, ${touchedCount} touched`
    }
  )

  const setValue = useCallback((name, value) =&gt; {
    setValues(prev =&gt; ({ ...prev, [name]: value }))
  }, [])

  const setError = useCallback((name, error) =&gt; {
    setErrors(prev =&gt; ({ ...prev, [name]: error }))
  }, [])

  const setTouched = useCallback((name) =&gt; {
    setTouched(prev =&gt; ({ ...prev, [name]: true }))
  }, [])

  return {
    values,
    errors,
    touched,
    setValue,
    setError,
    setTouched
  }
}

// APIçŠ¶æ€è°ƒè¯•
function useApi(url) {
  const [data, setData] = useState(null)
  const [loading, setLoading] = useState(false)
  const [error, setError] = useState(null)

  // æ˜¾ç¤ºAPIçŠ¶æ€
  useDebugValue(
    { url, loading, error: !!error },
    ({ url, loading, error }) =&gt; {
      if (loading) return `Loading: ${url}`
      if (error) return `Error: ${url}`
      return `Success: ${url}`
    }
  )

  const fetchData = useCallback(async () =&gt; {
    setLoading(true)
    setError(null)
    
    try {
      const response = await fetch(url)
      if (!response.ok) {
        throw new Error(`HTTP ${response.status}`)
      }
      const result = await response.json()
      setData(result)
    } catch (err) {
      setError(err.message)
    } finally {
      setLoading(false)
    }
  }, [url])

  useEffect(() =&gt; {
    fetchData()
  }, [fetchData])

  return { data, loading, error, refetch: fetchData }
}

// æœ¬åœ°å­˜å‚¨Hookè°ƒè¯•
function useLocalStorage(key, initialValue) {
  const [storedValue, setStoredValue] = useState(() =&gt; {
    try {
      const item = window.localStorage.getItem(key)
      return item ? JSON.parse(item) : initialValue
    } catch (error) {
      console.log(error)
      return initialValue
    }
  })

  // æ˜¾ç¤ºå­˜å‚¨é”®å’Œå€¼çš„æ¦‚è¿°
  useDebugValue(
    { key, value: storedValue },
    ({ key, value }) =&gt; `${key}: ${JSON.stringify(value).slice(0, 50)}...`
  )

  const setValue = useCallback((value) =&gt; {
    try {
      setStoredValue(value)
      window.localStorage.setItem(key, JSON.stringify(value))
    } catch (error) {
      console.log(error)
    }
  }, [key])

  return [storedValue, setValue]
}

// å®šæ—¶å™¨Hookè°ƒè¯•
function useInterval(callback, delay) {
  const savedCallback = useRef()
  const [isRunning, setIsRunning] = useState(delay !== null)

  // æ˜¾ç¤ºå®šæ—¶å™¨çŠ¶æ€
  useDebugValue(
    { delay, isRunning },
    ({ delay, isRunning }) =&gt; 
      isRunning ? `Running every ${delay}ms` : &#39;Stopped&#39;
  )

  useEffect(() =&gt; {
    savedCallback.current = callback
  }, [callback])

  useEffect(() =&gt; {
    function tick() {
      savedCallback.current()
    }

    if (delay !== null) {
      const id = setInterval(tick, delay)
      return () =&gt; clearInterval(id)
    }
  }, [delay])

  return { isRunning, start: () =&gt; setIsRunning(true), stop: () =&gt; setIsRunning(false) }
}

// ç½‘ç»œçŠ¶æ€Hookè°ƒè¯•
function useOnlineStatus() {
  const [isOnline, setIsOnline] = useState(navigator.onLine)

  // ç®€å•çš„åœ¨çº¿çŠ¶æ€æ˜¾ç¤º
  useDebugValue(isOnline ? &#39;Online&#39; : &#39;Offline&#39;)

  useEffect(() =&gt; {
    const handleOnline = () =&gt; setIsOnline(true)
    const handleOffline = () =&gt; setIsOnline(false)

    window.addEventListener(&#39;online&#39;, handleOnline)
    window.addEventListener(&#39;offline&#39;, handleOffline)

    return () =&gt; {
      window.removeEventListener(&#39;online&#39;, handleOnline)
      window.removeEventListener(&#39;offline&#39;, handleOffline)
    }
  }, [])

  return isOnline
}

// ä½¿ç”¨ç¤ºä¾‹
function App() {
  const { count, increment } = useCounter(0)
  const { value: isVisible, toggle } = useToggle(false)
  const { data, loading } = useApi(&#39;/api/users&#39;)
  const [settings, setSettings] = useLocalStorage(&#39;settings&#39;, {})
  const isOnline = useOnlineStatus()

  return (
    &lt;div&gt;
      &lt;div&gt;Count: {count}&lt;/div&gt;
      &lt;button onClick={increment}&gt;Increment&lt;/button&gt;
      
      &lt;div&gt;Visible: {isVisible ? &#39;Yes&#39; : &#39;No&#39;}&lt;/div&gt;
      &lt;button onClick={toggle}&gt;Toggle&lt;/button&gt;
      
      &lt;div&gt;Online: {isOnline ? &#39;Yes&#39; : &#39;No&#39;}&lt;/div&gt;
      
      {loading ? &lt;div&gt;Loading...&lt;/div&gt; : &lt;div&gt;Data loaded&lt;/div&gt;}
    &lt;/div&gt;
  )
}
</code></pre>
<h3>æ³¨æ„äº‹é¡¹</h3>
<ol>
<li><strong>ä»…å¼€å‘æ¨¡å¼</strong> - åªåœ¨å¼€å‘ç¯å¢ƒå’ŒReact DevToolsä¸­æ˜¾ç¤º</li>
<li><strong>æ ¼å¼åŒ–æ€§èƒ½</strong> - æ ¼å¼åŒ–å‡½æ•°åªåœ¨DevToolsæ‰“å¼€æ—¶è°ƒç”¨</li>
<li><strong>ä¸è¦è¿‡åº¦ä½¿ç”¨</strong> - åªåœ¨çœŸæ­£éœ€è¦è°ƒè¯•ä¿¡æ¯æ—¶ä½¿ç”¨</li>
<li><strong>è‡ªå®šä¹‰Hookä¸“ç”¨</strong> - ä¸è¦åœ¨æ™®é€šç»„ä»¶ä¸­ä½¿ç”¨</li>
</ol>
<hr>
<h2>useId</h2>
<p>ç”Ÿæˆç¨³å®šçš„å”¯ä¸€IDï¼Œç”¨äºå¯è®¿é—®æ€§å±æ€§ã€‚</p>
<h3>è¯­æ³•</h3>
<pre><code class="language-typescript">const id = useId(): string
</code></pre>
<h3>å‚æ•°</h3>
<p>æ— å‚æ•°</p>
<h3>è¿”å›å€¼</h3>
<ul>
<li><strong>id</strong>: <code>string</code> - å”¯ä¸€çš„å­—ç¬¦ä¸²ID</li>
</ul>
<h3>ä½¿ç”¨è§„åˆ™</h3>
<ol>
<li>åªèƒ½åœ¨å‡½æ•°ç»„ä»¶æˆ–è‡ªå®šä¹‰Hookä¸­è°ƒç”¨</li>
<li>å¿…é¡»åœ¨ç»„ä»¶çš„é¡¶å±‚è°ƒç”¨</li>
<li>ç”Ÿæˆçš„IDåœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¿æŒä¸€è‡´</li>
</ol>
<h3>ä½¿ç”¨åœºæ™¯</h3>
<ul>
<li>è¡¨å•æ ‡ç­¾ä¸è¾“å…¥æ¡†çš„å…³è”</li>
<li>ARIAå±æ€§çš„IDå¼•ç”¨</li>
<li>é¿å…å¤šä¸ªç»„ä»¶å®ä¾‹çš„IDå†²çª</li>
<li>æœåŠ¡ç«¯æ¸²æŸ“çš„IDä¸€è‡´æ€§</li>
</ul>
<h3>ä»£ç ç¤ºä¾‹</h3>
<pre><code class="language-jsx">// åŸºç¡€ç”¨æ³• - è¡¨å•æ ‡ç­¾å…³è”
function FormField({ label, type = &#39;text&#39;, ...props }) {
  const id = useId()

  return (
    &lt;div&gt;
      &lt;label htmlFor={id}&gt;{label}&lt;/label&gt;
      &lt;input id={id} type={type} {...props} /&gt;
    &lt;/div&gt;
  )
}

// å¤æ‚è¡¨å•
function ContactForm() {
  return (
    &lt;form&gt;
      &lt;FormField label=&quot;å§“å&quot; name=&quot;name&quot; required /&gt;
      &lt;FormField label=&quot;é‚®ç®±&quot; type=&quot;email&quot; name=&quot;email&quot; required /&gt;
      &lt;FormField label=&quot;ç”µè¯&quot; type=&quot;tel&quot; name=&quot;phone&quot; /&gt;
    &lt;/form&gt;
  )
}

// ARIAå±æ€§å…³è”
function ExpandableSection({ title, children }) {
  const titleId = useId()
  const contentId = useId()
  const [isExpanded, setIsExpanded] = useState(false)

  return (
    &lt;div&gt;
      &lt;button
        id={titleId}
        aria-expanded={isExpanded}
        aria-controls={contentId}
        onClick={() =&gt; setIsExpanded(!isExpanded)}
      &gt;
        {title}
      &lt;/button&gt;
      
      &lt;div
        id={contentId}
        role=&quot;region&quot;
        aria-labelledby={titleId}
        hidden={!isExpanded}
      &gt;
        {children}
      &lt;/div&gt;
    &lt;/div&gt;
  )
}

// å¤šä¸ªIDçš„åœºæ™¯
function SearchableSelect({ options, placeholder }) {
  const baseId = useId()
  const inputId = `${baseId}-input`
  const listboxId = `${baseId}-listbox`
  const optionIdPrefix = `${baseId}-option`
  
  const [query, setQuery] = useState(&#39;&#39;)
  const [isOpen, setIsOpen] = useState(false)
  const [selectedIndex, setSelectedIndex] = useState(-1)

  const filteredOptions = options.filter(option =&gt;
    option.label.toLowerCase().includes(query.toLowerCase())
  )

  return (
    &lt;div className=&quot;search-select&quot;&gt;
      &lt;input
        id={inputId}
        type=&quot;text&quot;
        value={query}
        onChange={(e) =&gt; setQuery(e.target.value)}
        onFocus={() =&gt; setIsOpen(true)}
        placeholder={placeholder}
        role=&quot;combobox&quot;
        aria-expanded={isOpen}
        aria-controls={listboxId}
        aria-activedescendant={
          selectedIndex &gt;= 0 ? `${optionIdPrefix}-${selectedIndex}` : undefined
        }
      /&gt;
      
      {isOpen &amp;&amp; (
        &lt;ul
          id={listboxId}
          role=&quot;listbox&quot;
          aria-labelledby={inputId}
        &gt;
          {filteredOptions.map((option, index) =&gt; (
            &lt;li
              key={option.value}
              id={`${optionIdPrefix}-${index}`}
              role=&quot;option&quot;
              aria-selected={index === selectedIndex}
              onClick={() =&gt; {
                setQuery(option.label)
                setIsOpen(false)
              }}
            &gt;
              {option.label}
            &lt;/li&gt;
          ))}
        &lt;/ul&gt;
      )}
    &lt;/div&gt;
  )
}

// è‡ªå®šä¹‰Hookä¸­ä½¿ç”¨
function useFormField(name, validation) {
  const id = useId()
  const errorId = `${id}-error`
  const descriptionId = `${id}-description`
  
  const [value, setValue] = useState(&#39;&#39;)
  const [error, setError] = useState(&#39;&#39;)
  const [touched, setTouched] = useState(false)

  const validate = useCallback(() =&gt; {
    if (validation) {
      const result = validation(value)
      setError(result || &#39;&#39;)
      return !result
    }
    return true
  }, [value, validation])

  return {
    field: {
      id,
      name,
      value,
      onChange: (e) =&gt; setValue(e.target.value),
      onBlur: () =&gt; {
        setTouched(true)
        validate()
      },
      &#39;aria-describedby&#39;: error ? errorId : undefined,
      &#39;aria-invalid&#39;: touched &amp;&amp; !!error
    },
    error: {
      id: errorId,
      message: error,
      show: touched &amp;&amp; !!error
    },
    description: {
      id: descriptionId
    },
    isValid: !error,
    validate
  }
}

function AdvancedForm() {
  const nameField = useFormField(&#39;name&#39;, (value) =&gt; 
    value.length &lt; 2 ? &#39;å§“åè‡³å°‘éœ€è¦2ä¸ªå­—ç¬¦&#39; : null
  )
  
  const emailField = useFormField(&#39;email&#39;, (value) =&gt; 
    !/\S+@\S+\.\S+/.test(value) ? &#39;è¯·è¾“å…¥æœ‰æ•ˆçš„é‚®ç®±åœ°å€&#39; : null
  )

  const handleSubmit = (e) =&gt; {
    e.preventDefault()
    
    const isNameValid = nameField.validate()
    const isEmailValid = emailField.validate()
    
    if (isNameValid &amp;&amp; isEmailValid) {
      console.log(&#39;Form submitted&#39;, {
        name: nameField.field.value,
        email: emailField.field.value
      })
    }
  }

  return (
    &lt;form onSubmit={handleSubmit}&gt;
      &lt;div&gt;
        &lt;label htmlFor={nameField.field.id}&gt;å§“å&lt;/label&gt;
        &lt;input {...nameField.field} type=&quot;text&quot; /&gt;
        {nameField.error.show &amp;&amp; (
          &lt;div id={nameField.error.id} role=&quot;alert&quot;&gt;
            {nameField.error.message}
          &lt;/div&gt;
        )}
      &lt;/div&gt;

      &lt;div&gt;
        &lt;label htmlFor={emailField.field.id}&gt;é‚®ç®±&lt;/label&gt;
        &lt;input {...emailField.field} type=&quot;email&quot; /&gt;
        {emailField.error.show &amp;&amp; (
          &lt;div id={emailField.error.id} role=&quot;alert&quot;&gt;
            {emailField.error.message}
          &lt;/div&gt;
        )}
      &lt;/div&gt;

      &lt;button type=&quot;submit&quot;&gt;æäº¤&lt;/button&gt;
    &lt;/form&gt;
  )
}

// ç»„ä»¶åˆ—è¡¨ä¸­çš„å”¯ä¸€ID
function TodoList({ todos }) {
  return (
    &lt;ul&gt;
      {todos.map((todo) =&gt; (
        &lt;TodoItem key={todo.id} todo={todo} /&gt;
      ))}
    &lt;/ul&gt;
  )
}

function TodoItem({ todo }) {
  const checkboxId = useId()
  const descriptionId = useId()
  
  return (
    &lt;li&gt;
      &lt;input
        id={checkboxId}
        type=&quot;checkbox&quot;
        checked={todo.completed}
        aria-describedby={descriptionId}
      /&gt;
      &lt;label htmlFor={checkboxId}&gt;
        {todo.title}
      &lt;/label&gt;
      {todo.description &amp;&amp; (
        &lt;p id={descriptionId} className=&quot;todo-description&quot;&gt;
          {todo.description}
        &lt;/p&gt;
      )}
    &lt;/li&gt;
  )
}
</code></pre>
<h3>æ³¨æ„äº‹é¡¹</h3>
<ol>
<li><strong>æœåŠ¡ç«¯æ¸²æŸ“</strong> - ç¡®ä¿å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ç”Ÿæˆç›¸åŒçš„ID</li>
<li><strong>ä¸è¦ç”¨ä½œkey</strong> - useIdä¸é€‚åˆä½œä¸ºåˆ—è¡¨çš„keyå±æ€§</li>
<li><strong>å‰ç¼€ä½¿ç”¨</strong> - å¯ä»¥æ·»åŠ å‰ç¼€åˆ›å»ºç›¸å…³çš„å¤šä¸ªID</li>
<li><strong>é¿å…æ¡ä»¶è°ƒç”¨</strong> - ä¸è¦åœ¨æ¡ä»¶è¯­å¥ä¸­è°ƒç”¨useId</li>
</ol>
<hr>
<h2>useTransition</h2>
<p>æ ‡è®°çŠ¶æ€æ›´æ–°ä¸ºè¿‡æ¸¡çŠ¶æ€ï¼Œå…è®¸å…¶ä»–æ›´æ–°æ‰“æ–­å®ƒä»¬ã€‚</p>
<h3>è¯­æ³•</h3>
<pre><code class="language-typescript">const [isPending, startTransition] = useTransition(): [boolean, (callback: () =&gt; void) =&gt; void]
</code></pre>
<h3>å‚æ•°</h3>
<p>æ— å‚æ•°</p>
<h3>è¿”å›å€¼</h3>
<p>è¿”å›åŒ…å«ä¸¤ä¸ªå…ƒç´ çš„æ•°ç»„ï¼š</p>
<ul>
<li><strong>isPending</strong>: <code>boolean</code> - è¡¨ç¤ºæ˜¯å¦æœ‰å¾…å¤„ç†çš„è¿‡æ¸¡</li>
<li><strong>startTransition</strong>: <code>(callback: () =&gt; void) =&gt; void</code> - å¯åŠ¨è¿‡æ¸¡çš„å‡½æ•°</li>
</ul>
<h3>ä½¿ç”¨è§„åˆ™</h3>
<ol>
<li>åªèƒ½åœ¨å‡½æ•°ç»„ä»¶æˆ–è‡ªå®šä¹‰Hookä¸­è°ƒç”¨</li>
<li>å¿…é¡»åœ¨ç»„ä»¶çš„é¡¶å±‚è°ƒç”¨</li>
<li>è¿‡æ¸¡æ›´æ–°å¯ä»¥è¢«ç´§æ€¥æ›´æ–°æ‰“æ–­</li>
</ol>
<h3>ä½¿ç”¨åœºæ™¯</h3>
<ul>
<li>å¤§åˆ—è¡¨çš„ç­›é€‰å’Œæ’åº</li>
<li>å¤æ‚è®¡ç®—ç»“æœçš„å±•ç¤º</li>
<li>è·¯ç”±åˆ‡æ¢çš„ä¼˜åŒ–</li>
<li>æå‡ç”¨æˆ·äº¤äº’çš„å“åº”æ€§</li>
</ul>
<h3>ä»£ç ç¤ºä¾‹</h3>
<pre><code class="language-jsx">// å¤§åˆ—è¡¨æœç´¢ä¼˜åŒ–
function ProductList({ products }) {
  const [query, setQuery] = useState(&#39;&#39;)
  const [filteredProducts, setFilteredProducts] = useState(products)
  const [isPending, startTransition] = useTransition()

  const handleSearch = (newQuery) =&gt; {
    // ç«‹å³æ›´æ–°è¾“å…¥æ¡†ï¼ˆç´§æ€¥æ›´æ–°ï¼‰
    setQuery(newQuery)
    
    // å»¶è¿Ÿæ›´æ–°æœç´¢ç»“æœï¼ˆè¿‡æ¸¡æ›´æ–°ï¼‰
    startTransition(() =&gt; {
      const filtered = products.filter(product =&gt;
        product.name.toLowerCase().includes(newQuery.toLowerCase()) ||
        product.description.toLowerCase().includes(newQuery.toLowerCase())
      )
      setFilteredProducts(filtered)
    })
  }

  return (
    &lt;div&gt;
      &lt;input
        type=&quot;text&quot;
        value={query}
        onChange={(e) =&gt; handleSearch(e.target.value)}
        placeholder=&quot;æœç´¢äº§å“...&quot;
      /&gt;
      
      {isPending &amp;&amp; &lt;div&gt;æœç´¢ä¸­...&lt;/div&gt;}
      
      &lt;div className={isPending ? &#39;opacity-50&#39; : &#39;&#39;}&gt;
        {filteredProducts.map(product =&gt; (
          &lt;ProductCard key={product.id} product={product} /&gt;
        ))}
      &lt;/div&gt;
    &lt;/div&gt;
  )
}

// æ ‡ç­¾é¡µåˆ‡æ¢ä¼˜åŒ–
function TabContainer() {
  const [activeTab, setActiveTab] = useState(&#39;posts&#39;)
  const [isPending, startTransition] = useTransition()

  const handleTabChange = (tab) =&gt; {
    startTransition(() =&gt; {
      setActiveTab(tab)
    })
  }

  return (
    &lt;div&gt;
      &lt;div className=&quot;tab-buttons&quot;&gt;
        &lt;button
          onClick={() =&gt; handleTabChange(&#39;posts&#39;)}
          className={activeTab === &#39;posts&#39; ? &#39;active&#39; : &#39;&#39;}
        &gt;
          æ–‡ç«  {isPending &amp;&amp; activeTab === &#39;posts&#39; &amp;&amp; &#39;...&#39;}
        &lt;/button&gt;
        
        &lt;button
          onClick={() =&gt; handleTabChange(&#39;contact&#39;)}
          className={activeTab === &#39;contact&#39; ? &#39;active&#39; : &#39;&#39;}
        &gt;
          è”ç³»æ–¹å¼ {isPending &amp;&amp; activeTab === &#39;contact&#39; &amp;&amp; &#39;...&#39;}
        &lt;/button&gt;
        
        &lt;button
          onClick={() =&gt; handleTabChange(&#39;about&#39;)}
          className={activeTab === &#39;about&#39; ? &#39;active&#39; : &#39;&#39;}
        &gt;
          å…³äºæˆ‘ä»¬ {isPending &amp;&amp; activeTab === &#39;about&#39; &amp;&amp; &#39;...&#39;}
        &lt;/button&gt;
      &lt;/div&gt;

      &lt;div className={`tab-content ${isPending ? &#39;loading&#39; : &#39;&#39;}`}&gt;
        {activeTab === &#39;posts&#39; &amp;&amp; &lt;PostsTab /&gt;}
        {activeTab === &#39;contact&#39; &amp;&amp; &lt;ContactTab /&gt;}
        {activeTab === &#39;about&#39; &amp;&amp; &lt;AboutTab /&gt;}
      &lt;/div&gt;
    &lt;/div&gt;
  )
}

// å¤æ‚è®¡ç®—çš„ä¼˜åŒ–
function DataVisualization({ rawData }) {
  const [chartType, setChartType] = useState(&#39;bar&#39;)
  const [processedData, setProcessedData] = useState(null)
  const [isPending, startTransition] = useTransition()

  const processData = (type, data) =&gt; {
    // æ¨¡æ‹Ÿå¤æ‚çš„æ•°æ®å¤„ç†
    const processed = data.map(item =&gt; ({
      ...item,
      processed: true,
      chartType: type,
      // å¤æ‚è®¡ç®—...
      value: item.value * (type === &#39;pie&#39; ? 1.2 : 1)
    }))
    
    return processed
  }

  const handleChartTypeChange = (type) =&gt; {
    setChartType(type)
    
    startTransition(() =&gt; {
      const processed = processData(type, rawData)
      setProcessedData(processed)
    })
  }

  return (
    &lt;div&gt;
      &lt;div className=&quot;chart-controls&quot;&gt;
        &lt;button onClick={() =&gt; handleChartTypeChange(&#39;bar&#39;)}&gt;
          æŸ±çŠ¶å›¾
        &lt;/button&gt;
        &lt;button onClick={() =&gt; handleChartTypeChange(&#39;line&#39;)}&gt;
          æŠ˜çº¿å›¾
        &lt;/button&gt;
        &lt;button onClick={() =&gt; handleChartTypeChange(&#39;pie&#39;)}&gt;
          é¥¼å›¾
        &lt;/button&gt;
      &lt;/div&gt;

      {isPending ? (
        &lt;div&gt;æ•°æ®å¤„ç†ä¸­...&lt;/div&gt;
      ) : (
        &lt;Chart type={chartType} data={processedData} /&gt;
      )}
    &lt;/div&gt;
  )
}

// è¡¨å•éªŒè¯ä¼˜åŒ–
function AdvancedSignupForm() {
  const [formData, setFormData] = useState({
    username: &#39;&#39;,
    email: &#39;&#39;,
    password: &#39;&#39;
  })
  const [validationResults, setValidationResults] = useState({})
  const [isPending, startTransition] = useTransition()

  const validateField = async (name, value) =&gt; {
    // æ¨¡æ‹Ÿå¼‚æ­¥éªŒè¯
    await new Promise(resolve =&gt; setTimeout(resolve, 300))
    
    const validations = {
      username: (val) =&gt; val.length &lt; 3 ? &#39;ç”¨æˆ·åè‡³å°‘3ä¸ªå­—ç¬¦&#39; : null,
      email: (val) =&gt; !/\S+@\S+\.\S+/.test(val) ? &#39;é‚®ç®±æ ¼å¼ä¸æ­£ç¡®&#39; : null,
      password: (val) =&gt; val.length &lt; 6 ? &#39;å¯†ç è‡³å°‘6ä¸ªå­—ç¬¦&#39; : null
    }

    return validations[name] ? validations[name](value) : null
  }

  const handleFieldChange = (name, value) =&gt; {
    // ç«‹å³æ›´æ–°è¡¨å•æ•°æ®
    setFormData(prev =&gt; ({ ...prev, [name]: value }))
    
    // å»¶è¿ŸéªŒè¯ï¼ˆè¿‡æ¸¡æ›´æ–°ï¼‰
    startTransition(async () =&gt; {
      const error = await validateField(name, value)
      setValidationResults(prev =&gt; ({
        ...prev,
        [name]: error
      }))
    })
  }

  return (
    &lt;form&gt;
      &lt;div&gt;
        &lt;input
          type=&quot;text&quot;
          value={formData.username}
          onChange={(e) =&gt; handleFieldChange(&#39;username&#39;, e.target.value)}
          placeholder=&quot;ç”¨æˆ·å&quot;
        /&gt;
        {isPending &amp;&amp; &lt;span&gt;éªŒè¯ä¸­...&lt;/span&gt;}
        {validationResults.username &amp;&amp; (
          &lt;div className=&quot;error&quot;&gt;{validationResults.username}&lt;/div&gt;
        )}
      &lt;/div&gt;

      &lt;div&gt;
        &lt;input
          type=&quot;email&quot;
          value={formData.email}
          onChange={(e) =&gt; handleFieldChange(&#39;email&#39;, e.target.value)}
          placeholder=&quot;é‚®ç®±&quot;
        /&gt;
        {validationResults.email &amp;&amp; (
          &lt;div className=&quot;error&quot;&gt;{validationResults.email}&lt;/div&gt;
        )}
      &lt;/div&gt;

      &lt;div&gt;
        &lt;input
          type=&quot;password&quot;
          value={formData.password}
          onChange={(e) =&gt; handleFieldChange(&#39;password&#39;, e.target.value)}
          placeholder=&quot;å¯†ç &quot;
        /&gt;
        {validationResults.password &amp;&amp; (
          &lt;div className=&quot;error&quot;&gt;{validationResults.password}&lt;/div&gt;
        )}
      &lt;/div&gt;

      &lt;button type=&quot;submit&quot;&gt;æ³¨å†Œ&lt;/button&gt;
    &lt;/form&gt;
  )
}

// è‡ªå®šä¹‰Hookå°è£…
function useFilteredList(items, filterFn) {
  const [filter, setFilter] = useState(&#39;&#39;)
  const [filteredItems, setFilteredItems] = useState(items)
  const [isPending, startTransition] = useTransition()

  const updateFilter = (newFilter) =&gt; {
    setFilter(newFilter)
    
    startTransition(() =&gt; {
      const filtered = newFilter 
        ? items.filter(item =&gt; filterFn(item, newFilter))
        : items
      setFilteredItems(filtered)
    })
  }

  return {
    filter,
    filteredItems,
    updateFilter,
    isPending
  }
}

function UserDirectory({ users }) {
  const { filter, filteredItems, updateFilter, isPending } = useFilteredList(
    users,
    (user, query) =&gt; 
      user.name.toLowerCase().includes(query.toLowerCase()) ||
      user.department.toLowerCase().includes(query.toLowerCase())
  )

  return (
    &lt;div&gt;
      &lt;input
        type=&quot;text&quot;
        value={filter}
        onChange={(e) =&gt; updateFilter(e.target.value)}
        placeholder=&quot;æœç´¢ç”¨æˆ·...&quot;
      /&gt;
      
      &lt;div className={isPending ? &#39;searching&#39; : &#39;&#39;}&gt;
        {isPending &amp;&amp; &lt;div&gt;æœç´¢ä¸­...&lt;/div&gt;}
        {filteredItems.map(user =&gt; (
          &lt;UserCard key={user.id} user={user} /&gt;
        ))}
      &lt;/div&gt;
    &lt;/div&gt;
  )
}
</code></pre>
<h3>æ³¨æ„äº‹é¡¹</h3>
<ol>
<li><strong>ä¼˜å…ˆçº§ç®¡ç†</strong> - è¿‡æ¸¡æ›´æ–°ä¼˜å…ˆçº§ä½ï¼Œå¯è¢«ç´§æ€¥æ›´æ–°æ‰“æ–­</li>
<li><strong>ç”¨æˆ·ä½“éªŒ</strong> - ä½¿ç”¨isPendingæä¾›è§†è§‰åé¦ˆ</li>
<li><strong>æ€§èƒ½è€ƒè™‘</strong> - ä¸è¦åœ¨æ¯ä¸ªçŠ¶æ€æ›´æ–°ä¸­éƒ½ä½¿ç”¨è¿‡æ¸¡</li>
<li><strong>å¼‚æ­¥æ“ä½œ</strong> - è¿‡æ¸¡ä¸ä¼šç­‰å¾…å¼‚æ­¥æ“ä½œå®Œæˆ</li>
</ol>
<hr>
<h2>useDeferredValue</h2>
<p>å»¶è¿Ÿæ›´æ–°å€¼ï¼Œå½“æœ‰æ›´ç´§æ€¥çš„æ›´æ–°æ—¶æ¨è¿Ÿä½ä¼˜å…ˆçº§çš„å€¼æ›´æ–°ã€‚</p>
<h3>è¯­æ³•</h3>
<pre><code class="language-typescript">const deferredValue = useDeferredValue&lt;T&gt;(value: T): T
</code></pre>
<h3>å‚æ•°</h3>
<ul>
<li><strong>value</strong>: <code>T</code> - è¦å»¶è¿Ÿçš„å€¼</li>
</ul>
<h3>è¿”å›å€¼</h3>
<ul>
<li><strong>deferredValue</strong>: <code>T</code> - å»¶è¿Ÿçš„å€¼</li>
</ul>
<h3>ä½¿ç”¨è§„åˆ™</h3>
<ol>
<li>åªèƒ½åœ¨å‡½æ•°ç»„ä»¶æˆ–è‡ªå®šä¹‰Hookä¸­è°ƒç”¨</li>
<li>å¿…é¡»åœ¨ç»„ä»¶çš„é¡¶å±‚è°ƒç”¨</li>
<li>å»¶è¿Ÿå€¼åœ¨ç´§æ€¥æ›´æ–°æœŸé—´ä¿æŒæ—§å€¼</li>
</ol>
<h3>ä½¿ç”¨åœºæ™¯</h3>
<ul>
<li>æœç´¢ç»“æœçš„å»¶è¿Ÿæ¸²æŸ“</li>
<li>æ˜‚è´µçš„åˆ—è¡¨è¿‡æ»¤</li>
<li>å›¾è¡¨æ•°æ®çš„å»¶è¿Ÿæ›´æ–°</li>
<li>ä¼˜åŒ–ç”¨æˆ·è¾“å…¥å“åº”æ€§</li>
</ul>
<h3>ä»£ç ç¤ºä¾‹</h3>
<pre><code class="language-jsx">// æœç´¢ç»“æœå»¶è¿Ÿæ¸²æŸ“
function SearchResults({ query }) {
  const deferredQuery = useDeferredValue(query)
  const [results, setResults] = useState([])
  const [isLoading, setIsLoading] = useState(false)

  useEffect(() =&gt; {
    if (deferredQuery) {
      setIsLoading(true)
      
      // æ¨¡æ‹ŸAPIè°ƒç”¨
      const searchAPI = async () =&gt; {
        const response = await fetch(`/api/search?q=${deferredQuery}`)
        const data = await response.json()
        setResults(data)
        setIsLoading(false)
      }

      searchAPI()
    } else {
      setResults([])
      setIsLoading(false)
    }
  }, [deferredQuery])

  // å½“æŸ¥è¯¢å€¼å’Œå»¶è¿Ÿå€¼ä¸åŒæ—¶ï¼Œæ˜¾ç¤ºæ­£åœ¨æ›´æ–°çš„çŠ¶æ€
  const isStale = query !== deferredQuery

  return (
    &lt;div className={isStale ? &#39;opacity-60&#39; : &#39;&#39;}&gt;
      {isLoading &amp;&amp; &lt;div&gt;æœç´¢ä¸­...&lt;/div&gt;}
      {isStale &amp;&amp; &lt;div&gt;æ›´æ–°ä¸­...&lt;/div&gt;}
      
      &lt;ul&gt;
        {results.map(result =&gt; (
          &lt;li key={result.id}&gt;{result.title}&lt;/li&gt;
        ))}
      &lt;/ul&gt;
    &lt;/div&gt;
  )
}

function SearchApp() {
  const [query, setQuery] = useState(&#39;&#39;)

  return (
    &lt;div&gt;
      &lt;input
        type=&quot;text&quot;
        value={query}
        onChange={(e) =&gt; setQuery(e.target.value)}
        placeholder=&quot;æœç´¢...&quot;
      /&gt;
      &lt;SearchResults query={query} /&gt;
    &lt;/div&gt;
  )
}

// å¤§åˆ—è¡¨è¿‡æ»¤ä¼˜åŒ–
function ProductCatalog({ products }) {
  const [filter, setFilter] = useState(&#39;&#39;)
  const deferredFilter = useDeferredValue(filter)

  const filteredProducts = useMemo(() =&gt; {
    if (!deferredFilter) return products
    
    return products.filter(product =&gt;
      product.name.toLowerCase().includes(deferredFilter.toLowerCase()) ||
      product.category.toLowerCase().includes(deferredFilter.toLowerCase())
    )
  }, [products, deferredFilter])

  const isFiltering = filter !== deferredFilter

  return (
    &lt;div&gt;
      &lt;input
        type=&quot;text&quot;
        value={filter}
        onChange={(e) =&gt; setFilter(e.target.value)}
        placeholder=&quot;è¿‡æ»¤äº§å“...&quot;
      /&gt;
      
      &lt;div className={isFiltering ? &#39;filtering&#39; : &#39;&#39;}&gt;
        {isFiltering &amp;&amp; &lt;div&gt;è¿‡æ»¤ä¸­...&lt;/div&gt;}
        
        &lt;div className=&quot;product-grid&quot;&gt;
          {filteredProducts.map(product =&gt; (
            &lt;ProductCard key={product.id} product={product} /&gt;
          ))}
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  )
}

// å›¾è¡¨æ•°æ®å»¶è¿Ÿæ›´æ–°
function InteractiveChart({ data, chartType, options }) {
  const deferredData = useDeferredValue(data)
  const deferredOptions = useDeferredValue(options)

  const processedData = useMemo(() =&gt; {
    // å¤æ‚çš„æ•°æ®å¤„ç†
    console.log(&#39;Processing chart data...&#39;)
    return processChartData(deferredData, chartType, deferredOptions)
  }, [deferredData, chartType, deferredOptions])

  const isUpdating = data !== deferredData || options !== deferredOptions

  return (
    &lt;div className=&quot;chart-container&quot;&gt;
      {isUpdating &amp;&amp; (
        &lt;div className=&quot;update-indicator&quot;&gt;å›¾è¡¨æ›´æ–°ä¸­...&lt;/div&gt;
      )}
      
      &lt;Chart
        data={processedData}
        type={chartType}
        options={deferredOptions}
        className={isUpdating ? &#39;updating&#39; : &#39;&#39;}
      /&gt;
    &lt;/div&gt;
  )
}

// å¤æ‚è¡¨å•éªŒè¯
function FormWithValidation() {
  const [formData, setFormData] = useState({
    name: &#39;&#39;,
    email: &#39;&#39;,
    message: &#39;&#39;
  })
  
  const deferredFormData = useDeferredValue(formData)
  const [validationErrors, setValidationErrors] = useState({})

  const validateForm = useMemo(() =&gt; {
    const errors = {}
    
    if (deferredFormData.name.length &lt; 2) {
      errors.name = &#39;å§“åè‡³å°‘éœ€è¦2ä¸ªå­—ç¬¦&#39;
    }
    
    if (!/\S+@\S+\.\S+/.test(deferredFormData.email)) {
      errors.email = &#39;é‚®ç®±æ ¼å¼ä¸æ­£ç¡®&#39;
    }
    
    if (deferredFormData.message.length &lt; 10) {
      errors.message = &#39;æ¶ˆæ¯è‡³å°‘éœ€è¦10ä¸ªå­—ç¬¦&#39;
    }

    return errors
  }, [deferredFormData])

  useEffect(() =&gt; {
    setValidationErrors(validateForm)
  }, [validateForm])

  const isValidating = formData !== deferredFormData

  const updateField = (field, value) =&gt; {
    setFormData(prev =&gt; ({ ...prev, [field]: value }))
  }

  return (
    &lt;form&gt;
      &lt;div&gt;
        &lt;input
          type=&quot;text&quot;
          value={formData.name}
          onChange={(e) =&gt; updateField(&#39;name&#39;, e.target.value)}
          placeholder=&quot;å§“å&quot;
        /&gt;
        {isValidating &amp;&amp; &lt;span&gt;éªŒè¯ä¸­...&lt;/span&gt;}
        {validationErrors.name &amp;&amp; (
          &lt;div className=&quot;error&quot;&gt;{validationErrors.name}&lt;/div&gt;
        )}
      &lt;/div&gt;

      &lt;div&gt;
        &lt;input
          type=&quot;email&quot;
          value={formData.email}
          onChange={(e) =&gt; updateField(&#39;email&#39;, e.target.value)}
          placeholder=&quot;é‚®ç®±&quot;
        /&gt;
        {validationErrors.email &amp;&amp; (
          &lt;div className=&quot;error&quot;&gt;{validationErrors.email}&lt;/div&gt;
        )}
      &lt;/div&gt;

      &lt;div&gt;
        &lt;textarea
          value={formData.message}
          onChange={(e) =&gt; updateField(&#39;message&#39;, e.target.value)}
          placeholder=&quot;æ¶ˆæ¯&quot;
        /&gt;
        {validationErrors.message &amp;&amp; (
          &lt;div className=&quot;error&quot;&gt;{validationErrors.message}&lt;/div&gt;
        )}
      &lt;/div&gt;

      &lt;button type=&quot;submit&quot; disabled={Object.keys(validationErrors).length &gt; 0}&gt;
        æäº¤
      &lt;/button&gt;
    &lt;/form&gt;
  )
}

// è‡ªå®šä¹‰Hook - å»¶è¿Ÿæœç´¢
function useDeferredSearch(searchTerm, searchFunction) {
  const deferredTerm = useDeferredValue(searchTerm)
  const [results, setResults] = useState([])
  const [isSearching, setIsSearching] = useState(false)

  useEffect(() =&gt; {
    if (deferredTerm) {
      setIsSearching(true)
      
      const performSearch = async () =&gt; {
        try {
          const searchResults = await searchFunction(deferredTerm)
          setResults(searchResults)
        } catch (error) {
          console.error(&#39;Search failed:&#39;, error)
          setResults([])
        } finally {
          setIsSearching(false)
        }
      }

      performSearch()
    } else {
      setResults([])
      setIsSearching(false)
    }
  }, [deferredTerm, searchFunction])

  return {
    results,
    isSearching,
    isStale: searchTerm !== deferredTerm
  }
}

function UserSearch() {
  const [searchTerm, setSearchTerm] = useState(&#39;&#39;)
  
  const searchUsers = useCallback(async (term) =&gt; {
    const response = await fetch(`/api/users/search?q=${term}`)
    return response.json()
  }, [])

  const { results, isSearching, isStale } = useDeferredSearch(searchTerm, searchUsers)

  return (
    &lt;div&gt;
      &lt;input
        type=&quot;text&quot;
        value={searchTerm}
        onChange={(e) =&gt; setSearchTerm(e.target.value)}
        placeholder=&quot;æœç´¢ç”¨æˆ·...&quot;
      /&gt;
      
      &lt;div className={isStale ? &#39;stale-results&#39; : &#39;&#39;}&gt;
        {isSearching &amp;&amp; &lt;div&gt;æœç´¢ä¸­...&lt;/div&gt;}
        {isStale &amp;&amp; &lt;div&gt;ç»“æœæ›´æ–°ä¸­...&lt;/div&gt;}
        
        {results.map(user =&gt; (
          &lt;UserCard key={user.id} user={user} /&gt;
        ))}
      &lt;/div&gt;
    &lt;/div&gt;
  )
}
</code></pre>
<h3>æ³¨æ„äº‹é¡¹</h3>
<ol>
<li><strong>å€¼å»¶è¿Ÿ</strong> - å»¶è¿Ÿå€¼ä¼šåœ¨ç´§æ€¥æ›´æ–°æœŸé—´ä¿æŒæ—§å€¼</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong> - ä¸useMemoç»“åˆä½¿ç”¨æ•ˆæœæ›´ä½³</li>
<li><strong>ç”¨æˆ·åé¦ˆ</strong> - é€šè¿‡æ¯”è¾ƒåŸå€¼å’Œå»¶è¿Ÿå€¼æä¾›è§†è§‰åé¦ˆ</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong> - é€‚åˆæ˜‚è´µçš„è®¡ç®—æˆ–æ¸²æŸ“æ“ä½œ</li>
</ol>
<hr>
<h2>useSyncExternalStore</h2>
<p>è®¢é˜…å¤–éƒ¨æ•°æ®æºçš„Hookã€‚</p>
<h3>è¯­æ³•</h3>
<pre><code class="language-typescript">const snapshot = useSyncExternalStore&lt;T&gt;(
  subscribe: (onStoreChange: () =&gt; void) =&gt; () =&gt; void,
  getSnapshot: () =&gt; T,
  getServerSnapshot?: () =&gt; T
): T
</code></pre>
<h3>å‚æ•°</h3>
<ul>
<li><strong>subscribe</strong>: <code>(onStoreChange: () =&gt; void) =&gt; () =&gt; void</code> - è®¢é˜…å­˜å‚¨å˜åŒ–çš„å‡½æ•°</li>
<li><strong>getSnapshot</strong>: <code>() =&gt; T</code> - è·å–å½“å‰å¿«ç…§çš„å‡½æ•°</li>
<li><strong>getServerSnapshot</strong>: <code>() =&gt; T</code> (å¯é€‰) - æœåŠ¡ç«¯æ¸²æŸ“æ—¶è·å–å¿«ç…§çš„å‡½æ•°</li>
</ul>
<h3>è¿”å›å€¼</h3>
<ul>
<li><strong>snapshot</strong>: <code>T</code> - å­˜å‚¨çš„å½“å‰å¿«ç…§</li>
</ul>
<h3>ä½¿ç”¨è§„åˆ™</h3>
<ol>
<li>åªèƒ½åœ¨å‡½æ•°ç»„ä»¶æˆ–è‡ªå®šä¹‰Hookä¸­è°ƒç”¨</li>
<li>å¿…é¡»åœ¨ç»„ä»¶çš„é¡¶å±‚è°ƒç”¨</li>
<li>getSnapshotå‡½æ•°å¿…é¡»æ˜¯çº¯å‡½æ•°</li>
</ol>
<h3>ä½¿ç”¨åœºæ™¯</h3>
<ul>
<li>ä¸å¤–éƒ¨çŠ¶æ€ç®¡ç†åº“é›†æˆ</li>
<li>è®¢é˜…æµè§ˆå™¨API</li>
<li>ç›‘å¬å…¨å±€äº‹ä»¶</li>
<li>ç¬¬ä¸‰æ–¹æ•°æ®æºé›†æˆ</li>
</ul>
<h3>ä»£ç ç¤ºä¾‹</h3>
<pre><code class="language-jsx">// è®¢é˜…çª—å£å°ºå¯¸
function useWindowSize() {
  const size = useSyncExternalStore(
    (callback) =&gt; {
      window.addEventListener(&#39;resize&#39;, callback)
      return () =&gt; window.removeEventListener(&#39;resize&#39;, callback)
    },
    () =&gt; ({ width: window.innerWidth, height: window.innerHeight }),
    () =&gt; ({ width: 1024, height: 768 }) // æœåŠ¡ç«¯é»˜è®¤å€¼
  )

  return size
}

function ResponsiveComponent() {
  const { width, height } = useWindowSize()

  return (
    &lt;div&gt;
      &lt;p&gt;çª—å£å°ºå¯¸: {width} Ã— {height}&lt;/p&gt;
      {width &lt; 768 ? &lt;MobileLayout /&gt; : &lt;DesktopLayout /&gt;}
    &lt;/div&gt;
  )
}

// è®¢é˜…åœ¨çº¿çŠ¶æ€
function useOnlineStatus() {
  const isOnline = useSyncExternalStore(
    (callback) =&gt; {
      window.addEventListener(&#39;online&#39;, callback)
      window.addEventListener(&#39;offline&#39;, callback)
      return () =&gt; {
        window.removeEventListener(&#39;online&#39;, callback)
        window.removeEventListener(&#39;offline&#39;, callback)
      }
    },
    () =&gt; navigator.onLine,
    () =&gt; true // æœåŠ¡ç«¯é»˜è®¤ä¸ºåœ¨çº¿
  )

  return isOnline
}

function NetworkStatus() {
  const isOnline = useOnlineStatus()

  return (
    &lt;div className={`status ${isOnline ? &#39;online&#39; : &#39;offline&#39;}`}&gt;
      {isOnline ? &#39;ğŸŸ¢ åœ¨çº¿&#39; : &#39;ğŸ”´ ç¦»çº¿&#39;}
    &lt;/div&gt;
  )
}

// è®¢é˜…æœ¬åœ°å­˜å‚¨
function useLocalStorageValue(key) {
  const value = useSyncExternalStore(
    (callback) =&gt; {
      const handleStorageChange = (e) =&gt; {
        if (e.key === key) {
          callback()
        }
      }
      
      window.addEventListener(&#39;storage&#39;, handleStorageChange)
      return () =&gt; window.removeEventListener(&#39;storage&#39;, handleStorageChange)
    },
    () =&gt; {
      try {
        const item = localStorage.getItem(key)
        return item ? JSON.parse(item) : null
      } catch {
        return null
      }
    },
    () =&gt; null // æœåŠ¡ç«¯æ— localStorage
  )

  const setValue = useCallback((newValue) =&gt; {
    try {
      localStorage.setItem(key, JSON.stringify(newValue))
      // æ‰‹åŠ¨è§¦å‘äº‹ä»¶ï¼Œå› ä¸ºåŒé¡µé¢ä¿®æ”¹ä¸ä¼šè§¦å‘storageäº‹ä»¶
      window.dispatchEvent(new StorageEvent(&#39;storage&#39;, { key }))
    } catch (error) {
      console.error(&#39;Failed to set localStorage:&#39;, error)
    }
  }, [key])

  return [value, setValue]
}

function Settings() {
  const [theme, setTheme] = useLocalStorageValue(&#39;theme&#39;)
  const [language, setLanguage] = useLocalStorageValue(&#39;language&#39;)

  return (
    &lt;div&gt;
      &lt;div&gt;
        &lt;label&gt;ä¸»é¢˜: &lt;/label&gt;
        &lt;select 
          value={theme || &#39;light&#39;} 
          onChange={(e) =&gt; setTheme(e.target.value)}
        &gt;
          &lt;option value=&quot;light&quot;&gt;æ˜äº®&lt;/option&gt;
          &lt;option value=&quot;dark&quot;&gt;æš—é»‘&lt;/option&gt;
        &lt;/select&gt;
      &lt;/div&gt;
      
      &lt;div&gt;
        &lt;label&gt;è¯­è¨€: &lt;/label&gt;
        &lt;select 
          value={language || &#39;zh&#39;} 
          onChange={(e) =&gt; setLanguage(e.target.value)}
        &gt;
          &lt;option value=&quot;zh&quot;&gt;ä¸­æ–‡&lt;/option&gt;
          &lt;option value=&quot;en&quot;&gt;English&lt;/option&gt;
        &lt;/select&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  )
}

// ä¸å¤–éƒ¨çŠ¶æ€ç®¡ç†åº“é›†æˆï¼ˆæ¨¡æ‹Ÿï¼‰
class SimpleStore {
  constructor(initialState) {
    this.state = initialState
    this.listeners = []
  }

  subscribe(listener) {
    this.listeners.push(listener)
    return () =&gt; {
      this.listeners = this.listeners.filter(l =&gt; l !== listener)
    }
  }

  getState() {
    return this.state
  }

  setState(newState) {
    this.state = { ...this.state, ...newState }
    this.listeners.forEach(listener =&gt; listener())
  }
}

const globalStore = new SimpleStore({
  user: null,
  theme: &#39;light&#39;,
  notifications: []
})

function useStore(selector) {
  const snapshot = useSyncExternalStore(
    globalStore.subscribe.bind(globalStore),
    () =&gt; selector(globalStore.getState()),
    () =&gt; selector({}) // æœåŠ¡ç«¯åˆå§‹çŠ¶æ€
  )

  return snapshot
}

function UserProfile() {
  const user = useStore(state =&gt; state.user)
  const theme = useStore(state =&gt; state.theme)

  if (!user) {
    return &lt;div&gt;è¯·ç™»å½•&lt;/div&gt;
  }

  return (
    &lt;div className={`profile theme-${theme}`}&gt;
      &lt;h2&gt;{user.name}&lt;/h2&gt;
      &lt;p&gt;{user.email}&lt;/p&gt;
    &lt;/div&gt;
  )
}

function ThemeToggle() {
  const theme = useStore(state =&gt; state.theme)

  const toggleTheme = () =&gt; {
    globalStore.setState({ 
      theme: theme === &#39;light&#39; ? &#39;dark&#39; : &#39;light&#39; 
    })
  }

  return (
    &lt;button onClick={toggleTheme}&gt;
      åˆ‡æ¢åˆ° {theme === &#39;light&#39; ? &#39;æš—é»‘&#39; : &#39;æ˜äº®&#39;} ä¸»é¢˜
    &lt;/button&gt;
  )
}

// è®¢é˜…åª’ä½“æŸ¥è¯¢
function useMediaQuery(query) {
  const matches = useSyncExternalStore(
    (callback) =&gt; {
      const mediaQuery = window.matchMedia(query)
      mediaQuery.addEventListener(&#39;change&#39;, callback)
      return () =&gt; mediaQuery.removeEventListener(&#39;change&#39;, callback)
    },
    () =&gt; window.matchMedia(query).matches,
    () =&gt; false
  )

  return matches
}

function ResponsiveNavigation() {
  const isMobile = useMediaQuery(&#39;(max-width: 768px)&#39;)
  const isTablet = useMediaQuery(&#39;(min-width: 769px) and (max-width: 1024px)&#39;)

  if (isMobile) {
    return &lt;MobileNavigation /&gt;
  }

  if (isTablet) {
    return &lt;TabletNavigation /&gt;
  }

  return &lt;DesktopNavigation /&gt;
}

// è‡ªå®šä¹‰Hook - è®¢é˜…åœ°ç†ä½ç½®
function useGeolocation() {
  const position = useSyncExternalStore(
    (callback) =&gt; {
      const watchId = navigator.geolocation.watchPosition(
        callback,
        callback,
        { enableHighAccuracy: true }
      )
      
      return () =&gt; navigator.geolocation.clearWatch(watchId)
    },
    () =&gt; {
      // åŒæ­¥è·å–ä½ç½®æ¯”è¾ƒå›°éš¾ï¼Œè¿™é‡Œè¿”å›null
      return null
    },
    () =&gt; null
  )

  return position
}

function LocationDisplay() {
  const position = useGeolocation()

  if (!position) {
    return &lt;div&gt;è·å–ä½ç½®ä¸­...&lt;/div&gt;
  }

  return (
    &lt;div&gt;
      &lt;p&gt;çº¬åº¦: {position.coords.latitude}&lt;/p&gt;
      &lt;p&gt;ç»åº¦: {position.coords.longitude}&lt;/p&gt;
      &lt;p&gt;ç²¾åº¦: {position.coords.accuracy}ç±³&lt;/p&gt;
    &lt;/div&gt;
  )
}
</code></pre>
<h3>æ³¨æ„äº‹é¡¹</h3>
<ol>
<li><strong>åŒæ­¥æ€§</strong> - getSnapshotå¿…é¡»æ˜¯åŒæ­¥å‡½æ•°</li>
<li><strong>ä¸€è‡´æ€§</strong> - ç›¸åŒè¾“å…¥å¿…é¡»è¿”å›ç›¸åŒç»“æœ</li>
<li><strong>æœåŠ¡ç«¯æ¸²æŸ“</strong> - æä¾›getServerSnapshoté¿å…hydrationä¸åŒ¹é…</li>
<li><strong>æ€§èƒ½è€ƒè™‘</strong> - é¿å…åœ¨getSnapshotä¸­è¿›è¡Œæ˜‚è´µè®¡ç®—</li>
</ol>
<hr>
<h2>useInsertionEffect</h2>
<p>åœ¨DOMå˜æ›´ä¹‹å‰åŒæ­¥è§¦å‘çš„effectï¼Œä¸»è¦ç”¨äºCSS-in-JSåº“ã€‚</p>
<h3>è¯­æ³•</h3>
<pre><code class="language-typescript">useInsertionEffect(
  effect: () =&gt; void | (() =&gt; void),
  deps?: readonly unknown[]
): void
</code></pre>
<h3>å‚æ•°</h3>
<ul>
<li><strong>effect</strong>: <code>() =&gt; void | (() =&gt; void)</code> - å‰¯ä½œç”¨å‡½æ•°</li>
<li><strong>deps</strong>: <code>readonly unknown[]</code> (å¯é€‰) - ä¾èµ–æ•°ç»„</li>
</ul>
<h3>è¿”å›å€¼</h3>
<p>æ— è¿”å›å€¼</p>
<h3>ä½¿ç”¨è§„åˆ™</h3>
<ol>
<li>åªèƒ½åœ¨å‡½æ•°ç»„ä»¶æˆ–è‡ªå®šä¹‰Hookä¸­è°ƒç”¨</li>
<li>å¿…é¡»åœ¨ç»„ä»¶çš„é¡¶å±‚è°ƒç”¨</li>
<li>åœ¨æ‰€æœ‰DOMå˜æ›´ä¹‹å‰æ‰§è¡Œ</li>
</ol>
<h3>ä½¿ç”¨åœºæ™¯</h3>
<ul>
<li>CSS-in-JSæ ·å¼æ³¨å…¥</li>
<li>åŠ¨æ€æ ·å¼è¡¨ç®¡ç†</li>
<li>ç¬¬ä¸‰æ–¹æ ·å¼åº“é›†æˆ</li>
<li>DOMæ“ä½œå‰çš„æ ·å¼å‡†å¤‡</li>
</ul>
<h3>ä»£ç ç¤ºä¾‹</h3>
<pre><code class="language-jsx">// CSS-in-JSæ ·å¼æ³¨å…¥
function useCSS(css) {
  const cssId = useId()

  useInsertionEffect(() =&gt; {
    // åœ¨DOMæ›´æ–°å‰æ³¨å…¥æ ·å¼
    const style = document.createElement(&#39;style&#39;)
    style.id = cssId
    style.textContent = css
    document.head.appendChild(style)

    return () =&gt; {
      // æ¸…ç†æ ·å¼
      const existingStyle = document.getElementById(cssId)
      if (existingStyle) {
        document.head.removeChild(existingStyle)
      }
    }
  }, [css, cssId])
}

function StyledButton({ children, color = &#39;blue&#39; }) {
  const css = `
    .button-${color} {
      background-color: ${color};
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;
    }
    .button-${color}:hover {
      opacity: 0.8;
    }
  `

  useCSS(css)

  return (
    &lt;button className={`button-${color}`}&gt;
      {children}
    &lt;/button&gt;
  )
}

// åŠ¨æ€ä¸»é¢˜æ ·å¼
function useThemeStyles(theme) {
  useInsertionEffect(() =&gt; {
    const themeStyles = {
      light: `
        :root {
          --bg-color: #ffffff;
          --text-color: #000000;
          --border-color: #e0e0e0;
        }
      `,
      dark: `
        :root {
          --bg-color: #1a1a1a;
          --text-color: #ffffff;
          --border-color: #333333;
        }
      `
    }

    const styleId = &#39;theme-styles&#39;
    let style = document.getElementById(styleId)
    
    if (!style) {
      style = document.createElement(&#39;style&#39;)
      style.id = styleId
      document.head.appendChild(style)
    }

    style.textContent = themeStyles[theme] || themeStyles.light

    return () =&gt; {
      // ç»„ä»¶å¸è½½æ—¶ä¸æ¸…ç†ï¼Œå› ä¸ºä¸»é¢˜æ˜¯å…¨å±€çš„
    }
  }, [theme])
}

function App() {
  const [theme, setTheme] = useState(&#39;light&#39;)
  
  useThemeStyles(theme)

  return (
    &lt;div className=&quot;app&quot;&gt;
      &lt;button onClick={() =&gt; setTheme(theme === &#39;light&#39; ? &#39;dark&#39; : &#39;light&#39;)}&gt;
        åˆ‡æ¢ä¸»é¢˜
      &lt;/button&gt;
      &lt;div&gt;å½“å‰ä¸»é¢˜: {theme}&lt;/div&gt;
    &lt;/div&gt;
  )
}

// åŠ¨æ€å­—ä½“åŠ è½½
function useDynamicFont(fontFamily, fontUrl) {
  useInsertionEffect(() =&gt; {
    if (!fontFamily || !fontUrl) return

    const fontId = `font-${fontFamily.replace(/\s+/g, &#39;-&#39;).toLowerCase()}`
    
    // æ£€æŸ¥å­—ä½“æ˜¯å¦å·²åŠ è½½
    if (document.getElementById(fontId)) return

    const style = document.createElement(&#39;style&#39;)
    style.id = fontId
    style.textContent = `
      @font-face {
        font-family: &#39;${fontFamily}&#39;;
        src: url(&#39;${fontUrl}&#39;) format(&#39;woff2&#39;);
        font-display: swap;
      }
    `
    
    document.head.appendChild(style)

    return () =&gt; {
      const existingStyle = document.getElementById(fontId)
      if (existingStyle) {
        document.head.removeChild(existingStyle)
      }
    }
  }, [fontFamily, fontUrl])
}

function CustomFontText({ fontFamily, fontUrl, children }) {
  useDynamicFont(fontFamily, fontUrl)

  return (
    &lt;div style={{ fontFamily: fontFamily }}&gt;
      {children}
    &lt;/div&gt;
  )
}

// CSSå˜é‡åŠ¨æ€æ›´æ–°
function useCSSVariables(variables) {
  useInsertionEffect(() =&gt; {
    const root = document.documentElement
    
    // è®¾ç½®CSSå˜é‡
    Object.entries(variables).forEach(([key, value]) =&gt; {
      root.style.setProperty(`--${key}`, value)
    })

    return () =&gt; {
      // æ¸…ç†CSSå˜é‡
      Object.keys(variables).forEach(key =&gt; {
        root.style.removeProperty(`--${key}`)
      })
    }
  }, [variables])
}

function ColorfulComponent() {
  const [primaryColor, setPrimaryColor] = useState(&#39;#007bff&#39;)
  const [secondaryColor, setSecondaryColor] = useState(&#39;#6c757d&#39;)

  useCSSVariables({
    &#39;primary-color&#39;: primaryColor,
    &#39;secondary-color&#39;: secondaryColor
  })

  return (
    &lt;div&gt;
      &lt;div 
        style={{ 
          backgroundColor: &#39;var(--primary-color)&#39;, 
          color: &#39;white&#39;,
          padding: &#39;16px&#39; 
        }}
      &gt;
        ä¸»è¦é¢œè‰²åŒºåŸŸ
      &lt;/div&gt;
      
      &lt;div 
        style={{ 
          backgroundColor: &#39;var(--secondary-color)&#39;, 
          color: &#39;white&#39;,
          padding: &#39;16px&#39;,
          marginTop: &#39;8px&#39;
        }}
      &gt;
        æ¬¡è¦é¢œè‰²åŒºåŸŸ
      &lt;/div&gt;

      &lt;div&gt;
        &lt;input
          type=&quot;color&quot;
          value={primaryColor}
          onChange={(e) =&gt; setPrimaryColor(e.target.value)}
        /&gt;
        &lt;input
          type=&quot;color&quot;
          value={secondaryColor}
          onChange={(e) =&gt; setSecondaryColor(e.target.value)}
        /&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  )
}

// ç¬¬ä¸‰æ–¹CSSåº“é›†æˆ
function useExternalCSS(url) {
  useInsertionEffect(() =&gt; {
    const linkId = `external-css-${url.replace(/[^a-zA-Z0-9]/g, &#39;-&#39;)}`
    
    // æ£€æŸ¥æ˜¯å¦å·²ç»åŠ è½½
    if (document.getElementById(linkId)) return

    const link = document.createElement(&#39;link&#39;)
    link.id = linkId
    link.rel = &#39;stylesheet&#39;
    link.href = url
    
    document.head.appendChild(link)

    return () =&gt; {
      const existingLink = document.getElementById(linkId)
      if (existingLink) {
        document.head.removeChild(existingLink)
      }
    }
  }, [url])
}

function ComponentWithExternalStyles() {
  useExternalCSS(&#39;https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css&#39;)

  return (
    &lt;div className=&quot;animate__animated animate__bounce&quot;&gt;
      ä½¿ç”¨å¤–éƒ¨CSSåº“çš„åŠ¨ç”»ç»„ä»¶
    &lt;/div&gt;
  )
}

// è‡ªå®šä¹‰Hook - æ ·å¼ç®¡ç†å™¨
function useStyleManager() {
  const stylesRef = useRef(new Map())

  const addStyles = useCallback((id, css) =&gt; {
    useInsertionEffect(() =&gt; {
      if (stylesRef.current.has(id)) return

      const style = document.createElement(&#39;style&#39;)
      style.id = `style-${id}`
      style.textContent = css
      document.head.appendChild(style)
      
      stylesRef.current.set(id, style)

      return () =&gt; {
        const styleElement = stylesRef.current.get(id)
        if (styleElement &amp;&amp; styleElement.parentNode) {
          styleElement.parentNode.removeChild(styleElement)
        }
        stylesRef.current.delete(id)
      }
    }, [id, css])
  }, [])

  const removeStyles = useCallback((id) =&gt; {
    const styleElement = stylesRef.current.get(id)
    if (styleElement &amp;&amp; styleElement.parentNode) {
      styleElement.parentNode.removeChild(styleElement)
    }
    stylesRef.current.delete(id)
  }, [])

  return { addStyles, removeStyles }
}
</code></pre>
<h3>æ³¨æ„äº‹é¡¹</h3>
<ol>
<li><strong>æ‰§è¡Œæ—¶æœº</strong> - åœ¨DOMå˜æ›´å‰æ‰§è¡Œï¼Œæ—©äºuseLayoutEffect</li>
<li><strong>ä¸»è¦ç”¨é€”</strong> - ä¸“ä¸ºCSS-in-JSåº“è®¾è®¡</li>
<li><strong>é¿å…æ»¥ç”¨</strong> - ä¸è¦ç”¨äºä¸€èˆ¬çš„å‰¯ä½œç”¨æ“ä½œ</li>
<li><strong>æœåŠ¡ç«¯æ¸²æŸ“</strong> - åœ¨SSRä¸­ä¸ä¼šæ‰§è¡Œ</li>
</ol>
<hr>
<h2>æ€»ç»“</h2>
<p>æœ¬æ–‡æ¡£è¯¦ç»†ä»‹ç»äº†Reactæ‰€æœ‰å®˜æ–¹Hooksçš„ä½¿ç”¨æ–¹æ³•ï¼ŒåŒ…æ‹¬ï¼š</p>
<h3>åŸºç¡€Hooks</h3>
<ul>
<li><strong>useState</strong>: ç®¡ç†ç»„ä»¶çŠ¶æ€</li>
<li><strong>useEffect</strong>: å¤„ç†å‰¯ä½œç”¨</li>
<li><strong>useContext</strong>: æ¶ˆè´¹Contextå€¼</li>
</ul>
<h3>é¢å¤–Hooks</h3>
<ul>
<li><strong>useReducer</strong>: å¤æ‚çŠ¶æ€ç®¡ç†</li>
<li><strong>useCallback</strong>: è®°å¿†åŒ–å›è°ƒå‡½æ•°</li>
<li><strong>useMemo</strong>: è®°å¿†åŒ–è®¡ç®—å€¼</li>
<li><strong>useRef</strong>: è®¿é—®DOMå’Œå­˜å‚¨å¯å˜å€¼</li>
<li><strong>useImperativeHandle</strong>: è‡ªå®šä¹‰refæ¥å£</li>
<li><strong>useLayoutEffect</strong>: åŒæ­¥DOMæ“ä½œ</li>
<li><strong>useDebugValue</strong>: è‡ªå®šä¹‰Hookè°ƒè¯•</li>
</ul>
<h3>React 18+ Hooks</h3>
<ul>
<li><strong>useId</strong>: ç”Ÿæˆå”¯ä¸€ID</li>
<li><strong>useTransition</strong>: æ ‡è®°è¿‡æ¸¡æ›´æ–°</li>
<li><strong>useDeferredValue</strong>: å»¶è¿Ÿå€¼æ›´æ–°</li>
<li><strong>useSyncExternalStore</strong>: è®¢é˜…å¤–éƒ¨å­˜å‚¨</li>
<li><strong>useInsertionEffect</strong>: CSS-in-JSæ ·å¼æ³¨å…¥</li>
</ul>
<h3>ä½¿ç”¨å»ºè®®</h3>
<ol>
<li><strong>æ­£ç¡®çš„Hook</strong> - æ ¹æ®éœ€æ±‚é€‰æ‹©åˆé€‚çš„Hook</li>
<li><strong>ä¾èµ–æ•°ç»„</strong> - ç¡®ä¿ä¾èµ–æ•°ç»„çš„æ­£ç¡®æ€§</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong> - é€‚å½“ä½¿ç”¨ä¼˜åŒ–ç±»Hook</li>
<li><strong>è‡ªå®šä¹‰Hook</strong> - æå–å¯å¤ç”¨çš„é€»è¾‘</li>
<li><strong>è°ƒè¯•å·¥å…·</strong> - åˆ©ç”¨React DevToolsè°ƒè¯•</li>
</ol>
<p>å¸Œæœ›è¿™ä¸ªå®Œæ•´çš„å‚è€ƒæ–‡æ¡£èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°æŒæ¡React Hooksï¼ </p>

          </div>

          <!-- æ–‡æ¡£å¯¼èˆª -->
          <div class="doc-navigation">
            
              <a href="38-å¸¸è§é—®é¢˜.html" class="nav-btn prev-btn">
                <span class="nav-icon">â†</span>
                <div class="nav-text">
                  <span class="nav-label">ä¸Šä¸€ç¯‡</span>
                  <span class="nav-title">å¸¸è§é—®é¢˜</span>
                </div>
              </a>
            
            
            <div></div>
          </div>
        </article>
      </main>
    </div>

    <!-- è¿”å›é¡¶éƒ¨æŒ‰é’® -->
    <button class="back-to-top" id="backToTop" onclick="scrollToTop()">
      <span>â†‘</span>
    </button>

    <!-- åº•éƒ¨ -->
    <footer class="footer">
      <div class="footer-content">
        <p>&copy; 2024 React ä¸­æ–‡æ–‡æ¡£. åŸºäº React 18.x æ„å»º</p>
        <p>Made with â¤ï¸ by Reactä¸­æ–‡ç¤¾åŒº</p>
      </div>
    </footer>
  </div>

  <script src="assets/script.js"></script>
</body>
</html>