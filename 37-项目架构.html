<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>项目架构 - React 中文文档</title>
  <meta name="description" content="从入门到精通，全面掌握React开发技能">
  <link rel="stylesheet" href="assets/style.css">
  <link rel="stylesheet" href="assets/highlight.css">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>⚛️</text></svg>">
</head>
<body>
  <div class="container">
    <!-- 顶部导航 -->
    <header class="header">
      <div class="header-content">
        <div class="logo">
          <span class="logo-icon">⚛️</span>
          <div class="logo-text">
            <h1>React 中文文档</h1>
            <p>现代化的React学习指南</p>
          </div>
        </div>
        <nav class="header-nav">
          <a href="index.html" class="nav-link">首页</a>
          <a href="#" class="nav-link" onclick="toggleSidebar()">目录</a>
          <a href="https://github.com/facebook/react" target="_blank" class="nav-link">GitHub</a>
        </nav>
      </div>
    </header>

    <div class="main-layout">
      <!-- 侧边栏 -->
      <aside class="sidebar" id="sidebar">
        <div class="sidebar-content">
          <div class="search-box">
            <input type="text" placeholder="搜索文档..." id="searchInput" onkeyup="searchDocs()">
            <span class="search-icon">🔍</span>
          </div>
          <nav class="doc-nav">
            
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">📚</span>
          基础概念
        </h3>
        <ul class="category-docs">
          <li><a href="01-React简介.html" class="doc-link">React简介</a></li><li><a href="02-环境搭建.html" class="doc-link">环境搭建</a></li><li><a href="03-JSX语法.html" class="doc-link">JSX语法</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">🧩</span>
          组件开发
        </h3>
        <ul class="category-docs">
          <li><a href="04-组件基础.html" class="doc-link">组件基础</a></li><li><a href="05-Props与State.html" class="doc-link">Props与State</a></li><li><a href="06-事件处理.html" class="doc-link">事件处理</a></li><li><a href="07-条件渲染.html" class="doc-link">条件渲染</a></li><li><a href="08-列表渲染.html" class="doc-link">列表渲染</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">🎣</span>
          Hooks API
        </h3>
        <ul class="category-docs">
          <li><a href="09-Hooks概述.html" class="doc-link">Hooks概述</a></li><li><a href="10-useState.html" class="doc-link">useState</a></li><li><a href="11-useEffect.html" class="doc-link">useEffect</a></li><li><a href="12-useContext.html" class="doc-link">useContext</a></li><li><a href="13-useReducer.html" class="doc-link">useReducer</a></li><li><a href="14-useMemo和useCallback.html" class="doc-link">useMemo和useCallback</a></li><li><a href="15-useRef.html" class="doc-link">useRef</a></li><li><a href="16-自定义Hooks.html" class="doc-link">自定义Hooks</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">🔄</span>
          生命周期
        </h3>
        <ul class="category-docs">
          <li><a href="17-生命周期方法.html" class="doc-link">生命周期方法</a></li><li><a href="18-副作用处理.html" class="doc-link">副作用处理</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">🎨</span>
          样式与UI
        </h3>
        <ul class="category-docs">
          <li><a href="19-样式处理.html" class="doc-link">样式处理</a></li><li><a href="20-动画效果.html" class="doc-link">动画效果</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">🗺️</span>
          路由管理
        </h3>
        <ul class="category-docs">
          <li><a href="21-React-Router.html" class="doc-link">React-Router</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">📦</span>
          状态管理
        </h3>
        <ul class="category-docs">
          <li><a href="22-Context-API.html" class="doc-link">Context-API</a></li><li><a href="23-Redux集成.html" class="doc-link">Redux集成</a></li><li><a href="24-Zustand状态管理.html" class="doc-link">Zustand状态管理</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">🚀</span>
          性能优化
        </h3>
        <ul class="category-docs">
          <li><a href="25-性能优化技巧.html" class="doc-link">性能优化技巧</a></li><li><a href="26-代码分割.html" class="doc-link">代码分割</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">🧪</span>
          测试
        </h3>
        <ul class="category-docs">
          <li><a href="27-单元测试.html" class="doc-link">单元测试</a></li><li><a href="28-集成测试.html" class="doc-link">集成测试</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">🏗️</span>
          构建与部署
        </h3>
        <ul class="category-docs">
          <li><a href="29-项目构建.html" class="doc-link">项目构建</a></li><li><a href="30-生产部署.html" class="doc-link">生产部署</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">🛠️</span>
          开发工具
        </h3>
        <ul class="category-docs">
          <li><a href="31-开发者工具.html" class="doc-link">开发者工具</a></li><li><a href="32-调试技巧.html" class="doc-link">调试技巧</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">📖</span>
          API参考
        </h3>
        <ul class="category-docs">
          <li><a href="33-React-API完整参考.html" class="doc-link">React-API完整参考</a></li><li><a href="34-DOM元素属性.html" class="doc-link">DOM元素属性</a></li><li><a href="35-合成事件.html" class="doc-link">合成事件</a></li><li><a href="React-Hooks完整参考.html" class="doc-link">React-Hooks完整参考</a></li>
        </ul>
      </div>
      <div class="nav-category">
        <h3 class="category-title">
          <span class="category-icon">💡</span>
          最佳实践
        </h3>
        <ul class="category-docs">
          <li><a href="36-编码规范.html" class="doc-link">编码规范</a></li><li><a href="37-项目架构.html" class="doc-link">项目架构</a></li><li><a href="38-常见问题.html" class="doc-link">常见问题</a></li>
        </ul>
      </div>
          </nav>
        </div>
      </aside>

      <!-- 主内容区 -->
      <main class="content">
        <article class="doc-article">
          <div class="doc-header">
            <div class="breadcrumb">
              <a href="index.html">首页</a>
              <span class="separator">></span>
              <span class="current">项目架构</span>
            </div>
            <h1 class="doc-title">项目架构</h1>
            <div class="doc-meta">
              <span class="category" style="background: #84fab0">
                💡 最佳实践
              </span>
            </div>
          </div>
          
          <div class="doc-content">
            <h1>37-项目架构</h1>
<p>良好的项目架构是React应用成功的基础。本文档介绍React项目的架构设计原则、文件结构组织、模块化策略和最佳实践。</p>
<h2>架构原则</h2>
<h3>1. 分层架构</h3>
<pre><code>┌─────────────────────────────────────┐
│           表示层 (UI Layer)          │
│  Components, Pages, Hooks, Styles   │
├─────────────────────────────────────┤
│         业务逻辑层 (Logic Layer)      │
│    Services, Utils, Contexts        │
├─────────────────────────────────────┤
│         数据层 (Data Layer)          │
│   API, Store, Models, Constants     │
└─────────────────────────────────────┘
</code></pre>
<h3>2. 模块化原则</h3>
<ul>
<li><strong>单一职责</strong> - 每个模块只负责一个功能</li>
<li><strong>高内聚低耦合</strong> - 模块内部紧密相关，模块间松散耦合</li>
<li><strong>可复用性</strong> - 设计可复用的组件和工具</li>
<li><strong>可测试性</strong> - 便于单元测试和集成测试</li>
</ul>
<h2>文件结构组织</h2>
<h3>基础项目结构</h3>
<pre><code>my-react-app/
├── public/                    # 静态资源
│   ├── index.html
│   ├── favicon.ico
│   └── manifest.json
├── src/                       # 源代码
│   ├── components/            # 通用组件
│   ├── pages/                 # 页面组件
│   ├── hooks/                 # 自定义Hooks
│   ├── services/              # API服务
│   ├── utils/                 # 工具函数
│   ├── contexts/              # Context
│   ├── store/                 # 状态管理
│   ├── styles/                # 全局样式
│   ├── types/                 # TypeScript类型
│   ├── constants/             # 常量
│   ├── assets/                # 资源文件
│   ├── config/                # 配置文件
│   ├── tests/                 # 测试工具
│   ├── App.js
│   └── index.js
├── package.json
├── README.md
└── .gitignore
</code></pre>
<h3>详细目录结构</h3>
<pre><code>src/
├── components/                 # 通用组件
│   ├── UI/                    # 基础UI组件
│   │   ├── Button/
│   │   │   ├── Button.jsx
│   │   │   ├── Button.test.jsx
│   │   │   ├── Button.styles.js
│   │   │   └── index.js
│   │   ├── Input/
│   │   ├── Modal/
│   │   └── index.js
│   ├── Layout/                # 布局组件
│   │   ├── Header/
│   │   ├── Footer/
│   │   ├── Sidebar/
│   │   └── MainLayout/
│   ├── Forms/                 # 表单组件
│   │   ├── ContactForm/
│   │   ├── LoginForm/
│   │   └── SearchForm/
│   └── Charts/                # 图表组件
│       ├── LineChart/
│       ├── PieChart/
│       └── BarChart/
├── pages/                     # 页面组件
│   ├── Home/
│   │   ├── Home.jsx
│   │   ├── Home.test.jsx
│   │   ├── Home.styles.js
│   │   ├── components/        # 页面专用组件
│   │   │   ├── Hero/
│   │   │   ├── Features/
│   │   │   └── Testimonials/
│   │   └── index.js
│   ├── About/
│   ├── Contact/
│   ├── Dashboard/
│   │   ├── Dashboard.jsx
│   │   ├── components/
│   │   │   ├── StatsCard/
│   │   │   ├── RecentActivity/
│   │   │   └── QuickActions/
│   │   └── hooks/
│   │       ├── useDashboardData.js
│   │       └── useRealTimeUpdates.js
│   └── Profile/
├── hooks/                     # 自定义Hooks
│   ├── useAuth.js
│   ├── useLocalStorage.js
│   ├── useDebounce.js
│   ├── useFetch.js
│   ├── useForm.js
│   └── index.js
├── services/                  # API服务
│   ├── api/
│   │   ├── auth.js
│   │   ├── users.js
│   │   ├── products.js
│   │   └── index.js
│   ├── http.js               # HTTP客户端
│   ├── socket.js             # WebSocket服务
│   └── storage.js            # 存储服务
├── store/                     # 状态管理
│   ├── slices/               # Redux Toolkit slices
│   │   ├── authSlice.js
│   │   ├── userSlice.js
│   │   └── appSlice.js
│   ├── store.js              # Store配置
│   ├── middleware.js         # 中间件
│   └── selectors.js          # 选择器
├── contexts/                  # React Context
│   ├── AuthContext.js
│   ├── ThemeContext.js
│   └── NotificationContext.js
├── utils/                     # 工具函数
│   ├── formatters.js         # 格式化函数
│   ├── validators.js         # 验证函数
│   ├── helpers.js            # 辅助函数
│   ├── date.js               # 日期工具
│   └── index.js
├── styles/                    # 全局样式
│   ├── globals.css
│   ├── variables.css
│   ├── mixins.css
│   ├── reset.css
│   └── themes/
│       ├── light.css
│       └── dark.css
├── types/                     # TypeScript类型
│   ├── api.ts
│   ├── user.ts
│   ├── product.ts
│   └── index.ts
├── constants/                 # 常量
│   ├── api.js
│   ├── routes.js
│   ├── config.js
│   └── index.js
├── assets/                    # 资源文件
│   ├── images/
│   ├── icons/
│   ├── fonts/
│   └── videos/
├── config/                    # 配置文件
│   ├── env.js
│   ├── routes.js
│   ├── theme.js
│   └── index.js
└── tests/                     # 测试相关
    ├── __mocks__/
    ├── utils/
    ├── fixtures/
    └── setupTests.js
</code></pre>
<h2>组件架构</h2>
<h3>1. 原子设计模式</h3>
<pre><code>组件层级：
├── Atoms (原子)              # 最小的UI元素
│   ├── Button
│   ├── Input
│   ├── Label
│   └── Icon
├── Molecules (分子)          # 原子组合
│   ├── SearchBox
│   ├── FormField
│   └── Navigation
├── Organisms (有机体)        # 分子组合
│   ├── Header
│   ├── ProductList
│   └── ContactForm
├── Templates (模板)          # 有机体布局
│   ├── PageLayout
│   ├── ArticleTemplate
│   └── DashboardTemplate
└── Pages (页面)             # 具体页面
    ├── HomePage
    ├── AboutPage
    └── ContactPage
</code></pre>
<h3>2. 组件设计示例</h3>
<pre><code class="language-jsx">// atoms/Button/Button.jsx
import React from &#39;react&#39;
import PropTypes from &#39;prop-types&#39;
import classNames from &#39;classnames&#39;
import styles from &#39;./Button.module.css&#39;

const Button = ({ 
  children, 
  variant = &#39;primary&#39;, 
  size = &#39;medium&#39;, 
  disabled = false,
  loading = false,
  onClick,
  className,
  ...props 
}) =&gt; {
  const buttonClasses = classNames(
    styles.button,
    styles[variant],
    styles[size],
    {
      [styles.disabled]: disabled,
      [styles.loading]: loading
    },
    className
  )

  return (
    &lt;button
      className={buttonClasses}
      disabled={disabled || loading}
      onClick={onClick}
      {...props}
    &gt;
      {loading &amp;&amp; &lt;span className={styles.spinner} /&gt;}
      {children}
    &lt;/button&gt;
  )
}

Button.propTypes = {
  children: PropTypes.node.isRequired,
  variant: PropTypes.oneOf([&#39;primary&#39;, &#39;secondary&#39;, &#39;danger&#39;]),
  size: PropTypes.oneOf([&#39;small&#39;, &#39;medium&#39;, &#39;large&#39;]),
  disabled: PropTypes.bool,
  loading: PropTypes.bool,
  onClick: PropTypes.func,
  className: PropTypes.string
}

export default Button
</code></pre>
<pre><code class="language-jsx">// molecules/SearchBox/SearchBox.jsx
import React, { useState } from &#39;react&#39;
import { Input } from &#39;../../atoms/Input&#39;
import { Button } from &#39;../../atoms/Button&#39;
import { Icon } from &#39;../../atoms/Icon&#39;
import styles from &#39;./SearchBox.module.css&#39;

const SearchBox = ({ onSearch, placeholder = &quot;搜索...&quot; }) =&gt; {
  const [query, setQuery] = useState(&#39;&#39;)

  const handleSubmit = (e) =&gt; {
    e.preventDefault()
    onSearch(query)
  }

  const handleClear = () =&gt; {
    setQuery(&#39;&#39;)
    onSearch(&#39;&#39;)
  }

  return (
    &lt;form className={styles.searchBox} onSubmit={handleSubmit}&gt;
      &lt;Input
        type=&quot;text&quot;
        value={query}
        onChange={(e) =&gt; setQuery(e.target.value)}
        placeholder={placeholder}
        className={styles.input}
      /&gt;
      {query &amp;&amp; (
        &lt;Button
          type=&quot;button&quot;
          variant=&quot;ghost&quot;
          size=&quot;small&quot;
          onClick={handleClear}
          className={styles.clearButton}
        &gt;
          &lt;Icon name=&quot;close&quot; /&gt;
        &lt;/Button&gt;
      )}
      &lt;Button type=&quot;submit&quot; className={styles.searchButton}&gt;
        &lt;Icon name=&quot;search&quot; /&gt;
      &lt;/Button&gt;
    &lt;/form&gt;
  )
}

export default SearchBox
</code></pre>
<h2>状态管理架构</h2>
<h3>1. 状态管理策略</h3>
<pre><code>状态类型：
├── 本地状态 (Local State)
│   └── 使用 useState, useReducer
├── 组件间状态 (Shared State)
│   └── 使用 Context API
├── 全局状态 (Global State)
│   └── 使用 Redux, Zustand
└── 服务器状态 (Server State)
    └── 使用 React Query, SWR
</code></pre>
<h3>2. Redux架构示例</h3>
<pre><code class="language-javascript">// store/store.js
import { configureStore } from &#39;@reduxjs/toolkit&#39;
import authSlice from &#39;./slices/authSlice&#39;
import userSlice from &#39;./slices/userSlice&#39;
import uiSlice from &#39;./slices/uiSlice&#39;

export const store = configureStore({
  reducer: {
    auth: authSlice,
    user: userSlice,
    ui: uiSlice
  },
  middleware: (getDefaultMiddleware) =&gt;
    getDefaultMiddleware({
      serializableCheck: {
        ignoredActions: [&#39;persist/PERSIST&#39;]
      }
    })
})

export type RootState = ReturnType&lt;typeof store.getState&gt;
export type AppDispatch = typeof store.dispatch
</code></pre>
<pre><code class="language-javascript">// store/slices/authSlice.js
import { createSlice, createAsyncThunk } from &#39;@reduxjs/toolkit&#39;
import { authAPI } from &#39;../../services/api/auth&#39;

export const login = createAsyncThunk(
  &#39;auth/login&#39;,
  async ({ email, password }, { rejectWithValue }) =&gt; {
    try {
      const response = await authAPI.login(email, password)
      return response.data
    } catch (error) {
      return rejectWithValue(error.response.data)
    }
  }
)

const authSlice = createSlice({
  name: &#39;auth&#39;,
  initialState: {
    user: null,
    token: null,
    isAuthenticated: false,
    loading: false,
    error: null
  },
  reducers: {
    logout: (state) =&gt; {
      state.user = null
      state.token = null
      state.isAuthenticated = false
    },
    clearError: (state) =&gt; {
      state.error = null
    }
  },
  extraReducers: (builder) =&gt; {
    builder
      .addCase(login.pending, (state) =&gt; {
        state.loading = true
        state.error = null
      })
      .addCase(login.fulfilled, (state, action) =&gt; {
        state.loading = false
        state.user = action.payload.user
        state.token = action.payload.token
        state.isAuthenticated = true
      })
      .addCase(login.rejected, (state, action) =&gt; {
        state.loading = false
        state.error = action.payload.message
      })
  }
})

export const { logout, clearError } = authSlice.actions
export default authSlice.reducer
</code></pre>
<h2>路由架构</h2>
<h3>1. 路由配置</h3>
<pre><code class="language-javascript">// config/routes.js
import { lazy } from &#39;react&#39;

const Home = lazy(() =&gt; import(&#39;../pages/Home&#39;))
const About = lazy(() =&gt; import(&#39;../pages/About&#39;))
const Dashboard = lazy(() =&gt; import(&#39;../pages/Dashboard&#39;))
const Profile = lazy(() =&gt; import(&#39;../pages/Profile&#39;))
const Login = lazy(() =&gt; import(&#39;../pages/Login&#39;))
const NotFound = lazy(() =&gt; import(&#39;../pages/NotFound&#39;))

export const routes = [
  {
    path: &#39;/&#39;,
    element: Home,
    exact: true,
    public: true
  },
  {
    path: &#39;/about&#39;,
    element: About,
    public: true
  },
  {
    path: &#39;/login&#39;,
    element: Login,
    public: true,
    redirectIfAuthenticated: true
  },
  {
    path: &#39;/dashboard&#39;,
    element: Dashboard,
    private: true,
    roles: [&#39;admin&#39;, &#39;user&#39;]
  },
  {
    path: &#39;/profile&#39;,
    element: Profile,
    private: true
  },
  {
    path: &#39;*&#39;,
    element: NotFound,
    public: true
  }
]
</code></pre>
<h3>2. 路由守卫</h3>
<pre><code class="language-jsx">// components/Layout/RouteGuard.jsx
import React from &#39;react&#39;
import { Navigate, useLocation } from &#39;react-router-dom&#39;
import { useAuth } from &#39;../../hooks/useAuth&#39;

const RouteGuard = ({ children, isPrivate = false, roles = [] }) =&gt; {
  const { isAuthenticated, user } = useAuth()
  const location = useLocation()

  if (isPrivate &amp;&amp; !isAuthenticated) {
    return &lt;Navigate to=&quot;/login&quot; state={{ from: location }} replace /&gt;
  }

  if (roles.length &gt; 0 &amp;&amp; !roles.includes(user?.role)) {
    return &lt;Navigate to=&quot;/unauthorized&quot; replace /&gt;
  }

  return children
}

export default RouteGuard
</code></pre>
<h2>API架构</h2>
<h3>1. HTTP客户端</h3>
<pre><code class="language-javascript">// services/http.js
import axios from &#39;axios&#39;
import { store } from &#39;../store/store&#39;
import { logout } from &#39;../store/slices/authSlice&#39;

const http = axios.create({
  baseURL: process.env.REACT_APP_API_URL,
  timeout: 10000,
  headers: {
    &#39;Content-Type&#39;: &#39;application/json&#39;
  }
})

// 请求拦截器
http.interceptors.request.use(
  (config) =&gt; {
    const token = store.getState().auth.token
    if (token) {
      config.headers.Authorization = `Bearer ${token}`
    }
    return config
  },
  (error) =&gt; Promise.reject(error)
)

// 响应拦截器
http.interceptors.response.use(
  (response) =&gt; response,
  (error) =&gt; {
    if (error.response?.status === 401) {
      store.dispatch(logout())
    }
    return Promise.reject(error)
  }
)

export default http
</code></pre>
<h3>2. API服务</h3>
<pre><code class="language-javascript">// services/api/users.js
import http from &#39;../http&#39;

export const userAPI = {
  getUsers: (params) =&gt; http.get(&#39;/users&#39;, { params }),
  getUserById: (id) =&gt; http.get(`/users/${id}`),
  createUser: (userData) =&gt; http.post(&#39;/users&#39;, userData),
  updateUser: (id, userData) =&gt; http.put(`/users/${id}`, userData),
  deleteUser: (id) =&gt; http.delete(`/users/${id}`),
  uploadAvatar: (id, file) =&gt; {
    const formData = new FormData()
    formData.append(&#39;avatar&#39;, file)
    return http.post(`/users/${id}/avatar`, formData, {
      headers: { &#39;Content-Type&#39;: &#39;multipart/form-data&#39; }
    })
  }
}
</code></pre>
<h2>样式架构</h2>
<h3>1. CSS模块化</h3>
<pre><code class="language-css">/* styles/variables.css */
:root {
  /* 颜色系统 */
  --primary-color: #007bff;
  --secondary-color: #6c757d;
  --success-color: #28a745;
  --danger-color: #dc3545;
  --warning-color: #ffc107;
  --info-color: #17a2b8;
  
  /* 字体系统 */
  --font-family-base: &#39;Inter&#39;, -apple-system, BlinkMacSystemFont, sans-serif;
  --font-size-base: 16px;
  --line-height-base: 1.5;
  
  /* 间距系统 */
  --spacing-xs: 4px;
  --spacing-sm: 8px;
  --spacing-md: 16px;
  --spacing-lg: 24px;
  --spacing-xl: 32px;
  
  /* 断点系统 */
  --breakpoint-sm: 576px;
  --breakpoint-md: 768px;
  --breakpoint-lg: 992px;
  --breakpoint-xl: 1200px;
}
</code></pre>
<h3>2. 主题系统</h3>
<pre><code class="language-javascript">// config/theme.js
export const theme = {
  colors: {
    primary: {
      50: &#39;#eff6ff&#39;,
      100: &#39;#dbeafe&#39;,
      500: &#39;#3b82f6&#39;,
      600: &#39;#2563eb&#39;,
      700: &#39;#1d4ed8&#39;,
      900: &#39;#1e3a8a&#39;
    },
    gray: {
      50: &#39;#f9fafb&#39;,
      100: &#39;#f3f4f6&#39;,
      500: &#39;#6b7280&#39;,
      900: &#39;#111827&#39;
    }
  },
  spacing: {
    xs: &#39;4px&#39;,
    sm: &#39;8px&#39;,
    md: &#39;16px&#39;,
    lg: &#39;24px&#39;,
    xl: &#39;32px&#39;
  },
  typography: {
    fontFamily: {
      sans: [&#39;Inter&#39;, &#39;system-ui&#39;, &#39;sans-serif&#39;],
      mono: [&#39;Monaco&#39;, &#39;Consolas&#39;, &#39;monospace&#39;]
    },
    fontSize: {
      xs: &#39;12px&#39;,
      sm: &#39;14px&#39;,
      base: &#39;16px&#39;,
      lg: &#39;18px&#39;,
      xl: &#39;20px&#39;
    }
  },
  breakpoints: {
    sm: &#39;576px&#39;,
    md: &#39;768px&#39;,
    lg: &#39;992px&#39;,
    xl: &#39;1200px&#39;
  }
}
</code></pre>
<h2>测试架构</h2>
<h3>1. 测试策略</h3>
<pre><code>测试金字塔：
├── 单元测试 (70%)
│   ├── 组件测试
│   ├── Hook测试
│   ├── 工具函数测试
│   └── 服务测试
├── 集成测试 (20%)
│   ├── 页面测试
│   ├── 用户流程测试
│   └── API集成测试
└── 端到端测试 (10%)
    ├── 关键路径测试
    └── 用户场景测试
</code></pre>
<h3>2. 测试工具配置</h3>
<pre><code class="language-javascript">// tests/utils/testUtils.js
import React from &#39;react&#39;
import { render } from &#39;@testing-library/react&#39;
import { BrowserRouter } from &#39;react-router-dom&#39;
import { Provider } from &#39;react-redux&#39;
import { ThemeProvider } from &#39;styled-components&#39;
import { store } from &#39;../../store/store&#39;
import { theme } from &#39;../../config/theme&#39;

const AllTheProviders = ({ children }) =&gt; {
  return (
    &lt;Provider store={store}&gt;
      &lt;BrowserRouter&gt;
        &lt;ThemeProvider theme={theme}&gt;
          {children}
        &lt;/ThemeProvider&gt;
      &lt;/BrowserRouter&gt;
    &lt;/Provider&gt;
  )
}

const customRender = (ui, options) =&gt;
  render(ui, { wrapper: AllTheProviders, ...options })

export * from &#39;@testing-library/react&#39;
export { customRender as render }
</code></pre>
<h2>构建架构</h2>
<h3>1. 环境配置</h3>
<pre><code class="language-javascript">// config/env.js
const env = {
  development: {
    API_URL: &#39;http://localhost:3001/api&#39;,
    SOCKET_URL: &#39;ws://localhost:3001&#39;,
    DEBUG: true
  },
  staging: {
    API_URL: &#39;https://staging-api.example.com&#39;,
    SOCKET_URL: &#39;wss://staging-api.example.com&#39;,
    DEBUG: false
  },
  production: {
    API_URL: &#39;https://api.example.com&#39;,
    SOCKET_URL: &#39;wss://api.example.com&#39;,
    DEBUG: false
  }
}

export default env[process.env.NODE_ENV || &#39;development&#39;]
</code></pre>
<h3>2. 构建脚本</h3>
<pre><code class="language-json">{
  &quot;scripts&quot;: {
    &quot;start&quot;: &quot;react-scripts start&quot;,
    &quot;build&quot;: &quot;react-scripts build&quot;,
    &quot;build:staging&quot;: &quot;REACT_APP_ENV=staging react-scripts build&quot;,
    &quot;build:production&quot;: &quot;REACT_APP_ENV=production react-scripts build&quot;,
    &quot;test&quot;: &quot;react-scripts test&quot;,
    &quot;test:coverage&quot;: &quot;react-scripts test --coverage --watchAll=false&quot;,
    &quot;lint&quot;: &quot;eslint src --ext .js,.jsx,.ts,.tsx&quot;,
    &quot;lint:fix&quot;: &quot;eslint src --ext .js,.jsx,.ts,.tsx --fix&quot;,
    &quot;format&quot;: &quot;prettier --write src/**/*.{js,jsx,ts,tsx,json,css,md}&quot;,
    &quot;analyze&quot;: &quot;npm run build &amp;&amp; npx webpack-bundle-analyzer build/static/js/*.js&quot;
  }
}
</code></pre>
<h2>性能架构</h2>
<h3>1. 代码分割策略</h3>
<pre><code class="language-javascript">// utils/loadable.js
import { lazy, Suspense } from &#39;react&#39;
import LoadingSpinner from &#39;../components/UI/LoadingSpinner&#39;

export const createLoadable = (importFunc) =&gt; {
  const LazyComponent = lazy(importFunc)
  
  return (props) =&gt; (
    &lt;Suspense fallback={&lt;LoadingSpinner /&gt;}&gt;
      &lt;LazyComponent {...props} /&gt;
    &lt;/Suspense&gt;
  )
}

// 使用示例
export const HomePage = createLoadable(() =&gt; import(&#39;../pages/Home&#39;))
export const DashboardPage = createLoadable(() =&gt; import(&#39;../pages/Dashboard&#39;))
</code></pre>
<h3>2. 缓存策略</h3>
<pre><code class="language-javascript">// utils/cache.js
class Cache {
  constructor() {
    this.cache = new Map()
    this.expiry = new Map()
  }

  set(key, value, ttl = 300000) { // 默认5分钟
    this.cache.set(key, value)
    this.expiry.set(key, Date.now() + ttl)
  }

  get(key) {
    if (this.isExpired(key)) {
      this.delete(key)
      return null
    }
    return this.cache.get(key)
  }

  isExpired(key) {
    const expiry = this.expiry.get(key)
    return expiry &amp;&amp; Date.now() &gt; expiry
  }

  delete(key) {
    this.cache.delete(key)
    this.expiry.delete(key)
  }

  clear() {
    this.cache.clear()
    this.expiry.clear()
  }
}

export const cache = new Cache()
</code></pre>
<h2>安全架构</h2>
<h3>1. 输入验证</h3>
<pre><code class="language-javascript">// utils/validators.js
import DOMPurify from &#39;dompurify&#39;

export const sanitizeInput = (input) =&gt; {
  return DOMPurify.sanitize(input)
}

export const validateEmail = (email) =&gt; {
  const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/
  return emailRegex.test(email)
}

export const validatePassword = (password) =&gt; {
  return {
    minLength: password.length &gt;= 8,
    hasUppercase: /[A-Z]/.test(password),
    hasLowercase: /[a-z]/.test(password),
    hasNumber: /\d/.test(password),
    hasSpecial: /[!@#$%^&amp;*(),.?&quot;:{}|&lt;&gt;]/.test(password)
  }
}
</code></pre>
<h3>2. 权限控制</h3>
<pre><code class="language-javascript">// utils/permissions.js
export const permissions = {
  USER: {
    READ_PROFILE: &#39;user:read:profile&#39;,
    UPDATE_PROFILE: &#39;user:update:profile&#39;
  },
  ADMIN: {
    READ_USERS: &#39;admin:read:users&#39;,
    CREATE_USERS: &#39;admin:create:users&#39;,
    UPDATE_USERS: &#39;admin:update:users&#39;,
    DELETE_USERS: &#39;admin:delete:users&#39;
  }
}

export const checkPermission = (userPermissions, requiredPermission) =&gt; {
  return userPermissions.includes(requiredPermission)
}

export const hasAnyPermission = (userPermissions, requiredPermissions) =&gt; {
  return requiredPermissions.some(permission =&gt; 
    userPermissions.includes(permission)
  )
}
</code></pre>
<h2>监控架构</h2>
<h3>1. 错误监控</h3>
<pre><code class="language-javascript">// utils/errorTracking.js
import * as Sentry from &#39;@sentry/react&#39;

export const initErrorTracking = () =&gt; {
  if (process.env.NODE_ENV === &#39;production&#39;) {
    Sentry.init({
      dsn: process.env.REACT_APP_SENTRY_DSN,
      environment: process.env.NODE_ENV,
      tracesSampleRate: 1.0
    })
  }
}

export const captureError = (error, context = {}) =&gt; {
  if (process.env.NODE_ENV === &#39;production&#39;) {
    Sentry.captureException(error, { extra: context })
  } else {
    console.error(&#39;Error:&#39;, error, context)
  }
}
</code></pre>
<h3>2. 性能监控</h3>
<pre><code class="language-javascript">// utils/performance.js
export const measurePerformance = (name, fn) =&gt; {
  return async (...args) =&gt; {
    const start = performance.now()
    const result = await fn(...args)
    const end = performance.now()
    
    console.log(`${name}: ${end - start}ms`)
    
    // 发送性能数据到监控服务
    if (end - start &gt; 1000) { // 超过1秒的操作
      sendPerformanceMetric(name, end - start)
    }
    
    return result
  }
}

const sendPerformanceMetric = (name, duration) =&gt; {
  // 发送到监控服务
  fetch(&#39;/api/metrics&#39;, {
    method: &#39;POST&#39;,
    headers: { &#39;Content-Type&#39;: &#39;application/json&#39; },
    body: JSON.stringify({ name, duration, timestamp: Date.now() })
  })
}
</code></pre>
<h2>最佳实践</h2>
<h3>1. 代码组织</h3>
<ul>
<li><strong>按功能分组</strong> - 而不是按类型</li>
<li><strong>保持一致性</strong> - 统一的命名和结构</li>
<li><strong>适度抽象</strong> - 避免过度工程化</li>
<li><strong>文档化</strong> - 重要的决策和架构要有文档</li>
</ul>
<h3>2. 性能优化</h3>
<ul>
<li><strong>懒加载</strong> - 按需加载组件和资源</li>
<li><strong>缓存策略</strong> - 合理使用缓存</li>
<li><strong>代码分割</strong> - 减少初始加载时间</li>
<li><strong>资源优化</strong> - 压缩和优化静态资源</li>
</ul>
<h3>3. 可维护性</h3>
<ul>
<li><strong>模块化</strong> - 保持模块的独立性</li>
<li><strong>测试覆盖</strong> - 保证代码质量</li>
<li><strong>类型安全</strong> - 使用TypeScript</li>
<li><strong>代码审查</strong> - 建立代码审查流程</li>
</ul>
<p>通过合理的架构设计，可以构建出易于维护、扩展和测试的React应用。架构设计需要根据项目规模和需求进行调整，但这些原则和模式可以作为基础参考。 </p>

          </div>

          <!-- 文档导航 -->
          <div class="doc-navigation">
            
              <a href="36-编码规范.html" class="nav-btn prev-btn">
                <span class="nav-icon">←</span>
                <div class="nav-text">
                  <span class="nav-label">上一篇</span>
                  <span class="nav-title">编码规范</span>
                </div>
              </a>
            
            
            
              <a href="38-常见问题.html" class="nav-btn next-btn">
                <div class="nav-text">
                  <span class="nav-label">下一篇</span>
                  <span class="nav-title">常见问题</span>
                </div>
                <span class="nav-icon">→</span>
              </a>
            
          </div>
        </article>
      </main>
    </div>

    <!-- 返回顶部按钮 -->
    <button class="back-to-top" id="backToTop" onclick="scrollToTop()">
      <span>↑</span>
    </button>

    <!-- 底部 -->
    <footer class="footer">
      <div class="footer-content">
        <p>&copy; 2024 React 中文文档. 基于 React 18.x 构建</p>
        <p>Made with ❤️ by React中文社区</p>
      </div>
    </footer>
  </div>

  <script src="assets/script.js"></script>
</body>
</html>